(function(n,A){'object'==typeof exports&&'undefined'!=typeof module?module.exports=A():'function'==typeof define&&define.amd?define(A):n.Processing=A()})(this,function(){'use strict';function n(gt){let ft,xt=gt,At=function(St,yt,Ct,It){return!yt&&!It?(ft=!0,''):St},Et=/([<]?)<\s*((?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\[\])*(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?(?:\s*,\s*(?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\[\])*(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?)*)\s*>([=]?)/g;do ft=!1,xt=xt.replace(Et,At);while(ft);return xt}function A(gt){var ft=[],xt=gt.split(/([\{\[\(\)\]\}])/),At=xt[0],Et=[];for(var St=1;St<xt.length;St+=2){var yt=xt[St];if('['===yt||'{'===yt||'('===yt)Et.push(At),At=yt;else if(']'===yt||'}'===yt||')'===yt){var Ct='}'===yt?'A':')'===yt?'B':'C',It=ft.length;ft.push(At+yt),At=Et.pop()+'"'+Ct+(It+1)+'"'}At+=xt[St+1]}return ft.unshift(At),ft}function E(gt){var xt,ft=/^\s*/.exec(gt);if(ft[0].length===gt.length)xt={left:ft[0],middle:'',right:''};else{var At=/\s*$/.exec(gt);xt={left:ft[0],middle:gt.substring(ft[0].length,At.index),right:At[0]}}return xt.untrim=function(Et){return this.left+Et+this.right},xt}function S(gt){return gt.replace(/^\s+/,'').replace(/\s+$/,'')}function C(gt,ft){function xt(Ft,$t,Gt,Ht){let Xt=St[Ht];wt=!0;let Vt=E(Xt.substring(1,Xt.length-1));return'__'+Gt+(''===Vt.middle?gt.addAtom('('+$t.replace(/\.\s*$/,'')+')','B'):gt.addAtom('('+$t.replace(/\.\s*$/,'')+','+Vt.middle+')','B'))}function At(Ft,$t,Gt){return wt=!0,'__instanceof'+gt.addAtom('('+$t+', '+Gt+')','B')}let Et=ft,St=gt.atoms,yt=/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"C\d+")+\s*("A\d+")/g;Et=Et.replace(yt,(Ft,$t,Gt)=>Gt);let Ct=/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"B\d+")\s*("A\d+")/g;Et=Et.replace(Ct,Ft=>gt.addAtom(Ft,'F')),Et=Et.replace(gt.functionsRegex,Ft=>gt.addAtom(Ft,'H'));let It=/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*("C\d+"(?:\s*"C\d+")*)/g;Et=Et.replace(It,(Ft,$t,Gt)=>{let Ht=Gt.replace(/"C(\d+)"/g,(Ut,zt)=>St[zt]).replace(/\[\s*\]/g,'[null]').replace(/\s*\]\s*\[\s*/g,', '),Xt='{'+Ht.substring(1,Ht.length-1)+'}',Vt='(\''+$t+'\', '+gt.addAtom(Xt,'A')+')';return'$p.createJavaArray'+gt.addAtom(Vt,'B')});let bt=/(\.\s*length)\s*"B\d+"/g;Et=Et.replace(bt,'$1');let _t=/#([0-9A-Fa-f]{6})\b/g;Et=Et.replace(_t,(Ft,$t)=>'0xFF'+$t);let Tt=/"B(\d+)"(\s*(?:[\w$']|"B))/g;Et=Et.replace(Tt,(Ft,$t,Gt)=>{let Ht=St[$t],Xt=/^\(\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\s*(?:"C\d+"\s*)*\)$/;if(!Xt.test(Ht))return Ft;let Vt=/^\(\s*int\s*\)$/;if(Vt.test(Ht))return'(int)'+Gt;let Ut=Ht.split(/"C(\d+)"/g);return 1<Ut.length&&!/^\[\s*\]$/.test(St[Ut[1]])?Ft:''+Gt});let Pt=/\(int\)([^,\]\)\}\?\:\*\+\-\/\^\|\%\&\~<\>\=]+)/g;Et=Et.replace(Pt,(Ft,$t)=>{let Gt=E($t);return Gt.untrim('__int_cast('+Gt.middle+')')});let Ot=/\bsuper(\s*"B\d+")/g,Nt=/\bsuper(\s*\.)/g;Et=Et.replace(Ot,'$$superCstr$1').replace(Nt,'$$super$1');let Rt=/\b0+((\d*)(?:\.[\d*])?(?:[eE][\-\+]?\d+)?[fF]?)\b/;Et=Et.replace(Rt,(Ft,$t,Gt)=>{return $t===Gt?Ft:''===Gt?'0'+$t:$t});let Mt=/\b(\.?\d+\.?)[fF]\b/g;Et=Et.replace(Mt,'$1');let kt=/([^\s])%([^=\s])/g;Et=Et.replace(kt,'$1 % $2');let Lt=/\b(frameRate|keyPressed|mousePressed)\b(?!\s*"B)/g;Et=Et.replace(Lt,'__$1');let Dt=/\b(boolean|byte|char|float|int)\s*"B/g;Et=Et.replace(Dt,(Ft,$t)=>'parse'+$t.substring(0,1).toUpperCase()+$t.substring(1)+'"B');let vt=/\bpixels\b\s*(("C(\d+)")|\.length)?(\s*=(?!=)([^,\]\)\}]+))?/g;Et=Et.replace(vt,(Ft,$t,Gt,Ht,Xt,Vt)=>{if(Gt){let Ut=St[Ht];return Xt?'pixels.setPixel'+gt.addAtom('('+Ut.substring(1,Ut.length-1)+','+Vt+')','B'):'pixels.getPixel'+gt.addAtom('('+Ut.substring(1,Ut.length-1)+')','B')}return $t?'pixels.getLength'+gt.addAtom('()','B'):Xt?'pixels.set'+gt.addAtom('('+Vt+')','B'):'pixels.toArray'+gt.addAtom('()','B')});let wt;do{wt=!1;let Ft=/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*\.\s*(?:[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*\.\s*)*)(replace|replaceAll|replaceFirst|contains|equals|equalsIgnoreCase|hashCode|toCharArray|printStackTrace|split|startsWith|endsWith|codePointAt|matches)\s*"B(\d+)"/g;Et=Et.replace(Ft,xt)}while(wt);do{wt=!1;let Ft=/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*(?:\.\s*[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*)*)instanceof\s+([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)/g;Et=Et.replace(Ft,At)}while(wt);let Bt=/\bthis(\s*"B\d+")/g;return Et=Et.replace(Bt,'$$constr$1'),Et}function I(gt){return gt.replace(/\b(catch\s*"B\d+"\s*"A\d+")(\s*catch\s*"B\d+"\s*"A\d+")+/g,'$1')}function _(gt){return gt.substring(2,gt.length-1)}function T(gt){gt.sort((ft,xt)=>xt.weight-ft.weight)}function P(gt,ft,xt){return gt.map(At=>At.toString(ft)).join(xt)}function O(gt,ft){for(var xt=0,At=ft.length;xt<At;++xt)gt[ft[xt]]=null;return gt}function N(gt,ft){let xt=/(\.\s*)?((?:\b[A-Za-z_]|\$)[\w$]*)(\s*\.\s*([A-Za-z_$][\w$]*)(\s*\()?)?/g;return gt.replace(xt,(At,Et,St,yt,Ct,It)=>{if(Et)return At;try{return ft({name:St,member:Ct,callSign:!!It})+(yt===void 0?'':yt)}catch(bt){return console.error(bt),'<<<CONTEXT REPLACEMENT FAILED>>>'}})}function R(gt){let ft=[];for(let xt=0,At=gt.length;xt<At;++xt){let Et=gt[xt];Et instanceof Me?ft=ft.concat(Et.getNames()):Et instanceof xe&&Et.argument.initStatement instanceof Me?ft=ft.concat(Et.argument.initStatement.getNames()):(Et instanceof Ce||Et instanceof ye||Et instanceof Ie||Et instanceof le||Et instanceof Te||Et instanceof Ae)&&ft.push(Et.name)}return O({},ft)}function M(gt){for(var ft in gt)if(gt.hasOwnProperty(ft))return!1;return!0}function L(gt){function ft(St,yt){let bt,Ct=yt.split('.'),It=St.scope;for(;It;){if(It.hasOwnProperty(Ct[0])){bt=It[Ct[0]];break}It=It.scope}void 0===bt&&(bt=Et[Ct[0]]);for(let _t=1,Tt=Ct.length;_t<Tt&&bt;++_t)bt=bt.inScope[Ct[_t]];return bt}let xt,At,Et={};for(xt in Object.keys(gt).forEach(St=>{At=gt[St];let yt=At.scopeId,Ct=At.name;if(yt){let It=gt[yt];At.scope=It,void 0===It.inScope&&(It.inScope={}),It.inScope[Ct]=At}else Et[Ct]=At}),gt)if(gt.hasOwnProperty(xt)){At=gt[xt];let St=At.body.baseClassName;if(St){let _t=ft(At,St);_t&&(At.base=_t,!_t.derived&&(_t.derived=[]),_t.derived.push(At))}let It,bt,yt=At.body.interfacesNames,Ct=[];if(yt&&0<yt.length){for(It=0,bt=yt.length;It<bt;++It){let _t=ft(At,yt[It]);(Ct.push(_t),!!_t)&&(_t.derived||(_t.derived=[]),_t.derived.push(At))}0<Ct.length&&(At.interfaces=Ct)}}}function D(gt,ft,xt){let At=gt[ft];if(!At)return!1;let Et=At.indexOf(xt);return!(0>Et)&&(At.splice(Et,1),!(0<At.length))&&(delete gt[ft],!0)}function B(gt){let ft=[],xt={},At,Et,St;for(At in gt)if(gt.hasOwnProperty(At))if(St=gt[At],!St.inScope&&!St.derived)ft.push(At),St.weight=0;else{let yt=[];if(St.inScope)for(Et in St.inScope)St.inScope.hasOwnProperty(Et)&&yt.push(St.inScope[Et]);St.derived&&(yt=yt.concat(St.derived)),xt[At]=yt}for(;0<ft.length;)if(At=ft.shift(),St=gt[At],St.scopeId&&D(xt,St.scopeId,St)&&(ft.push(St.scopeId),gt[St.scopeId].weight=St.weight+1),St.base&&D(xt,St.base.classId,St)&&(ft.push(St.base.classId),St.base.weight=St.weight+1),St.interfaces){let yt,Ct;for(yt=0,Ct=St.interfaces.length;yt<Ct;++yt)St.interfaces[yt]&&D(xt,St.interfaces[yt].classId,St)&&(ft.push(St.interfaces[yt].classId),St.interfaces[yt].weight=St.weight+1)}}function F(){}function $(gt){var ft=250,xt=gt.size/ft,At=document.createElement('canvas');At.width=2*ft,At.height=2*ft,At.style.opacity=0;var Et=gt.getCSSDefinition(ft+'px','normal'),St=At.getContext('2d');St.font=Et;var yt='dbflkhyjqpg';At.width=St.measureText(yt).width,St.font=Et;var Ct=document.createElement('div');Ct.style.position='absolute',Ct.style.opacity=0,Ct.style.fontFamily='"'+gt.name+'"',Ct.style.fontSize=ft+'px',Ct.innerHTML=yt+'<br/>'+yt,document.body.appendChild(Ct);var It=At.width,bt=At.height,_t=bt/2;St.fillStyle='white',St.fillRect(0,0,It,bt),St.fillStyle='black',St.fillText(yt,0,_t);for(var Tt=St.getImageData(0,0,It,bt).data,Pt=0,Ot=4*It,Nt=Tt.length;++Pt<Nt&&255===Tt[Pt];)F();var Rt=Math.round(Pt/Ot);for(Pt=Nt-1;0<--Pt&&255===Tt[Pt];)F();var Mt=Math.round(Pt/Ot);if(gt.ascent=xt*(_t-Rt),gt.descent=xt*(Mt-_t),document.defaultView.getComputedStyle){var kt=document.defaultView.getComputedStyle(Ct,null).getPropertyValue('height');kt=xt*kt.replace('px',''),kt>=2*gt.size&&(gt.leading=Math.round(kt/2))}return(document.body.removeChild(Ct),gt.caching)?St:void 0}function G(gt,ft){return null===gt||null===ft?null==gt&&null==ft:'string'==typeof gt?gt===ft:'object'==typeof gt?gt.equals instanceof Function?gt.equals(ft):gt==ft:gt===ft}function H(gt,ft){if('string'==typeof gt){var xt=0;for(var At=0;At<gt.length;++At)xt=4294967295&31*xt+gt.charCodeAt(At);return xt}return'object'==typeof gt?gt.hashCode instanceof Function?gt.hashCode():(gt.$id===ft&&(gt.$id=Math.floor(65536*Math.random())-32768<<16|Math.floor(65536*Math.random())),gt.$id):4294967295&gt}function V(gt,ft){let xt=H(ft)%gt.length;return 0>xt?gt.length+xt:xt}function U(gt,ft,xt){if(!(xt<=ft*gt.length)){let At=[];gt.forEach(yt=>{yt&&(At=At.concat(yt))});let Et=2*gt.length,St=[];return St.length=Et,At.forEach(()=>{let yt=V(gt,At[j].key),Ct=St[yt];void 0===Ct&&(St[yt]=Ct=[]),Ct.push(At[j])}),gt}}function K(gt){function ft(_t,Tt,Pt,Ot){var Nt=15&_t,Rt=8>Nt?Tt:Pt,Mt=4>Nt?Pt:12==Nt||14==Nt?Tt:Ot;return(0==(1&Nt)?Rt:-Rt)+(0==(2&Nt)?Mt:-Mt)}function xt(_t,Tt,Pt){var Ot=0==(1&_t)?Tt:Pt;return 0==(2&_t)?-Ot:Ot}function At(_t,Tt){return 0==(1&_t)?-Tt:Tt}function Et(_t,Tt,Pt){return Tt+_t*(Pt-Tt)}var St=gt===undef?Marsaglia.createRandomized():new Marsaglia(gt,(gt<<16)+(gt>>16)),yt,Ct,It=new Uint8Array(512);for(yt=0;256>yt;++yt)It[yt]=yt;for(yt=0;256>yt;++yt){var bt=It[Ct=255&St.intGenerator()];It[Ct]=It[yt],It[yt]=bt}for(yt=0;256>yt;++yt)It[yt+256]=It[yt];this.noise3d=function(_t,Tt,Pt){var Ot=255&Math.floor(_t),Nt=255&Math.floor(Tt),Rt=255&Math.floor(Pt);_t-=Math.floor(_t),Tt-=Math.floor(Tt),Pt-=Math.floor(Pt);var Mt=(3-2*_t)*_t*_t,kt=(3-2*Tt)*Tt*Tt,Lt=(3-2*Pt)*Pt*Pt,Dt=It[Ot]+Nt,vt=It[Dt]+Rt,wt=It[Dt+1]+Rt,Bt=It[Ot+1]+Nt,Ft=It[Bt]+Rt,$t=It[Bt+1]+Rt;return Et(Lt,Et(kt,Et(Mt,ft(It[vt],_t,Tt,Pt),ft(It[Ft],_t-1,Tt,Pt)),Et(Mt,ft(It[wt],_t,Tt-1,Pt),ft(It[$t],_t-1,Tt-1,Pt))),Et(kt,Et(Mt,ft(It[vt+1],_t,Tt,Pt-1),ft(It[Ft+1],_t-1,Tt,Pt-1)),Et(Mt,ft(It[wt+1],_t,Tt-1,Pt-1),ft(It[$t+1],_t-1,Tt-1,Pt-1))))},this.noise2d=function(_t,Tt){var Pt=255&Math.floor(_t),Ot=255&Math.floor(Tt);_t-=Math.floor(_t),Tt-=Math.floor(Tt);var Nt=(3-2*_t)*_t*_t,Rt=(3-2*Tt)*Tt*Tt,Mt=It[Pt]+Ot,kt=It[Pt+1]+Ot;return Et(Rt,Et(Nt,xt(It[Mt],_t,Tt),xt(It[kt],_t-1,Tt)),Et(Nt,xt(It[Mt+1],_t,Tt-1),xt(It[kt+1],_t-1,Tt-1)))},this.noise1d=function(_t){var Tt=255&Math.floor(_t);_t-=Math.floor(_t);var Pt=(3-2*_t)*_t*_t;return Et(Pt,At(It[Tt],_t),At(It[Tt+1],_t-1))}}function W(gt){return Array.from(gt).slice(1)}function Q(gt){function ft(yt,Ct,It){if(!yt.hasOwnProperty(Ct)||'function'!=typeof yt[Ct])return void(yt[Ct]=It);var bt=yt[Ct];if('$overloads'in bt)return void(bt.$defaultOverload=It);if('$overloads'in It||bt.length!==It.length){var _t,Tt;'$overloads'in It?(_t=It.$overloads.slice(0),_t[bt.length]=bt,Tt=It.$defaultOverload):(_t=[],_t[It.length]=It,_t[bt.length]=bt,Tt=bt);var Pt=function(){var Ot=Pt.$overloads[arguments.length]||('$methodArgsIndex'in Pt&&arguments.length>Pt.$methodArgsIndex?Pt.$overloads[Pt.$methodArgsIndex]:null)||Pt.$defaultOverload;return Ot.apply(this,arguments)};Pt.$overloads=_t,'$methodArgsIndex'in It&&(Pt.$methodArgsIndex=It.$methodArgsIndex),Pt.$defaultOverload=Tt,Pt.name=Ct,yt[Ct]=Pt}}function xt(yt,Ct){function It(Tt){St.defineProperty(yt,Tt,{get:function(){return Ct[Tt]},set:function(Pt){Ct[Tt]=Pt},enumerable:!0})}var bt=[];for(var _t in Ct)'function'==typeof Ct[_t]?ft(yt,_t,Ct[_t]):'$'===_t.charAt(0)||_t in yt||bt.push(_t);for(;0<bt.length;)It(bt.shift());yt.$super=Ct}function At(yt){return'string'==typeof yt&&-1!==['byte','int','char','color','float','long','double'].indexOf(yt)}let Et=function(){};Et.prototype=Object.assign({},He,We,Math,ot,dt,{ArrayList:qe,Char:Qe,Character:Qe,HashMap:nt,PFont:ze});let St=new Et;return gt&&Object.keys(gt).forEach(yt=>{St[yt]=scopes[yt]}),St.$perform_initial_binding=function(yt){St.size=function(Ct,It,bt){if(!bt||bt===He.P2D)St.context=new je(St,yt);else if(bt!==He.P3D)throw new Error('Unsupported mode supplied to size(). For 2D mode use P2D or JAVA2D, for 3D mode use P3D, OPENGL, or WEBGL');St.size(Ct,It,bt)},delete St.$perform_initial_binding},St.defineProperty=function(yt,Ct,It){'defineProperty'in Object?Object.defineProperty(yt,Ct,It):(It.hasOwnProperty('get')&&yt.__defineGetter__(Ct,It.get),It.hasOwnProperty('set')&&yt.__defineSetter__(Ct,It.set))},St.extendClassChain=function(yt){var Ct=[yt];for(var It=yt.$upcast;It;It=It.$upcast)xt(It,yt),Ct.push(It),yt=It;for(;0<Ct.length;)Ct.pop().$self=yt},St.extendStaticMembers=function(yt,Ct){xt(yt,Ct)},St.extendInterfaceMembers=function(yt,Ct){xt(yt,Ct)},St.addMethod=function(yt,Ct,It,bt){var _t=yt[Ct];if(_t||bt){var Tt=It.length;if('$overloads'in _t)_t.$overloads[Tt]=It;else{var Pt=function(){var Nt=Pt.$overloads[arguments.length]||('$methodArgsIndex'in Pt&&arguments.length>Pt.$methodArgsIndex?Pt.$overloads[Pt.$methodArgsIndex]:null)||Pt.$defaultOverload;return Nt.apply(this,arguments)},Ot=[];_t&&(Ot[_t.length]=_t),Ot[Tt]=It,Pt.$overloads=Ot,Pt.$defaultOverload=_t||It,bt&&(Pt.$methodArgsIndex=Tt),Pt.name=Ct,yt[Ct]=Pt}}else yt[Ct]=It},St.createJavaArray=function(yt,Ct){var It=null,bt=null;if('string'==typeof yt&&('boolean'===yt?bt=!1:At(yt)&&(bt=0)),'number'==typeof Ct[0]){var _t=0|Ct[0];if(1>=Ct.length){It=[],It.length=_t;for(var Tt=0;Tt<_t;++Tt)It[Tt]=bt}else{It=[];var Pt=Ct.slice(1);for(var Ot=0;Ot<_t;++Ot)It.push(St.createJavaArray(yt,Pt))}}return It},St.defineProperty(St,'screenWidth',{get:function(){return window.innerWidth}}),St.defineProperty(St,'screenHeight',{get:function(){return window.innerHeight}}),St}function J(gt){return function(ft,xt,At,Et,St,yt,Ct,It){let bt;return xt||At?(bt=gt.length,gt.push(ft),'\''+bt+'\''):Et?(bt=gt.length,gt.push(yt),St+'\''+bt+'\''):''===It?'\n':' '}}function ee(gt,ft){return'__x005F_x'+ft}function te(gt){let ft=gt.replace(/\r\n?|\n\r/g,'\n'),xt=[],At=J(xt),Et=ft.replace(/("(?:[^"\\\n]|\\.)*")|('(?:[^'\\\n]|\\.)*')|(([\[\(=|&!\^:?]\s*)(\/(?![*\/])(?:[^\/\\\n]|\\.)*\/[gim]*)\b)|(\/\/[^\n]*\n)|(\/\*(?:(?!\*\/)(?:.|\n))*\*\/)/g,At);Et=Et.replace(/__x([0-9A-F]{4})/g,ee),Et=Et.replace(/\$/g,'__x0024'),Et=Et.replace(/return\s*[\n\r]+/g,'return ');let St=n(Et),yt=A(St),Ct=new ve(yt),It=Ct.extractClassesAndMethods(yt[0]);It=It.replace(/\bimport\s+[^;]+;/g,'');let bt=Ct.transformStatements(It),_t=Ct.declaredClasses,Tt=new ct(_t,xt,bt);return Tt.generateMetadata(),Tt.setWeight(),Tt}function ne(gt){return gt.replace(/^\s*["']?/,'').replace(/["']?\s*$/,'')}function re(gt,ft){let xt=new RegExp(/\/\*\s*@pjs\s+((?:[^\*]|\*+[^\*\/])*)\*\//g).exec(gt);if(!xt||2!==xt.length)return gt;let At=[],Et=xt.splice(1,2)[0].replace(/\{([\s\S]*?)\}/g,function(){return function(St,yt){return At.push(yt),'{'+(At.length-1)+'}'}}()).replace('\n','').replace('\r','').split(';');return Et.forEach(St=>{if(St=St.split('='),St&&2===St.length){let yt=ne(St[0]),Ct=ne(St[1]),It=[];if('preload'===yt){It=Ct.split(',');for(let bt=0,_t=It.length;bt<_t;bt++){let Tt=ne(It[bt]);ft.imageCache.add(Tt)}}else'font'===yt?(It=Ct.split(','),It.forEach(bt=>{let _t=ne(bt),Tt=/^\{(\d*?)\}$/.exec(_t);ze.preloading.add(Tt?JSON.parse('{'+At[Tt[1]]+'}'):_t)})):'pauseOnBlur'===yt?ft.options.pauseOnBlur='true'===Ct:'globalKeyEvents'===yt?ft.options.globalKeyEvents='true'===Ct:'param-'===yt.substring(0,6)?ft.params[yt.substring(6)]=Ct:ft.options[yt]=Ct}}),gt}function ae(gt,ft){return gt.replace(/'(\d+)'/g,function(xt,At){var Et=ft[At];return'/'===Et.charAt(0)?Et:/^'((?:[^'\\\n])|(?:\\.[0-9A-Fa-f]*))'$/.test(Et)?'(new $p.Character('+Et+'))':Et})}function se(gt){function ft(St,yt,Ct,It){let bt,_t,Tt,Pt,Ot=gt.context;if(Ot.curColorMode===He.HSB){var Nt=gt.color.toRGB(St,yt,Ct);bt=Nt[0],_t=Nt[1],Tt=Nt[2]}else bt=Math.round(255*(St/Ot.colorModeX)),_t=Math.round(255*(yt/Ot.colorModeY)),Tt=Math.round(255*(Ct/Ot.colorModeZ));return Pt=Math.round(255*(It/Ot.colorModeA)),bt=0>bt?0:bt,_t=0>_t?0:_t,Tt=0>Tt?0:Tt,Pt=0>Pt?0:Pt,bt=255<bt?255:bt,_t=255<_t?255:_t,Tt=255<Tt?255:Tt,Pt=255<Pt?255:Pt,Pt<<24&He.ALPHA_MASK|bt<<16&He.RED_MASK|_t<<8&He.GREEN_MASK|Tt&He.BLUE_MASK}function xt(St,yt){let Ct,It=gt.context;return St&He.ALPHA_MASK?(Ct=Math.round(255*(yt/It.colorModeA)),Ct=255<Ct?255:Ct,Ct=0>Ct?0:Ct,St-(St&He.ALPHA_MASK)+(Ct<<24&He.ALPHA_MASK)):It.curColorMode===He.RGB?ft(St,St,St,yt):It.curColorMode===He.HSB?ft(0,0,St/It.colorModeX*It.colorModeZ,yt):void 0}function At(St){let yt=gt.context;if(St<=yt.colorModeX&&0<=St){if(yt.curColorMode===He.RGB)return ft(St,St,St,yt.colorModeA);if(curColorMode===He.HSB)return ft(0,0,St/yt.colorModeX*yt.colorModeZ,yt.colorModeA)}return St?(2147483647<St&&(St-=4294967296),St):void 0}let Et=function(St,yt,Ct,It){let bt=gt.context;return void 0!==St&&void 0!==yt&&void 0!==Ct&&void 0!==It?ft(St,yt,Ct,It):void 0!==St&&void 0!==yt&&void 0!==Ct?ft(St,yt,Ct,bt.colorModeA):void 0!==St&&void 0!==yt?xt(St,yt):'number'==typeof St?At(St):ft(bt.colorModeX,bt.colorModeY,bt.colorModeZ,bt.colorModeA)};Et.toString=function(St){let yt=(St&He.RED_MASK)>>>16,Ct=(St&He.GREEN_MASK)>>>8,It=St&He.BLUE_MASK,bt=((St&He.ALPHA_MASK)>>>24)/255;return`rgba(${yt},${Ct},${It},${bt})`},Et.toInt=function(St,yt,Ct,It){return It=It<<24&He.ALPHA_MASK,St=St<<16&He.RED_MASK,yt=yt<<8&He.GREEN_MASK,Ct=Ct&He.BLUE_MASK,It|St|yt|Ct},Et.toArray=function(St){let yt=(St&He.RED_MASK)>>>16,Ct=(St&He.GREEN_MASK)>>>8,It=St&He.BLUE_MASK,bt=(St&He.ALPHA_MASK)>>>24;return[yt,Ct,It,bt]},Et.toGLArray=function(St){let yt=((St&He.RED_MASK)>>>16)/255,Ct=((St&He.GREEN_MASK)>>>8)/255,It=(St&He.BLUE_MASK)/255,bt=((St&He.ALPHA_MASK)>>>24)/255;return[yt,Ct,It,bt]},Et.toRGB=function(St,yt,Ct){St=St>colorModeX?colorModeX:St,yt=yt>colorModeY?colorModeY:yt,Ct=Ct>colorModeZ?colorModeZ:Ct,St=360*(St/colorModeX),yt=100*(yt/colorModeY),Ct=100*(Ct/colorModeZ);var It=Math.round(255*(Ct/100));if(0===yt)return[It,It,It];var bt=St%360,_t=bt%60,Tt=Math.round(255*(Ct*(100-yt)/1e4)),Pt=Math.round(255*(Ct*(6e3-yt*_t)/6e5)),Ot=Math.round(255*(Ct*(6e3-yt*(60-_t))/6e5));switch(Math.floor(bt/60)){case 0:return[It,Ot,Tt];case 1:return[Pt,It,Tt];case 2:return[Tt,It,Ot];case 3:return[Tt,Pt,It];case 4:return[Ot,Tt,It];case 5:return[It,Tt,Pt];}},gt.color=Et}function ie(gt,ft){let xt=0,At=0,Et=!0,St=!1,yt=!1,Ct=60,It=1e3/Ct;return gt.$redrawHelper=function(){let bt=(Date.now()-xt)/1e3;At++;let _t=At/bt;0.5<bt&&(xt=Date.now(),At=0,gt.__frameRate=_t),gt.frameCount++},gt.noLoop=function(){Et=!1,St=!1,clearInterval(yt),ft.onPause()},gt.loop=function(){St||(xt=Date.now(),At=0,yt=window.setInterval(function(){try{ft.onFrameStart(),gt.redraw(),ft.onFrameEnd()}catch(bt){throw window.clearInterval(yt),bt}},It),Et=!0,St=!0,ft.onLoop())},gt.frameRate=function(bt){Ct=bt,It=1e3/Ct,Et&&(gt.noLoop(),gt.loop())},function(){Et&&(console.log('kicking off animation'),gt.loop())}}class oe{constructor(gt,ft){this.argument=gt,this.misc=ft}toString(gt){return this.misc.prefix+this.argument.toString(gt)}}class le{constructor(gt,ft){this.name=gt,this.body=ft,ft.owner=this}toString(gt){return'var '+this.name+' = '+this.body.toString(gt)+';\n$p.'+this.name+' = '+this.name+';\n'}}class de{constructor(gt,ft,xt,At,Et,St,yt,Ct,It){var bt,_t;for(this.name=gt,this.baseClassName=ft,this.interfacesNames=xt,this.functions=At,this.methods=Et,this.fields=St,this.cstrs=yt,this.innerClasses=Ct,this.misc=It,(bt=0,_t=St.length);bt<_t;++bt)St[bt].owner=this}getMembers(gt,ft,xt){this.owner.base&&this.owner.base.body.getMembers(gt,ft,xt);var At,Et,St,yt;for(At=0,St=this.fields.length;At<St;++At){var Ct=this.fields[At].getNames();for(Et=0,yt=Ct.length;Et<yt;++Et)gt[Ct[Et]]=this.fields[At]}for(At=0,St=this.methods.length;At<St;++At){var It=this.methods[At];ft[It.name]=It}for(At=0,St=this.innerClasses.length;At<St;++At){var bt=this.innerClasses[At];xt[bt.name]=bt}}toString(gt){var ft=function(Kt){for(var jt=0;Kt;)++jt,Kt=Kt.scope;return jt}(this.owner),xt='$this_'+ft,At=this.name,Et='var '+xt+' = this;\n',St='',yt='',Ct={},It={},bt={};this.getMembers(Ct,It,bt);var _t=gt;_t||(console.error('NO CONTEXT IN AstClassBody.toString'),console.trace()),gt=function(zt){var Kt=zt.name;return'this'===Kt?zt.callSign||!zt.member?xt+'.$self':xt:Ct.hasOwnProperty(Kt)?Ct[Kt].isStatic?At+'.'+Kt:xt+'.'+Kt:bt.hasOwnProperty(Kt)?xt+'.'+Kt:It.hasOwnProperty(Kt)?It[Kt].isStatic?At+'.'+Kt:xt+'.$self.'+Kt:_t(zt)};var Tt;this.baseClassName?(Tt=_t({name:this.baseClassName}),Et+='var $super = { $upcast: '+xt+' };\n',Et+='function $superCstr(){'+Tt+'.apply($super,arguments);if(!(\'$self\' in $super)) $p.extendClassChain($super)}\n',yt+=At+'.$base = '+Tt+';\n'):Et+='function $superCstr(){$p.extendClassChain('+xt+')}\n',this.owner.base&&(St+='$p.extendStaticMembers('+At+', '+Tt+');\n');var Pt,Ot,Nt,Rt;if(this.owner.interfaces){var kt,Mt=[];for(Pt=0,Ot=this.interfacesNames.length;Pt<Ot;++Pt)this.owner.interfaces[Pt]&&(kt=_t({name:this.interfacesNames[Pt]}),Mt.push(kt),St+='$p.extendInterfaceMembers('+At+', '+kt+');\n');yt+=At+'.$interfaces = ['+P(Mt,gt,', ')+'];\n'}for(0<this.functions.length&&(Et+=P(this.functions,gt,'\n')+'\n'),T(this.innerClasses),(Pt=0,Ot=this.innerClasses.length);Pt<Ot;++Pt){var Lt=this.innerClasses[Pt];Lt.isStatic?(St+=At+'.'+Lt.name+' = '+Lt+';\n',Et+=xt+'.'+Lt.name+' = '+At+'.'+Lt.name+';\n'):Et+=xt+'.'+Lt.name+' = '+Lt+';\n'}for(Pt=0,Ot=this.fields.length;Pt<Ot;++Pt){var Dt=this.fields[Pt];if(Dt.isStatic)for(St+=At+'.'+P(Dt.definitions,gt,';\n'+At+'.')+';\n',Nt=0,Rt=Dt.definitions.length;Nt<Rt;++Nt){var vt=Dt.definitions[Nt].name,wt=At+'.'+vt;Et+='$p.defineProperty('+xt+', \''+vt+'\', {get: function(){return '+wt+'}, set: function(val){'+wt+' = val}});\n'}else Et+=xt+'.'+P(Dt.definitions,gt,';\n'+xt+'.')+';\n'}var Bt={};for(Pt=0,Ot=this.methods.length;Pt<Ot;++Pt){var Ft=this.methods[Pt],$t=Bt[Ft.name],Gt=Ft.name+'$'+Ft.params.params.length,Ht=!!Ft.params.methodArgsParam;$t?(++$t,Gt+='_'+$t):$t=1,Ft.methodId=Gt,Bt[Ft.name]=$t,Ft.isStatic?(St+=Ft.toString(gt),St+='$p.addMethod('+At+', \''+Ft.name+'\', '+Gt+', '+Ht+');\n',Et+='$p.addMethod('+xt+', \''+Ft.name+'\', '+Gt+', '+Ht+');\n'):(Et+=Ft.toString(gt),Et+='$p.addMethod('+xt+', \''+Ft.name+'\', '+Gt+', '+Ht+');\n')}Et+=S(this.misc.tail),0<this.cstrs.length&&(Et+=P(this.cstrs,gt,'\n')+'\n'),Et+='function $constr() {\n';var Xt=[];for(Pt=0,Ot=this.cstrs.length;Pt<Ot;++Pt){var Vt=this.cstrs[Pt].params.params.length,Ut=!!this.cstrs[Pt].params.methodArgsParam;Xt.push('if(arguments.length '+(Ut?'>=':'===')+' '+Vt+') { $constr_'+Vt+'.apply('+xt+', arguments); }')}return 0<Xt.length&&(Et+=P(Xt,gt,' else ')+' else '),Et+='$superCstr();\n}\n',Et+='$constr.apply(null, arguments);\n','(function() {\nfunction '+At+'() {\n'+Et+'}\n'+St+yt+'return '+At+';\n})()'}}class ce{constructor(gt,ft,xt){this.definitions=gt,this.fieldType=ft,this.isStatic=xt}getNames(){var gt=[];for(var ft=0,xt=this.definitions.length;ft<xt;++ft)gt.push(this.definitions[ft].name);return gt}toString(gt){var ft=gt({name:'[this]'});if(this.isStatic){var xt=this.owner.name,At=[];for(var Et=0,St=this.definitions.length;Et<St;++Et){var yt=this.definitions[Et],Ct=yt.name,It=xt+'.'+Ct,bt='if('+It+' === void(0)) {\n '+It+' = '+yt.value+'; }\n$p.defineProperty('+ft+', \''+Ct+'\', { get: function(){return '+It+';}, set: function(val){'+It+' = val;} });\n';At.push(bt)}return P(At,gt,'')}return ft+'.'+P(this.definitions,gt,'; '+ft+'.')}}class me{constructor(gt,ft,xt,At){this.name=gt,this.params=ft,this.body=xt,this.isStatic=At}toString(gt){var ft=O({},this.params.getNames()),xt=gt;xt||(console.error('NO CONTEXT IN AstClassMethod.toString'),console.trace()),gt=function(St){return ft.hasOwnProperty(St.name)?St.name:xt(St)};var At=this.params.prependMethodArgs(this.body.toString(gt)),Et='function '+this.methodId+this.params.toString(gt)+' '+At+'\n';return Et}}class ue{constructor(gt,ft){this.params=gt,this.body=ft}toString(gt){var ft=appendToLookupTable({},this.params.getNames()),xt=gt;xt||(console.error('NO CONTEXT IN AstConstructor.toString'),console.trace()),gt=function(St){return ft.hasOwnProperty(St.name)?St.name:xt(St)};var At='function $constr_'+this.params.params.length+this.params.toString(),Et=this.params.prependMethodArgs(this.body.toString());return /\$(superCstr|constr)\b/.test(Et)||(Et='{\n$superCstr();\n'+Et.substring(1)),At+Et+'\n'}}class he{constructor(gt,ft){this.expr=gt,this.transforms=ft}toString(gt){var ft=this.transforms,xt=N(this.expr,gt);return xt.replace(/"!(\d+)"/g,(At,Et)=>ft[Et].toString(gt))}}class pe{constructor(gt,ft){this.initStatement=gt,this.container=ft}toString(){var gt=this.initStatement.toString(),ft='$it'+pe.iteratorId++,xt=gt.replace(/^\s*var\s*/,'').split('=')[0],At='var '+ft+' = new $p.ObjectIterator('+this.container+'), '+xt+' = void(0)';return'('+At+'; '+(ft+'.hasNext() && (('+xt+' = '+ft+'.next()) || true);)')}}pe.iteratorId=0;class ge{constructor(gt,ft,xt){this.initStatement=gt,this.condition=ft,this.step=xt}toString(){return'('+this.initStatement+'; '+this.condition+'; '+this.step+')'}}class fe{constructor(gt,ft){this.initStatement=gt,this.container=ft}toString(){var gt=this.initStatement.toString();return 0<=gt.indexOf('=')&&(gt=gt.substring(0,gt.indexOf('='))),'('+gt+' in '+this.container+')'}}class xe{constructor(gt,ft){this.argument=gt,this.misc=ft}toString(){return this.misc.prefix+this.argument.toString()}}class Ae{constructor(gt,ft,xt){this.name=gt,this.params=ft,this.body=xt}toString(gt){var ft=gt;ft||(console.error('NO CONTEXT IN AstFunction.toString'),console.trace());var xt=appendToLookupTable({'this':null},this.params.getNames());gt=function(St){return xt.hasOwnProperty(St.name)?St.name:ft(St)};var At='function';this.name&&(At+=' '+this.name);var Et=this.params.prependMethodArgs(this.body.toString());return At+=this.params+' '+Et,At}}class Ee{constructor(gt,ft){this.baseInterfaceName=gt,this.body=ft,ft.owner=this}toString(){return'new ('+this.body+')'}}class Se{constructor(gt){this.members=gt}toString(gt){var ft=gt;ft||(console.error('NO CONTEXT IN AstInlineObject.toString'),console.trace()),gt=function(St){return'this'===St.name?'this':ft(St)};var xt='';for(var At=0,Et=this.members.length;At<Et;++At)this.members[At].label&&(xt+=this.members[At].label+': '),xt+=this.members[At].value.toString(gt)+', ';return xt.substring(0,xt.length-2)}}class ye{constructor(gt,ft,xt){this.name=gt,this.body=ft,this.isStatic=xt,ft.owner=this}toString(){return''+this.body}}class Ce{constructor(gt,ft,xt){this.name=gt,this.body=ft,this.isStatic=xt,ft.owner=this}toString(){return''+this.body}}class Ie{constructor(gt,ft){this.name=gt,this.body=ft,ft.owner=this}toString(){return'var '+this.name+' = '+this.body+';\n$p.'+this.name+' = '+this.name+';\n'}}class be{constructor(gt,ft,xt,At,Et,St){var yt,Ct;for(this.name=gt,this.interfacesNames=ft,this.methodsNames=xt,this.fields=At,this.innerClasses=Et,this.misc=St,(yt=0,Ct=At.length);yt<Ct;++yt)At[yt].owner=this}getMembers(gt,ft,xt){this.owner.base&&this.owner.base.body.getMembers(gt,ft,xt);var At,Et,St,yt;for(At=0,St=this.fields.length;At<St;++At){var Ct=this.fields[At].getNames();for(Et=0,yt=Ct.length;Et<yt;++Et)gt[Ct[Et]]=this.fields[At]}for(At=0,St=this.methodsNames.length;At<St;++At){var It=this.methodsNames[At];ft[It]=!0}for(At=0,St=this.innerClasses.length;At<St;++At){var bt=this.innerClasses[At];xt[bt.name]=bt}}toString(gt){(function(Tt){for(var Pt=0;Tt;)++Pt,Tt=Tt.scope;return Pt})(this.owner);var ft=this.name,xt='',At='';this.getMembers({},{},{});var Et,St;if(this.owner.interfaces){var Ct,yt=[];for(Et=0,St=this.interfacesNames.length;Et<St;++Et)this.owner.interfaces[Et]&&(Ct=gt({name:this.interfacesNames[Et]}),yt.push(Ct),xt+='$p.extendInterfaceMembers('+ft+', '+Ct+');\n');At+=ft+'.$interfaces = ['+P(yt,gt,', ')+'];\n'}for(At+=ft+'.$isInterface = true;\n',At+=ft+'.$methods = [\''+P(this.methodsNames,gt,'\', \'')+'\'];\n',sortByWeight(this.innerClasses),(Et=0,St=this.innerClasses.length);Et<St;++Et){var It=this.innerClasses[Et];It.isStatic&&(xt+=ft+'.'+It.name+' = '+It+';\n')}for(Et=0,St=this.fields.length;Et<St;++Et){var bt=this.fields[Et];bt.isStatic&&(xt+=ft+'.'+P(bt.definitions,gt,';\n'+ft+'.')+';\n')}return'(function() {\nfunction '+ft+'() { throw \'Unable to create the interface\'; }\n'+xt+At+'return '+ft+';\n})()'}}class _e{constructor(gt){this.label=gt}toString(){return this.label}}class Te{constructor(gt,ft,xt){this.name=gt,this.params=ft,this.body=xt}toString(gt){var ft=O({},this.params.getNames()),xt=gt;xt||(console.error('NO CONTEXT IN AstMethod.toString'),console.trace()),gt=function(Et){return ft.hasOwnProperty(Et.name)?Et.name:xt(Et)};var At=this.body.toString(gt);return At=this.params.prependMethodArgs(At),'function '+this.name+this.params+' '+At+'\n$p.'+this.name+' = '+this.name+';\n'+this.name+' = '+this.name+'.bind($p);'}}class Pe{constructor(gt){this.name=gt}toString(){return this.name}}class Oe{constructor(gt,ft){this.params=gt,this.methodArgsParam=ft}getNames(){var gt=[];for(var ft=0,xt=this.params.length;ft<xt;++ft)gt.push(this.params[ft].name);return gt}prependMethodArgs(gt){return this.methodArgsParam?'{\nvar '+this.methodArgsParam.name+' = Array.prototype.slice.call(arguments, '+this.params.length+');\n'+gt.substring(1):gt}toString(){if(0===this.params.length)return'()';var gt='(';for(var ft=0,xt=this.params.length;ft<xt;++ft)gt+=this.params[ft]+', ';return gt.substring(0,gt.length-2)+')'}}class Ne{constructor(gt,ft,xt){this.name=gt,this.argument=ft,this.misc=xt}toString(gt){var ft=this.misc.prefix;return void 0!==this.argument&&(ft+=this.argument.toString(gt)),ft}}class Re{constructor(gt){this.expression=gt}toString(gt){return this.expression.toString(gt)}}class Me{constructor(gt,ft){this.definitions=gt,this.varType=ft}getNames(){var gt=[];for(var ft=0,xt=this.definitions.length;ft<xt;++ft)gt.push(this.definitions[ft].name);return gt}toString(gt){return'var '+P(this.definitions,gt,',')}}class ke{constructor(gt){this.statements=gt}toString(gt){var ft=R(this.statements),xt=gt;return xt||(console.error('NO CONTEXT IN AstStatementsBlock.toString'),console.trace()),M(ft)||(gt=function(At){return ft.hasOwnProperty(At.name)?At.name:xt(At)}),'{\n'+P(this.statements,gt,'')+'\n}'}}class Le{constructor(gt){this.expr=gt}toString(gt){return'case '+this.expr.toString(gt)+':'}}class De{constructor(gt,ft,xt){this.name=gt,this.value=ft,this.isDefault=xt}toString(gt){return this.name+' = '+this.value.toString(gt)}}class ve{constructor(gt){this.atoms=gt,this.replaceContext,this.declaredClasses={},this.currentClassId,this.classIdSeed=0,this.classesRegex=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)(class|interface)\s+([A-Za-z_$][\w$]*\b)(\s+extends\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?(\s+implements\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?\s*("A\d+")/g,this.methodsRegex=/\b((?:(?:public|private|final|protected|static|abstract|synchronized)\s+)*)((?!(?:else|new|return|throw|function|public|private|protected)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+"|;)/g,this.fieldTest=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:else|new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*(?:"C\d+"\s*)*([=,]|$)/,this.cstrsRegex=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+")/g,this.attrAndTypeRegex=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*/,this.functionsRegex=/\bfunction(?:\s+([A-Za-z_$][\w$]*))?\s*("B\d+")\s*("A\d+")/g}generateClassId(){return'class'+ ++this.classIdSeed}appendClass(gt,ft,xt){gt.classId=ft,gt.scopeId=xt,this.declaredClasses[ft]=gt}getDefaultValueForType(gt){return'int'===gt||'float'===gt?'0':'boolean'===gt?'false':'color'===gt?'0x00000000':'null'}addAtom(gt,ft){let xt=this.atoms,At=xt.length;return xt.push(gt),'"'+ft+At+'"'}transformParams(gt){let ft=S(gt.substring(1,gt.length-1)),xt=[],At=null;if(''!==ft){let Et=ft.split(',');for(let St=0;St<Et.length;++St){let yt=/\b([A-Za-z_$][\w$]*\b)(\s*"[ABC][\d]*")*\s*$/.exec(Et[St]);if(St===Et.length-1&&0<=Et[St].indexOf('...')){At=new Pe(yt[1]);break}xt.push(new Pe(yt[1]))}}return new Oe(xt,At)}transformInlineClass(gt){let ft=/\bnew\s*([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)\s*"B\d+"\s*"A(\d+)"/,xt=new RegExp(ft).exec(gt),At=this.currentClassId,Et=this.generateClassId();this.currentClassId=Et;let St=xt[1]+'$'+Et,yt=new Ee(St,this.transformClassBody(atoms[xt[2]],St,'','implements '+xt[1]));return this.appendClass(yt,Et,At),this.currentClassId=At,yt}transformFunction(gt){let ft=/\b([A-Za-z_$][\w$]*)\s*"B(\d+)"\s*"A(\d+)"/,xt=new RegExp(ft).exec(gt),At=this.atoms;return new Ae('function'===xt[1]?null:xt[1],this.transformParams(At[xt[2]]),this.transformStatementsBlock(At[xt[3]]))}transformInlineObject(gt){let ft=gt.split(',');for(let xt=0;xt<ft.length;++xt){let At=ft[xt].indexOf(':');ft[xt]=0>At?{value:this.transformExpression(ft[xt])}:{label:S(ft[xt].substring(0,At)),value:this.transformExpression(S(ft[xt].substring(At+1)))}}return new Se(ft)}expandExpression(gt){if('('===gt.charAt(0)||'['===gt.charAt(0))return gt.charAt(0)+this.expandExpression(gt.substring(1,gt.length-1))+gt.charAt(gt.length-1);if('{'===gt.charAt(0))return /^\{\s*(?:[A-Za-z_$][\w$]*|'\d+')\s*:/.test(gt)?'{'+this.addAtom(gt.substring(1,gt.length-1),'I')+'}':'['+this.expandExpression(gt.substring(1,gt.length-1))+']';let ft=E(gt),xt=C(this,ft.middle),At=this.atoms;return xt=xt.replace(/"[ABC](\d+)"/g,(Et,St)=>this.expandExpression(At[St])),ft.untrim(xt)}transformExpression(gt){let ft=[],xt=this.atoms,At=this.expandExpression(gt);return At=At.replace(/"H(\d+)"/g,(Et,St)=>{return ft.push(this.transformFunction(xt[St])),'"!'+(ft.length-1)+'"'}),At=At.replace(/"F(\d+)"/g,(Et,St)=>{return ft.push(this.transformInlineClass(xt[St])),'"!'+(ft.length-1)+'"'}),At=At.replace(/"I(\d+)"/g,(Et,St)=>{return ft.push(this.transformInlineObject(xt[St])),'"!'+(ft.length-1)+'"'}),new he(At,ft)}transformVarDefinition(gt,ft){let At,Et,St,xt=gt.indexOf('=');return 0>xt?(At=gt,Et=ft,St=!0):(At=gt.substring(0,xt),Et=this.transformExpression(gt.substring(xt+1)),St=!1),new De(S(At.replace(/(\s*"C\d+")+/g,'')),Et,St)}transformStatement(gt){if(this.fieldTest.test(gt)){let ft=this.attrAndTypeRegex.exec(gt),xt=gt.substring(ft[0].length).split(','),At=this.getDefaultValueForType(ft[2]);for(let Et=0;Et<xt.length;++Et)xt[Et]=this.transformVarDefinition(xt[Et],At);return new Me(xt,ft[2])}return new Re(this.transformExpression(gt))}transformForExpression(gt){let ft;return /\bin\b/.test(gt)?(ft=gt.substring(1,gt.length-1).split(/\bin\b/g),new fe(this.transformStatement(S(ft[0])),this.transformExpression(ft[1]))):0<=gt.indexOf(':')&&0>gt.indexOf(';')?(ft=gt.substring(1,gt.length-1).split(':'),new pe(this.transformStatement(S(ft[0])),this.transformExpression(ft[1]))):(ft=gt.substring(1,gt.length-1).split(';'),new ge(this.transformStatement(S(ft[0])),this.transformExpression(ft[1]),this.transformExpression(ft[2])))}transformInnerClass(gt){let ft=this.atoms,xt=this.classesRegex.exec(gt);this.classesRegex.lastIndex=0;let St,At=0<=xt[1].indexOf('static'),Et=ft[_(xt[6])],yt=this.currentClassId,Ct=this.generateClassId();return this.currentClassId=Ct,St='interface'===xt[2]?new Ce(xt[3],this.transformInterfaceBody(Et,xt[3],xt[4]),At):new ye(xt[3],this.transformClassBody(Et,xt[3],xt[4],xt[5]),At),this.appendClass(St,Ct,yt),this.currentClassId=yt,St}transformClassMethod(gt){let ft=this.atoms,xt=this.methodsRegex.exec(gt);this.methodsRegex.lastIndex=0;let At=0<=xt[1].indexOf('static'),Et=';'===xt[6]?'{}':ft[_(xt[6])];return new me(xt[3],this.transformParams(ft[_(xt[4])]),this.transformStatementsBlock(Et),At)}transformClassField(gt){let ft=this.attrAndTypeRegex.exec(gt),xt=0<=ft[1].indexOf('static'),At=gt.substring(ft[0].length).split(/,\s*/g),Et=this.getDefaultValueForType(ft[2]);for(let St=0;St<At.length;++St)At[St]=this.transformVarDefinition(At[St],Et);return new ce(At,ft[2],xt)}extractConstructors(gt,ft){let xt=gt.replace(this.cstrsRegex,(At,Et,St)=>{return St===ft?this.addAtom(At,'G'):At});return xt}transformConstructor(gt){let ft=this.atoms,xt=new RegExp(/"B(\d+)"\s*"A(\d+)"/).exec(gt),At=this.transformParams(ft[xt[1]]);return new ue(At,this.transformStatementsBlock(ft[xt[2]]))}extractClassesAndMethods(gt){let ft=gt;return ft=ft.replace(this.classesRegex,xt=>this.addAtom(xt,'E')),ft=ft.replace(this.methodsRegex,xt=>this.addAtom(xt,'D')),ft=ft.replace(this.functionsRegex,xt=>this.addAtom(xt,'H')),ft}transformInterfaceBody(gt,ft,xt){let At=this.atoms,Et=gt.substring(1,gt.length-1);Et=this.extractClassesAndMethods(Et),Et=this.extractConstructors(Et,ft);let St=[],yt=[];Et=Et.replace(/"([DE])(\d+)"/g,(Pt,Ot,Nt)=>{return'D'===Ot?St.push(Nt):'E'==Ot&&yt.push(Nt),''});let Ct=Et.split(/;(?:\s*;)*/g),It,bt,_t;if(xt!==void 0){let Pt=/^\s*extends\s+(.+?)\s*$/g;It=xt.replace(Pt,'$1').split(/\s*,\s*/g)}for(bt=0,_t=St.length;bt<_t;++bt){let Pt=this.transformClassMethod(At[St[bt]]);St[bt]=Pt.name}for(bt=0,_t=Ct.length-1;bt<_t;++bt){let Pt=E(Ct[bt]);Ct[bt]=this.transformClassField(Pt.middle)}let Tt=Ct.pop();for(bt=0,_t=yt.length;bt<_t;++bt)yt[bt]=this.transformInnerClass(At[yt[bt]]);return new be(ft,It,St,Ct,yt,{tail:Tt})}transformClassBody(gt,ft,xt,At){let Et=this.atoms,St=gt.substring(1,gt.length-1);St=this.extractClassesAndMethods(St),St=this.extractConstructors(St,ft);let yt=[],Ct=[],It=[],bt=[],_t=/"([DEGH])(\d+)"/g;St=St.replace(_t,(Mt,kt,Lt)=>{return'D'===kt?yt.push(Lt):'E'===kt?Ct.push(Lt):'H'===kt?bt.push(Lt):It.push(Lt),''});let Tt=St.replace(/^(?:\s*;)+/,'').split(/;(?:\s*;)*/g),Pt,Ot,Nt;for(void 0!==xt&&(Pt=xt.replace(/^\s*extends\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*$/g,'$1')),void 0!==At&&(Ot=At.replace(/^\s*implements\s+(.+?)\s*$/g,'$1').split(/\s*,\s*/g)),Nt=0;Nt<bt.length;++Nt)bt[Nt]=this.transformFunction(Et[bt[Nt]]);for(Nt=0;Nt<yt.length;++Nt)yt[Nt]=this.transformClassMethod(Et[yt[Nt]]);for(Nt=0;Nt<Tt.length-1;++Nt){let Mt=E(Tt[Nt]);Tt[Nt]=this.transformClassField(Mt.middle)}let Rt=Tt.pop();for(Nt=0;Nt<It.length;++Nt)It[Nt]=this.transformConstructor(Et[It[Nt]]);for(Nt=0;Nt<Ct.length;++Nt)Ct[Nt]=this.transformInnerClass(Et[Ct[Nt]]);return new de(ft,Pt,Ot,bt,yt,Tt,It,Ct,{tail:Rt})}transformGlobalClass(gt){let ft=this.classesRegex.exec(gt);this.classesRegex.lastIndex=0,this.atoms;let xt=this.atoms[_(ft[6])],At=this.currentClassId,Et=this.generateClassId();this.currentClassId=Et;let St;return St='interface'===ft[2]?new Ie(ft[3],this.transformInterfaceBody(xt,ft[3],ft[4])):new le(ft[3],this.transformClassBody(xt,ft[3],ft[4],ft[5])),this.appendClass(St,Et,At),this.currentClassId=At,St}transformGlobalMethod(gt){let ft=this.atoms,xt=this.methodsRegex.exec(gt);return this.methodsRegex.lastIndex=0,new Te(xt[3],this.transformParams(ft[_(xt[4])]),this.transformStatementsBlock(ft[_(xt[6])]))}transformStatements(gt){let ft=new RegExp(/\b(catch|for|if|switch|while|with)\s*"B(\d+)"|\b(do|else|finally|return|throw|try|break|continue)\b|("[ADEH](\d+)")|\b(case)\s+([^:]+):|\b([A-Za-z_$][\w$]*\s*:)|(;)/g),xt=this.atoms,At=[];gt=I(gt);let St,yt,Et=0;for(;null!==(St=ft.exec(gt));){if(void 0!==St[1]){let It=gt.lastIndexOf('"B',ft.lastIndex),bt=gt.substring(Et,It);'for'===St[1]?At.push(new xe(this.transformForExpression(xt[St[2]]),{prefix:bt})):'catch'===St[1]?At.push(new oe(this.transformParams(xt[St[2]]),{prefix:bt})):At.push(new Ne(St[1],this.transformExpression(xt[St[2]]),{prefix:bt}))}else if(void 0!==St[3])At.push(new Ne(St[3],void 0,{prefix:gt.substring(Et,ft.lastIndex)}));else if(void 0!==St[4]){if(yt=gt.substring(Et,ft.lastIndex-St[4].length),0!==S(yt).length)continue;At.push(yt);let It=St[4].charAt(1),bt=St[5];'D'===It?At.push(this.transformGlobalMethod(xt[bt])):'E'===It?At.push(this.transformGlobalClass(xt[bt])):'H'===It?At.push(this.transformFunction(xt[bt])):At.push(this.transformStatementsBlock(xt[bt]))}else if(void 0!==St[6])At.push(new Le(this.transformExpression(S(St[7]))));else if(void 0!==St[8]){if(yt=gt.substring(Et,ft.lastIndex-St[8].length),0!==S(yt).length)continue;At.push(new _e(gt.substring(Et,ft.lastIndex)))}else{let It=E(gt.substring(Et,ft.lastIndex-1));At.push(It.left),At.push(this.transformStatement(It.middle)),At.push(It.right+';')}Et=ft.lastIndex}let Ct=E(gt.substring(Et));return At.push(Ct.left),''!==Ct.middle&&(At.push(this.transformStatement(Ct.middle)),At.push(';'+Ct.right)),At}transformStatementsBlock(gt){let ft=E(gt.substring(1,gt.length-1));return new ke(this.transformStatements(ft.middle))}}const we=['size','redraw','background','alpha','fill','stroke','line','textFont','rotate','translate'];var Be=we.concat(['abs','acos','ambient','ambientLight','append','applyMatrix','arc','arrayCopy','asin','atan','atan2','beginCamera','beginDraw','beginShape','bezier','bezierDetail','bezierPoint','bezierTangent','bezierVertex','binary','blend','blendColor','blit_resize','blue','box','breakShape','brightness','camera','ceil','Character','color','colorMode','concat','constrain','copy','cos','createFont','createGraphics','createImage','cursor','curve','curveDetail','curvePoint','curveTangent','curveTightness','curveVertex','day','degrees','directionalLight','disableContextMenu','dist','draw','ellipse','ellipseMode','emissive','enableContextMenu','endCamera','endDraw','endShape','exit','exp','expand','externals','filter','floor','focused','frameCount','frameRate','frustum','get','glyphLook','glyphTable','green','height','hex','hint','hour','hue','image','imageMode','intersect','join','key','keyCode','keyPressed','keyReleased','keyTyped','lerp','lerpColor','lightFalloff','lights','lightSpecular','link','loadBytes','loadFont','loadGlyphs','loadImage','loadPixels','loadShape','loadXML','loadStrings','log','loop','mag','map','match','matchAll','max','millis','min','minute','mix','modelX','modelY','modelZ','modes','month','mouseButton','mouseClicked','mouseDragged','mouseMoved','mouseOut','mouseOver','mousePressed','mouseReleased','mouseScroll','mouseScrolled','mouseX','mouseY','name','nf','nfc','nfp','nfs','noCursor','noFill','noise','noiseDetail','noiseSeed','noLights','noLoop','norm','normal','noSmooth','noStroke','noTint','ortho','param','parseBoolean','parseByte','parseChar','parseFloat','parseInt','parseXML','peg','perspective','PImage','pixels','PMatrix2D','PMatrix3D','PMatrixStack','pmouseX','pmouseY','point','pointLight','popMatrix','popStyle','pow','print','printCamera','println','printMatrix','printProjection','PShape','PShapeSVG','pushMatrix','pushStyle','quad','radians','random','randomGaussian','randomSeed','rect','rectMode','red','redraw','requestImage','resetMatrix','reverse','rotateX','rotateY','rotateZ','round','saturation','save','saveFrame','saveStrings','scale','screenX','screenY','screenZ','second','set','setup','shape','shapeMode','shared','shearX','shearY','shininess','shorten','sin','smooth','sort','specular','sphere','sphereDetail','splice','split','splitTokens','spotLight','sq','sqrt','status','str','strokeCap','strokeJoin','strokeWeight','subset','tan','text','textAlign','textAscent','textDescent','textLeading','textMode','textSize','texture','textureMode','textWidth','tint','toImageData','touchCancel','touchEnd','touchMove','touchStart','translate','transform','triangle','trim','unbinary','unhex','updatePixels','use3DContext','vertex','width','XMLElement','XML','year','__contains','__equals','__equalsIgnoreCase','__frameRate','__hashCode','__int_cast','__instanceof','__keyPressed','__mousePressed','__printStackTrace','__replace','__replaceAll','__replaceFirst','__toCharArray','__split','__codePointAt','__startsWith','__endsWith','__matches']),Fe={},$e,Ge;for($e=0,Ge=Be.length;$e<Ge;++$e)Fe[Be[$e]]=null;const He={X:0,Y:1,Z:2,R:3,G:4,B:5,A:6,U:7,V:8,NX:9,NY:10,NZ:11,EDGE:12,SR:13,SG:14,SB:15,SA:16,SW:17,TX:18,TY:19,TZ:20,VX:21,VY:22,VZ:23,VW:24,AR:25,AG:26,AB:27,DR:3,DG:4,DB:5,DA:6,SPR:28,SPG:29,SPB:30,SHINE:31,ER:32,EG:33,EB:34,BEEN_LIT:35,VERTEX_FIELD_COUNT:36,P2D:1,JAVA2D:1,WEBGL:2,P3D:2,OPENGL:2,PDF:0,DXF:0,OTHER:0,WINDOWS:1,MAXOSX:2,LINUX:3,EPSILON:1e-4,MAX_FLOAT:3.4028235e38,MIN_FLOAT:-3.4028235e38,MAX_INT:2147483647,MIN_INT:-2147483648,PI:Math.PI,TWO_PI:2*Math.PI,TAU:2*Math.PI,HALF_PI:Math.PI/2,THIRD_PI:Math.PI/3,QUARTER_PI:Math.PI/4,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,WHITESPACE:' \t\n\r\f\xA0',RGB:1,ARGB:2,HSB:3,ALPHA:4,CMYK:5,TIFF:0,TARGA:1,JPEG:2,GIF:3,BLUR:11,GRAY:12,INVERT:13,OPAQUE:14,POSTERIZE:15,THRESHOLD:16,ERODE:17,DILATE:18,REPLACE:0,BLEND:1,ADD:2,SUBTRACT:4,LIGHTEST:8,DARKEST:16,DIFFERENCE:32,EXCLUSION:64,MULTIPLY:128,SCREEN:256,OVERLAY:512,HARD_LIGHT:1024,SOFT_LIGHT:2048,DODGE:4096,BURN:8192,ALPHA_MASK:4278190080,RED_MASK:16711680,GREEN_MASK:65280,BLUE_MASK:255,CUSTOM:0,ORTHOGRAPHIC:2,PERSPECTIVE:3,POINT:2,POINTS:2,LINE:4,LINES:4,TRIANGLE:8,TRIANGLES:9,TRIANGLE_STRIP:10,TRIANGLE_FAN:11,QUAD:16,QUADS:16,QUAD_STRIP:17,POLYGON:20,PATH:21,RECT:30,ELLIPSE:31,ARC:32,SPHERE:40,BOX:41,CHORD:2,PIE:3,GROUP:0,PRIMITIVE:1,GEOMETRY:3,VERTEX:0,BEZIER_VERTEX:1,CURVE_VERTEX:2,BREAK:3,CLOSESHAPE:4,OPEN:1,CLOSE:2,CORNER:0,CORNERS:1,RADIUS:2,CENTER_RADIUS:2,CENTER:3,DIAMETER:3,CENTER_DIAMETER:3,BASELINE:0,TOP:101,BOTTOM:102,NORMAL:1,NORMALIZED:1,IMAGE:2,MODEL:4,SHAPE:5,SQUARE:'butt',ROUND:'round',PROJECT:'square',MITER:'miter',BEVEL:'bevel',AMBIENT:0,DIRECTIONAL:1,SPOT:3,BACKSPACE:8,TAB:9,ENTER:10,RETURN:13,ESC:27,DELETE:127,CODED:65535,SHIFT:16,CONTROL:17,ALT:18,CAPSLK:20,PGUP:33,PGDN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLK:144,META:157,INSERT:155,ARROW:'default',CROSS:'crosshair',HAND:'pointer',MOVE:'move',TEXT:'text',WAIT:'wait',NOCURSOR:'url(\'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\'), auto',DISABLE_OPENGL_2X_SMOOTH:1,ENABLE_OPENGL_2X_SMOOTH:-1,ENABLE_OPENGL_4X_SMOOTH:2,ENABLE_NATIVE_FONTS:3,DISABLE_DEPTH_TEST:4,ENABLE_DEPTH_TEST:-4,ENABLE_DEPTH_SORT:5,DISABLE_DEPTH_SORT:-5,DISABLE_OPENGL_ERROR_REPORT:6,ENABLE_OPENGL_ERROR_REPORT:-6,ENABLE_ACCURATE_TEXTURES:7,DISABLE_ACCURATE_TEXTURES:-7,HINT_COUNT:10,SINCOS_LENGTH:720,PRECISIONB:15,PRECISIONF:32768,PREC_MAXVAL:32767,PREC_ALPHA_SHIFT:9,PREC_RED_SHIFT:1,NORMAL_MODE_AUTO:0,NORMAL_MODE_SHAPE:1,NORMAL_MODE_VERTEX:2,MAX_LIGHTS:8};class Xe{constructor(){0===arguments.length?this.reset():1===arguments.length&&arguments[0]instanceof Xe?this.set(arguments[0].array()):6===arguments.length&&this.set(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])}reset(){this.set([1,0,0,0,1,0])}set(){if(6===arguments.length){var gt=arguments;this.set([gt[0],gt[1],gt[2],gt[3],gt[4],gt[5]])}else 1===arguments.length&&arguments[0]instanceof Xe?this.elements=arguments[0].array():1===arguments.length&&arguments[0]instanceof Array&&(this.elements=arguments[0].slice())}get(){var gt=new Xe;return gt.set(this.elements),gt}array(){return this.elements.slice()}translate(gt,ft){this.elements[2]=gt*this.elements[0]+ft*this.elements[1]+this.elements[2],this.elements[5]=gt*this.elements[3]+ft*this.elements[4]+this.elements[5]}invTranslate(gt,ft){this.translate(-gt,-ft)}transpose(){}mult(gt,ft){var xt,At;return gt instanceof PVector?(xt=gt.x,At=gt.y,!ft&&(ft=new PVector)):gt instanceof Array&&(xt=gt[0],At=gt[1],!ft&&(ft=[])),ft instanceof Array?(ft[0]=this.elements[0]*xt+this.elements[1]*At+this.elements[2],ft[1]=this.elements[3]*xt+this.elements[4]*At+this.elements[5]):ft instanceof PVector&&(ft.x=this.elements[0]*xt+this.elements[1]*At+this.elements[2],ft.y=this.elements[3]*xt+this.elements[4]*At+this.elements[5],ft.z=0),ft}multX(gt,ft){return gt*this.elements[0]+ft*this.elements[1]+this.elements[2]}multY(gt,ft){return gt*this.elements[3]+ft*this.elements[4]+this.elements[5]}skewX(gt){this.apply(1,0,1,gt,0,0)}skewY(gt){this.apply(1,0,1,0,gt,0)}shearX(gt){this.apply(1,0,1,Math.tan(gt),0,0)}shearY(gt){this.apply(1,0,1,0,Math.tan(gt),0)}determinant(){return this.elements[0]*this.elements[4]-this.elements[1]*this.elements[3]}invert(){var gt=this.determinant();if(Math.abs(gt)>PConstants.MIN_INT){var ft=this.elements[0],xt=this.elements[1],At=this.elements[2],Et=this.elements[3],St=this.elements[4],yt=this.elements[5];return this.elements[0]=St/gt,this.elements[3]=-Et/gt,this.elements[1]=-xt/gt,this.elements[4]=ft/gt,this.elements[2]=(xt*yt-St*At)/gt,this.elements[5]=(Et*At-ft*yt)/gt,!0}return!1}scale(gt,ft){gt&&!ft&&(ft=gt),gt&&ft&&(this.elements[0]*=gt,this.elements[1]*=ft,this.elements[3]*=gt,this.elements[4]*=ft)}invScale(gt,ft){gt&&!ft&&(ft=gt),this.scale(1/gt,1/ft)}apply(){var gt;1===arguments.length&&arguments[0]instanceof Xe?gt=arguments[0].array():6===arguments.length?gt=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(gt=arguments[0]);var ft=[0,0,this.elements[2],0,0,this.elements[5]],xt=0;for(var At=0;2>At;At++)for(var Et=0;3>Et;Et++,xt++)ft[xt]+=this.elements[3*At+0]*gt[Et+0]+this.elements[3*At+1]*gt[Et+3];this.elements=ft.slice()}preApply(){var gt;1===arguments.length&&arguments[0]instanceof Xe?gt=arguments[0].array():6===arguments.length?gt=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(gt=arguments[0]);var ft=[0,0,gt[2],0,0,gt[5]];ft[2]=gt[2]+this.elements[2]*gt[0]+this.elements[5]*gt[1],ft[5]=gt[5]+this.elements[2]*gt[3]+this.elements[5]*gt[4],ft[0]=this.elements[0]*gt[0]+this.elements[3]*gt[1],ft[3]=this.elements[0]*gt[3]+this.elements[3]*gt[4],ft[1]=this.elements[1]*gt[0]+this.elements[4]*gt[1],ft[4]=this.elements[1]*gt[3]+this.elements[4]*gt[4],this.elements=ft.slice()}rotate(gt){var ft=Math.cos(gt),xt=Math.sin(gt),At=this.elements[0],Et=this.elements[1];this.elements[0]=ft*At+xt*Et,this.elements[1]=-xt*At+ft*Et,At=this.elements[3],Et=this.elements[4],this.elements[3]=ft*At+xt*Et,this.elements[4]=-xt*At+ft*Et}rotateZ(gt){this.rotate(gt)}invRotateZ(gt){this.rotateZ(gt-Math.PI)}print(){var gt=printMatrixHelper(this.elements),ft=''+p.nfs(this.elements[0],gt,4)+' '+p.nfs(this.elements[1],gt,4)+' '+p.nfs(this.elements[2],gt,4)+'\n'+p.nfs(this.elements[3],gt,4)+' '+p.nfs(this.elements[4],gt,4)+' '+p.nfs(this.elements[5],gt,4)+'\n\n';p.println(ft)}}class Ve{constructor(gt){this.stackType=gt,this.matrixStack=[]}load(){let gt=this.stackType.$newPMatrix();1===arguments.length?gt.set(arguments[0]):gt.set(arguments),this.matrixStack.push(gt)}}class Ue{constructor(gt,ft,xt,At){if(this.p=gt,this.__isDirty=!1,ft instanceof HTMLImageElement)this.fromHTMLImageData(ft);else if(xt||At){this.width=ft||1,this.height=xt||1;var Et=this.sourceImg=document.createElement('canvas');if(Et.width=this.width,Et.height=this.height,this.imageData=Et.getContext('2d').createImageData(this.width,this.height),this.format=At===PConstants.ARGB||At===PConstants.ALPHA?At:PConstants.RGB,this.format===PConstants.RGB)for(var St=3,yt=this.imageData.data,Ct=yt.length;St<Ct;St+=4)yt[St]=255;this.__isDirty=!0,this.updatePixels()}else this.width=0,this.height=0,this.imageData=utilityContext2d.createImageData(1,1),this.format=PConstants.ARGB;this.pixels=buildPixelsObject(this),this.__isPImage=!0}updatePixels(){var gt=this.sourceImg;gt&&gt instanceof HTMLCanvasElement&&this.__isDirty&&gt.getContext('2d').putImageData(this.imageData,0,0),this.__isDirty=!1}fromHTMLImageData(gt){var ft=getCanvasData(gt);try{var xt=ft.context.getImageData(0,0,gt.width,gt.height);this.fromImageData(xt)}catch(At){gt.width&&gt.height&&(this.isRemote=!0,this.width=gt.width,this.height=gt.height)}this.sourceImg=gt}get(gt,ft,xt,At){return arguments.length?2===arguments.length?this.p.get(gt,ft,this):4===arguments.length?this.p.get(gt,ft,xt,At,this):void 0:this.p.get(this)}set(gt,ft,xt){this.p.set(gt,ft,xt,this),this.__isDirty=!0}blend(gt,ft,xt,At,Et,St,yt,Ct,It,bt){9===arguments.length?this.p.blend(this,gt,ft,xt,At,Et,St,yt,Ct,It,this):10===arguments.length&&this.p.blend(gt,ft,xt,At,Et,St,yt,Ct,It,bt,this),delete this.sourceImg}copy(gt,ft,xt,At,Et,St,yt,Ct,It){8===arguments.length?this.p.blend(this,gt,ft,xt,At,Et,St,yt,Ct,PConstants.REPLACE,this):9===arguments.length&&this.p.blend(gt,ft,xt,At,Et,St,yt,Ct,It,PConstants.REPLACE,this),delete this.sourceImg}filter(gt,ft){2===arguments.length?this.p.filter(gt,ft,this):1===arguments.length&&this.p.filter(gt,null,this),delete this.sourceImg}save(gt){this.p.save(gt,this)}resize(gt,ft){if(this.isRemote)throw'Image is loaded remotely. Cannot resize.';if(0!==this.width||0!==this.height){0===gt&&0!==ft?gt=Math.floor(this.width/this.height*ft):0===ft&&0!=gt&&(ft=Math.floor(this.height/this.width*gt));var xt=getCanvasData(this.imageData).canvas,At=getCanvasData(xt,gt,ft).context.getImageData(0,0,gt,ft);this.fromImageData(At)}}mask(gt){var xt,At,ft=this.toImageData();if(gt instanceof Ue||gt.__isPImage){if(gt.width===this.width&&gt.height===this.height)for(gt=gt.toImageData(),xt=2,At=4*(this.width*this.height);xt<At;xt+=4)ft.data[xt+1]=gt.data[xt];else throw'mask must have the same dimensions as PImage.';}else if(gt instanceof Array)if(this.width*this.height===gt.length)for(xt=0,At=gt.length;xt<At;++xt)ft.data[4*xt+3]=gt[xt];else throw'mask array must be the same length as PImage pixels array.';this.fromImageData(ft)}loadPixels(){}toImageData(){if(this.isRemote)return this.sourceImg;if(!this.__isDirty)return this.imageData;var gt=getCanvasData(this.sourceImg);return gt.context.getImageData(0,0,this.width,this.height)}toDataURL(){if(this.isRemote)throw'Image is loaded remotely. Cannot create dataURI.';var gt=getCanvasData(this.imageData);return gt.canvas.toDataURL()}fromImageData(gt){var ft=gt.width,xt=gt.height,At=document.createElement('canvas'),Et=At.getContext('2d');this.width=At.width=ft,this.height=At.height=xt,Et.putImageData(gt,0,0),this.format=PConstants.ARGB,this.imageData=gt,this.sourceImg=At}}class ze{constructor(gt,ft){gt===void 0&&(gt=''),this.name=gt,ft===void 0&&(ft=0),this.size=ft,this.glyph=!1,this.ascent=0,this.descent=0,this.leading=1.2*ft;let xt=gt.indexOf(' Italic Bold');-1!==xt&&(gt=gt.substring(0,xt)),this.style='normal';let At=gt.indexOf(' Italic');-1!==At&&(gt=gt.substring(0,At),this.style='italic'),this.weight='normal';let Et=gt.indexOf(' Bold');-1!==Et&&(gt=gt.substring(0,Et),this.weight='bold'),this.family='sans-serif';void 0!==gt&&(this.family='sans-serif'===gt||'serif'===gt||'monospace'===gt||'fantasy'===gt||'cursive'===gt?gt:'"'+gt+'", sans-serif');this.context2d=$(this),this.css=this.getCSSDefinition(),this.context2d&&(this.context2d.font=this.css)}getCSSDefinition(gt,ft){gt===void 0&&(gt=this.size+'px'),ft===void 0&&(ft=this.leading+'px');let xt=[this.style,'normal',this.weight,gt+'/'+ft,this.family];return xt.join(' ')}measureTextWidth(gt){return this.context2d.measureText(gt).width}measureTextWidthFallback(gt){let ft=document.createElement('canvas'),xt=ft.getContext('2d');return xt.font=this.css,xt.measureText(gt).width}}ze.PFontCache={length:0},ze.get=function(gt,ft){ft=(0|10*ft+0.5)/10;let xt=ze.PFontCache,At=gt+'/'+ft;if(!xt[At]){if(xt[At]=new ze(gt,ft),xt.length++,50===xt.length){for(var Et in ze.prototype.measureTextWidth=ze.prototype.measureTextWidthFallback,ze.prototype.caching=!1,xt)'length'!==Et&&(xt[Et].context2d=null);return new ze(gt,ft)}if(400===xt.length)return ze.PFontCache={},ze.get=ze.getFallback,new ze(gt,ft)}return xt[At]},ze.caching=!0,ze.getFallback=function(gt,ft){return new ze(gt,ft)},ze.list=function(){return['sans-serif','serif','monospace','fantasy','cursive']},ze.preloading={template:{},initialized:!1,initialize:function(){let gt=document.createElement('style');gt.setAttribute('type','text/css'),gt.innerHTML='@font-face {\n  font-family: "PjsEmptyFont";\n  src: url(\'data:application/x-font-ttf;base64,'+function(){return'#E3KAI2wAgT1MvMg7Eo3VmNtYX7ABi3CxnbHlm7Abw3kaGVhZ7ACs3OGhoZWE7A53CRobXR47AY3AGbG9jYQ7G03Bm1heH7ABC3CBuYW1l7Ae3AgcG9zd7AI3AE#B3AQ2kgTY18PPPUACwAg3ALSRoo3#yld0xg32QAB77#E777773B#E3C#I#Q77773E#Q7777777772CMAIw7AB77732B#M#Q3wAB#g3B#E#E2BB//82BB////w#B7#gAEg3E77x2B32B#E#Q#MTcBAQ32gAe#M#QQJ#E32M#QQJ#I#g32Q77#'.replace(/[#237]/g,function(xt){return'AAAAAAAA'.substr(~~xt?7-xt:6)})}()+'\')\n       format(\'truetype\');\n}',document.head.appendChild(gt);let ft=document.createElement('span');ft.style.cssText='position: absolute; top: -1000; left: 0; opacity: 0; font-family: "PjsEmptyFont", fantasy;',ft.innerHTML='AAAAAAAA',document.body.appendChild(ft),this.template=ft,this.initialized=!0},getElementWidth:function(gt){return document.defaultView.getComputedStyle(gt,'').getPropertyValue('width')},timeAttempted:0,pending:function(gt){this.initialized||this.initialize();let ft,xt,At=this.getElementWidth(this.template);for(let Et=0;Et<this.fontList.length;Et++){if(ft=this.fontList[Et],xt=this.getElementWidth(ft),4e3>this.timeAttempted&&xt===At)return this.timeAttempted+=gt,!0;document.body.removeChild(ft),this.fontList.splice(Et--,1),this.timeAttempted=0}return 0!==this.fontList.length},fontList:[],addedList:{},add:function(gt){this.initialized||this.initialize();let ft='object'==typeof gt?gt.fontFace:gt,xt='object'==typeof gt?gt.url:gt;if(!this.addedList[ft]){let At=document.createElement('style');At.setAttribute('type','text/css'),At.innerHTML='@font-face{\n  font-family: \''+ft+'\';\n  src:  url(\''+xt+'\');\n}\n',document.head.appendChild(At),this.addedList[ft]=!0;let Et=document.createElement('span');Et.style.cssText='position: absolute; top: 0; left: 0; opacity: 0;',Et.style.fontFamily='"'+ft+'", "PjsEmptyFont", fantasy',Et.innerHTML='AAAAAAAA',document.body.appendChild(Et),this.fontList.push(Et)}}};class Ke{constructor(gt,ft,xt){this.curSketch=gt,this.curElement=ft,this.curContext=xt,this.drawing,this.doFill=!0,this.fillStyle=[1,1,1,1],this.currentFillColor=4294967295,this.isFillDirty=!0,this.doStroke=!0,this.strokeStyle=[0,0,0,1],this.currentStrokeColor=4278190080,this.isStrokeDirty=!0,this.lineWidth=1,this.loopStarted=!1,this.renderSmooth=!1,this.doLoop=!0,this.looping=0,this.curRectMode=He.CORNER,this.curEllipseMode=He.CENTER,this.normalX=0,this.normalY=0,this.normalZ=0,this.normalMode=He.NORMAL_MODE_AUTO,this.curFrameRate=60,this.curMsPerFrame=1e3/this.curFrameRate,this.curCursor=He.ARROW,this.oldCursor=this.curElement.style.cursor,this.curShape=He.POLYGON,this.curShapeCount=0,this.curvePoints=[],this.curTightness=0,this.curveDet=20,this.curveInited=!1,this.backgroundObj=-3355444,this.bezDetail=20,this.colorModeA=255,this.colorModeX=255,this.colorModeY=255,this.colorModeZ=255,this.pathOpen=!1,this.mouseDragging=!1,this.pmouseXLastFrame=0,this.pmouseYLastFrame=0,this.curColorMode=He.RGB,this.curTint=null,this.curTint3d=null,this.getLoaded=!1,this.start=Date.now(),this.timeSinceLastFPS=this.start,this.framesSinceLastFPS=0,this.textcanvas=void 0,this.curveBasisMatrix=void 0,this.curveToBezierMatrix=void 0,this.curveDrawMatrix=void 0,this.bezierDrawMatrix=void 0,this.bezierBasisInverse=void 0,this.bezierBasisMatrix=void 0,this.curContextCache={attributes:{},locations:{}},this.programObject3D=void 0,this.programObject2D=void 0,this.programObjectUnlitShape=void 0,this.boxBuffer=void 0,this.boxNormBuffer=void 0,this.boxOutlineBuffer=void 0,this.rectBuffer=void 0,this.rectNormBuffer=void 0,this.sphereBuffer=void 0,this.lineBuffer=void 0,this.fillBuffer=void 0,this.fillColorBuffer=void 0,this.strokeColorBuffer=void 0,this.pointBuffer=void 0,this.shapeTexVBO=void 0,this.canTex,this.textTex,this.curTexture={width:0,height:0},this.curTextureMode=He.IMAGE,this.usingTexture=!1,this.textBuffer=void 0,this.textureBuffer=void 0,this.indexBuffer=void 0,this.horizontalTextAlignment=He.LEFT,this.verticalTextAlignment=He.BASELINE,this.textMode=He.MODEL,this.curFontName='Arial',this.curTextSize=12,this.curTextAscent=9,this.curTextDescent=2,this.curTextLeading=14,this.curTextFont=ze.get(this.curFontName,this.curTextSize),this.originalContext=void 0,this.proxyContext=null,this.isContextReplaced=!1,this.setPixelsCached=void 0,this.maxPixelsCached=1e3,this.pressedKeysMap=[],this.lastPressedKeyCode=null,this.codedKeys=[He.SHIFT,He.CONTROL,He.ALT,He.CAPSLK,He.PGUP,He.PGDN,He.END,He.HOME,He.LEFT,He.UP,He.RIGHT,He.DOWN,He.NUMLK,He.INSERT,He.F1,He.F2,He.F3,He.F4,He.F5,He.F6,He.F7,He.F8,He.F9,He.F10,He.F11,He.F12,He.META],this.lightCount=0,this.sphereDetailV=0,this.sphereDetailU=0,this.sphereX=[],this.sphereY=[],this.sphereZ=[],this.sinLUT=new Float32Array(He.SINCOS_LENGTH),this.cosLUT=new Float32Array(He.SINCOS_LENGTH),this.sphereVerts=void 0,this.sphereNorms,this.cam=void 0,this.cameraInv=void 0,this.modelView=void 0,this.modelViewInv=void 0,this.userMatrixStack=void 0,this.userReverseMatrixStack=void 0,this.inverseCopy=void 0,this.projection=void 0,this.manipulatingCamera=!1,this.frustumMode=!1,this.cameraFOV=60*(Math.PI/180),this.cameraX=gt.width/2,this.cameraY=gt.height/2,this.cameraZ=this.cameraY/Math.tan(this.cameraFOV/2),this.cameraNear=this.cameraZ/10,this.cameraFar=10*this.cameraZ,this.cameraAspect=gt.width/gt.height,this.vertArray=[],this.curveVertArray=[],this.curveVertCount=0,this.isCurve=!1,this.isBezier=!1,this.firstVert=!0,this.curShapeMode=He.CORNER,this.styleArray=[],this.boxVerts=new Float32Array([0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5]),this.boxOutlineVerts=new Float32Array([0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5]),this.boxNorms=new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]),this.rectVerts=new Float32Array([0,0,0,0,1,0,1,1,0,1,0,0]),this.rectNorms=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1]),this.bindSketchFNames(gt)}bindSketchFNames(gt){we.forEach(ft=>{gt[ft]=this[ft].bind(this)})}a3DOnlyFunction(){}$ensureContext(){return this.curContext}saveContext(){this.curContext.save()}restoreContext(){this.curContext.restore(),this.isStrokeDirty=!0,this.isFillDirty=!0}applyMatrix(){var gt=arguments;this.modelView.apply(gt[0],gt[1],gt[2],gt[3],gt[4],gt[5],gt[6],gt[7],gt[8],gt[9],gt[10],gt[11],gt[12],gt[13],gt[14],gt[15]),this.modelViewInv.invApply(gt[0],gt[1],gt[2],gt[3],gt[4],gt[5],gt[6],gt[7],gt[8],gt[9],gt[10],gt[11],gt[12],gt[13],gt[14],gt[15])}size(gt,ft){this.doStroke&&this.curSketch.stroke(0),this.doFill&&this.curSketch.fill(255);let xt=this.curContext,At=this.curElement,Et=this.curTextFont,St={fillStyle:xt.fillStyle,strokeStyle:xt.strokeStyle,lineCap:xt.lineCap,lineJoin:xt.lineJoin};for(var yt in 0<At.style.length&&(At.style.removeProperty('width'),At.style.removeProperty('height')),this.curElement.width=this.curSketch.width=gt||100,this.curElement.height=this.curSketch.height=ft||100,St)St.hasOwnProperty(yt)&&(this.curContext[yt]=St[yt]);this.curSketch.textFont(Et),this.curSketch.background(),this.maxPixelsCached=Math.max(1e3,0.05*(gt*ft));for(let Ct=0;Ct<He.SINCOS_LENGTH;Ct++)this.sinLUT[Ct]=Math.sin(0.5*(Ct*(Math.PI/180))),this.cosLUT[Ct]=Math.cos(0.5*(Ct*(Math.PI/180)))}redraw(){let gt=this.curSketch;gt.$redrawHelper(),this.curContext.lineWidth=this.lineWidth,this.saveContext(),gt.draw(),this.restoreContext()}fill(...gt){let ft=this.curSketch.color(...gt);ft===this.currentFillColor&&this.doFill||(this.doFill=!0,this.currentFillColor=ft)}stroke(...gt){let ft=this.curSketch.color(...gt);ft===this.currentStrokeColor&&this.doStroke||(this.doStroke=!0,this.currentStrokeColor=ft)}strokeWeight(gt){this.lineWidth=gt}backgroundHelper(gt,ft,xt,At){let Et=void 0,St=this.curSketch;if(gt instanceof Ue||gt.__isPImage){if(Et=gt,!Et.loaded)throw'Error using image in background(): PImage not loaded.';if(Et.width!==St.width||Et.height!==St.height)throw'Background image must be the same dimensions as the canvas.'}else Et=St.color(gt,ft,xt,At);this.backgroundObj=Et}alpha(gt){return((gt&He.ALPHA_MASK)>>>24)/255*this.colorModeA}executeContextStroke(){this.doStroke&&(this.isStrokeDirty&&(this.curContext.strokeStyle=this.curSketch.color.toString(this.currentStrokeColor),this.isStrokeDirty=!1),this.curContext.stroke())}textFont(gt,ft){ft!==void 0&&(!gt.glyph&&(gt=ze.get(gt.name,ft)),this.curTextSize=ft);let xt=this.curTextFont=gt;this.curFontName=xt.name,this.curTextAscent=xt.ascent,this.curTextDescent=xt.descent,this.curTextLeading=xt.leading,this.curContext.font=xt.css}}class je extends Ke{constructor(gt,ft){super(gt,ft,ft.getContext('2d'))}$newPMatrix(){return new Xe}size(gt,ft,xt){this.curContext=this.curElement.getContext('2d'),this.userMatrixStack=new Ve,this.userReverseMatrixStack=new Ve,this.modelView=new Xe,this.modelViewInv=new Xe,super.size(gt,ft,xt)}background(gt,ft,xt,At){gt!==void 0&&super.backgroundHelper(gt,ft,xt,At);let Et=this.curSketch,St=this.backgroundObj;this.saveContext(),St instanceof Ue||St.__isPImage?(this.curContext.setTransform(1,0,0,1,0,0),Et.image(St,0,0)):(this.curContext.setTransform(1,0,0,1,0,0),Et.alpha(St)!==this.colorModeA&&this.curContext.clearRect(0,0,Et.width,Et.height),this.curContext.fillStyle=Et.color.toString(St),this.curContext.fillRect(0,0,Et.width,Et.height),this.isFillDirty=!0),this.restoreContext()}stroke(...gt){super.stroke(...gt),this.isStrokeDirty=!0}fill(...gt){super.fill(...gt),this.isFillDirty=!0}line(gt,ft,xt,At){if(this.doStroke){if(this.renderSmooth||(gt=Math.round(gt),xt=Math.round(xt),ft=Math.round(ft),At=Math.round(At)),gt===xt&&ft===At)return this.curSketch.point(gt,ft);let Et=this.curContext,St=void 0,yt=this.lineWidth,Ct=!0,It=this.modelView.array(),bt=[1,0,0,0,1,0];for(let _t=0;6>_t&&Ct;_t++)Ct=It[_t]===bt[_t];if(Ct){let _t;gt===xt?(ft>At&&(_t=ft,ft=At,At=_t),At++,1==yt%2&&Et.translate(0.5,0)):ft===At&&(gt>xt&&(_t=gt,gt=xt,xt=_t),xt++,1==yt%2&&Et.translate(0,0.5)),1===yt&&(St=Et.lineCap,Et.lineCap='butt')}Et.beginPath(),Et.moveTo(gt||0,ft||0),Et.lineTo(xt||0,At||0),this.executeContextStroke(),Ct&&(gt===xt&&1==yt%2?Et.translate(-0.5,0):ft===At&&1==yt%2&&Et.translate(0,-0.5),1===yt&&(Et.lineCap=St))}}rotate(gt){this.modelView.rotateZ(gt),this.modelViewInv.invRotateZ(gt),this.curContext.rotate(gt)}translate(gt,ft){this.modelView.translate(gt,ft),this.modelViewInv.invTranslate(gt,ft),this.curContext.translate(gt,ft)}}const We={name:'Processing.js Instance',use3DContext:!1,focused:!1,breakShape:!1,glyphTable:{},pmouseX:0,pmouseY:0,mouseX:0,mouseY:0,mouseButton:0,mouseScroll:0,mouseClicked:void 0,mouseDragged:void 0,mouseMoved:void 0,mousePressed:void 0,mouseReleased:void 0,mouseScrolled:void 0,mouseOver:void 0,mouseOut:void 0,touchStart:void 0,touchEnd:void 0,touchMove:void 0,touchCancel:void 0,key:void 0,keyCode:void 0,keyPressed:F,keyReleased:F,keyTyped:F,draw:void 0,setup:void 0,__mousePressed:!1,__keyPressed:!1,__frameRate:60,frameCount:0,width:100,height:100};class Ye{constructor(gt){this.index=-1,this.array=gt}hasNext(){return this.index+1<this.array.length}next(){return this.array[++this.index]}remove(){this.array.splice(this.index--,1)}}class Ze{toString(){return'JavaBaseClass'}hashCode(){return 0}}class qe extends Ze{constructor(gt){super(),this.array=[],gt&&gt.toArray&&(this.array=gt.toArray())}get(gt){return this.array[gt]}contains(gt){return-1<this.indexOf(gt)}indexOf(gt){let ft=this.array;for(let xt=0,At=ft.length;xt<At;++xt)if(G(gt,ft[xt]))return xt;return-1}lastIndexOf(gt){let ft=this.array;for(let xt=ft.length-1;0<=xt;--xt)if(G(gt,ft[xt]))return xt;return-1}add(gt,ft){let xt=this.array;if(!ft)return ft=gt,xt.push(ft);if('number'==typeof gt){if(0>gt)throw new Error(`ArrayList.add(index,Object): index cannot be less than zero (found ${number}).`);if(gt>=xt.length)throw new Error('ArrayList.add(index,Object): index cannot be higher than there are list elements (found ${number} for list size ${array.length}).');return xt.splice(gt,0,arguments[1])}throw`ArrayList.add(index,Object): index is not a number (found type ${typeof gt} instead).`}addAll(gt,ft){let xt,At=this.array;if(!ft){for(ft=gt,xt=new ObjectIterator(ft);xt.hasNext();)At.push(xt.next());return}if('number'==typeof gt){if(0>gt)throw new Error(`ArrayList.addAll(index,Object): index cannot be less than zero (found ${number}).`);if(gt>=At.length)throw new Error('ArrayList.addAll(index,Object): index cannot be higher than there are list elements (found ${number} for list size ${array.length}).');for(xt=new ObjectIterator(ft);xt.hasNext();)At.splice(gt++,0,xt.next());return}throw`ArrayList.addAll(index,collection): index is not a number (found type ${typeof gt} instead).`}set(gt,ft){let xt=this.array;if(!ft)throw new Error(`ArrayList.set(index,Object): missing object argument.`);if('number'==typeof gt){if(0>gt)throw new Error(`ArrayList.set(index,Object): index cannot be less than zero (found ${number}).`);if(gt>=xt.length)throw new Error('ArrayList.set(index,Object): index cannot be higher than there are list elements (found ${number} for list size ${array.length}).');return xt.splice(gt,1,ft)}throw`ArrayList.set(index,Object): index is not a number (found type ${typeof gt} instead).`}size(){return this.array.length}clear(){this.array=[]}remove(gt){return'number'==typeof gt?array.splice(gt,1)[0]:(gt=this.indexOf(gt),!!(-1<gt)&&(array.splice(gt,1),!0))}removeAll(gt){let ft=this.array;return this.clear(),ft.forEach(xt=>{gt.contains(xt)||this.add(x++,xt)}),this.size()<newList.size()}isEmpty(){return 0===this.array.length}clone(){return new qe(this)}toArray(){return this.array.slice()}iterator(){return new Ye(this.array)}toString(){return`[${this.array.map(gt=>gt.toString()).join(',')}]`}}class Qe{constructor(gt){let ft=typeof gt;this.code='string'==ft&&1===gt.length?gt.charCodeAt(0):'number'==ft?gt:gt instanceof Qe?gt.code:NaN}toString(){return String.fromCharCode(this.code)}valueOf(){return this.code}}class Je{constructor(gt){this.buckets=gt,this.bucketIndex=0,this.itemIndex=-1,this.endOfBuckets=!1,this.currentItem=void 0,this.findNext()}findNext(){for(;!this.endOfBuckets;)if(++this.itemIndex,this.bucketIndex>=buckets.length)this.endOfBuckets=!0;else if(void 0===this.buckets[this.bucketIndex]||this.itemIndex>=this.buckets[this.bucketIndex].length)this.itemIndex=-1,++this.bucketIndex;else return}hasNext(){return!this.endOfBuckets}next(){return this.currentItem=this.conversion(this.buckets[this.bucketIndex][this.itemIndex]),this.findNext(),currentItem}remove(){this.currentItem!==void 0&&(this.removeItem(currentItem),--this.itemIndex,this.findNext())}}class et{constructor(gt,ft,xt,At){this.hashMap=gt,this.conversion=ft,this.isIn=isInt,this.removeItem=At}clear(){this.hashMap.clear()}contains(gt){return this.isIn(gt)}containsAll(gt){for(var ft=gt.iterator();ft.hasNext();)if(!this.contains(ft.next()))return!1;return!0}isEmpty(){return this.hashMap.isEmpty()}iterator(){return new Je(this.hashMap.buckets,conversion,removeItem)}remove(gt){return!!this.contains(gt)&&(this.removeItem(gt),!0)}removeAll(gt){for(var ft=gt.iterator();ft.hasNext();){var xt=ft.next();this.contains(xt)&&this.removeItem(xt)}return!0}retainAll(gt){for(var ft=this.iterator(),xt=[];ft.hasNext();){var At=ft.next();gt.contains(At)||xt.push(At)}return xt.forEach(Et=>this.removeItem(Et)),0<xt.length}size(){return this.hashMap.size()}toArray(){for(var gt=[],ft=this.iterator();ft.hasNext();)gt.push(ft.next());return gt}}class tt{constructor(gt,ft){this.hashMap=gt,this.pair=ft}_isIn(gt){return gt===this.hashMap&&this.pair.removed===void 0}equals(gt){return virtEquals(this.pair.key,gt.getKey())}getKey(){return this.pair.key}getValue(){return this.pair.value}hashCode(){return virtHashCode(this.pair.key)}setValue(gt){let ft=this.pair,xt=ft.value;return ft.value=gt,xt}}class nt extends Ze{constructor(gt){return super(),gt instanceof nt?arguments[0].clone():void(this.initialCapacity=0<arguments.length?arguments[0]:16,this.loadFactor=1<arguments.length?arguments[1]:0.75,this.clear())}clear(){this.count=0,this.buckets=[],this.buckets.length=this.initialCapacity}clone(){let gt=new nt;return gt.putAll(this),gt}containsKey(gt){let ft=this.buckets,xt=V(ft,gt),At=ft[xt];if(At===void 0)return!1;for(let Et=0;Et<At.length;++Et)if(G(At[Et].key,gt))return!0;return!1}containsValue(gt){let ft=this.buckets;for(let xt=0;xt<ft.length;++xt){let At=ft[xt];if(void 0!==At)for(let Et=0;Et<At.length;++Et)if(G(At[Et].value,gt))return!0}return!1}entrySet(){return new et(this,gt=>new tt(gt),gt=>gt instanceof tt&&gt._isIn(this),gt=>this.remove(gt.getKey()))}get(gt){let ft=this.buckets,xt=V(ft,gt),At=ft[xt];if(At===void 0)return null;for(let Et=0;Et<At.length;++Et)if(G(At[Et].key,gt))return At[Et].value;return null}isEmpty(){return 0===this.count}keySet(){return new et(this,gt=>gt.key,gt=>this.containsKey(gt),gt=>this.remove(gt))}values(){return new et(this,gt=>gt.value,gt=>this.containsValue(gt),gt=>this.removeByValue(gt))}put(gt,ft){let xt=this.buckets,At=V(xt,gt),Et=xt[At];if(void 0===Et)return++this.count,xt[At]=[{key:gt,value:ft}],U(xt,this.loadFactor,this.count),null;for(let St=0;St<Et.length;++St)if(G(Et[St].key,gt)){let yt=Et[St].value;return Et[St].value=ft,yt}return++this.count,Et.push({key:gt,value:ft}),U(xt,this.loadFactor,this.count),null}putAll(gt){for(let ft=gt.entrySet().iterator();ft.hasNext();){let xt=ft.next();this.put(xt.getKey(),xt.getValue())}}remove(gt){let ft=this.buckets,xt=V(ft,gt),At=ft[xt];if(At===void 0)return null;for(let Et=0;Et<At.length;++Et)if(G(At[Et].key,gt)){--this.count;let St=At[Et].value;return At[Et].removed=!0,1<At.length?At.splice(Et,1):ft[xt]=void 0,St}return null}removeByValue(gt){let xt,At,Et,St,ft=this.buckets;for(xt in ft)if(ft.hasOwnProperty(xt))for(At=0,Et=ft[xt].length;At<Et;At++)if(St=ft[xt][At],St.value===gt)return ft[xt].splice(At,1),!0;return!1}size(){return this.count}toString(){let gt=this.buckets,ft=[];return gt.forEach(xt=>{xt.forEach(At=>{ft.push(At.key+'='+At.value.toString())})}),`{${ft.join(',')}}`}}class rt{constructor(gt,ft){this.z=gt||362436069,this.w=ft||521288629}intGenerator(){return this.z=4294967295&36969*(65535&this.z)+(this.z>>>16),this.w=4294967295&18000*(65535&this.w)+(this.w>>>16),4294967295&((65535&this.z)<<16|65535&this.w)}doubleGenerator(){var gt=this.intGenerator()/4294967296;return 0>gt?1+gt:gt}static createRandomized(){var gt=new Date;return new rt(4294967295&gt/6e4,4294967295&gt)}}let at={generator:void 0,octaves:4,fallout:0.5,seed:void 0},st=Math.random;class ot{constrain(gt,ft,xt){return gt>xt?xt:gt<ft?ft:gt}dist(){var gt,ft,xt;return 4===arguments.length?(gt=arguments[0]-arguments[2],ft=arguments[1]-arguments[3],Math.sqrt(gt*gt+ft*ft)):6===arguments.length?(gt=arguments[0]-arguments[3],ft=arguments[1]-arguments[4],xt=arguments[2]-arguments[5],Math.sqrt(gt*gt+ft*ft+xt*xt)):void 0}lerp(gt,ft,xt){return(ft-gt)*xt+gt}mag(gt,ft,xt){return xt?Math.sqrt(gt*gt+ft*ft+xt*xt):Math.sqrt(gt*gt+ft*ft)}map(gt,ft,xt,At,Et){return At+(Et-At)*((gt-ft)/(xt-ft))}max(){if(2===arguments.length)return arguments[0]<arguments[1]?arguments[1]:arguments[0];var gt=1===arguments.length?arguments[0]:arguments;if(!('length'in gt&&0<gt.length))throw'Non-empty array is expected';var ft=gt[0],xt=gt.length;for(var At=1;At<xt;++At)ft<gt[At]&&(ft=gt[At]);return ft}min(){if(2===arguments.length)return arguments[0]<arguments[1]?arguments[0]:arguments[1];var gt=1===arguments.length?arguments[0]:arguments;if(!('length'in gt&&0<gt.length))throw'Non-empty array is expected';var ft=gt[0],xt=gt.length;for(var At=1;At<xt;++At)ft>gt[At]&&(ft=gt[At]);return ft}norm(gt,ft,xt){return(gt-ft)/(xt-ft)}sq(gt){return gt*gt}degrees(gt){return 180*gt/Math.PI}random(gt,ft){if(0===arguments.length?(ft=1,gt=0):1===arguments.length&&(ft=gt,gt=0),gt===ft)return gt;for(var xt=0;100>xt;xt++){var At=st(),Et=At*(ft-gt)+gt;if(Et!==ft)return Et}return gt}randomSeed(gt){st=new rt(gt,(gt<<16)+(gt>>16)).doubleGenerator,this.haveNextNextGaussian=!1}randomGaussian(){if(this.haveNextNextGaussian)return this.haveNextNextGaussian=!1,this.nextNextGaussian;var gt,ft,xt;do gt=2*st()-1,ft=2*st()-1,xt=gt*gt+ft*ft;while(1<=xt||0===xt);var At=Math.sqrt(-2*Math.log(xt)/xt);return this.nextNextGaussian=ft*At,this.haveNextNextGaussian=!0,gt*At}noise(gt,ft,xt){at.generator===undef&&(at.generator=new K(at.seed));var At=at.generator,Et=1,St=1,yt=0;for(var Ct=0;Ct<at.octaves;++Ct){switch(Et*=at.fallout,arguments.length){case 1:yt+=Et*(1+At.noise1d(St*gt))/2;break;case 2:yt+=Et*(1+At.noise2d(St*gt,St*ft))/2;break;case 3:yt+=Et*(1+At.noise3d(St*gt,St*ft,St*xt))/2;}St*=2}return yt}noiseDetail(gt,ft){at.octaves=gt,ft!==undef&&(at.fallout=ft)}noiseSeed(gt){at.seed=gt,at.generator=undef}}let lt=void 0;class dt{static __contains(gt,ft){return'string'==typeof gt?null!==gt&&null!==ft&&'string'==typeof ft&&-1<gt.indexOf(ft):gt.contains.apply(gt,W(arguments))}static __replaceAll(gt,ft,xt){return'string'==typeof gt?gt.replace(new RegExp(ft,'g'),xt):gt.replaceAll.apply(gt,W(arguments))}static __replaceFirst(gt,ft,xt){return'string'==typeof gt?gt.replace(new RegExp(ft,''),xt):gt.replaceFirst.apply(gt,W(arguments))}static __replace(gt,ft,xt){if('string'!=typeof gt)return gt.replace.apply(gt,W(arguments));if(ft instanceof RegExp)return gt.replace(ft,xt);if('string'!=typeof ft&&(ft=ft.toString()),''===ft)return gt;var At=gt.indexOf(ft);if(0>At)return gt;var Et=0,St='';do St+=gt.substring(Et,At)+xt,Et=At+ft.length;while(0<=(At=gt.indexOf(ft,Et)));return St+gt.substring(Et)}static __equals(gt,ft){return gt.equals instanceof Function?gt.equals.apply(gt,W(arguments)):G(gt,ft)}static __equalsIgnoreCase(gt,ft){return'string'==typeof gt?gt.toLowerCase()===ft.toLowerCase():gt.equalsIgnoreCase.apply(gt,W(arguments))}static __toCharArray(gt){if('string'!=typeof gt)return gt.toCharArray.apply(gt,W(arguments));var ft=[];for(var xt=0,At=gt.length;xt<At;++xt)ft[xt]=new Char(gt.charAt(xt));return ft}static __split(gt,ft,xt){if('string'!=typeof gt)return gt.split.apply(gt,W(arguments));var At=new RegExp(ft);if(xt===lt||1>xt)return gt.split(At);for(var yt,Et=[],St=gt;-1!==(yt=St.search(At))&&Et.length<xt-1;){var Ct=At.exec(St).toString();Et.push(St.substring(0,yt)),St=St.substring(yt+Ct.length)}return(-1!==yt||''!==St)&&Et.push(St),Et}static __codePointAt(gt,ft){var At,Et,xt=gt.charCodeAt(ft);return 55296<=xt&&56319>=xt?(At=xt,Et=gt.charCodeAt(ft+1),1024*(At-55296)+(Et-56320)+65536):xt}static __matches(gt,ft){return new RegExp(ft).test(gt)}static __startsWith(gt,ft,xt){return'string'==typeof gt?(xt=xt||0,0>xt||xt>gt.length?!1:''===ft||ft===gt||gt.indexOf(ft)===xt):gt.startsWith.apply(gt,W(arguments))}static __endsWith(gt,ft){if('string'!=typeof gt)return gt.endsWith.apply(gt,W(arguments));var xt=ft?ft.length:0;return''===ft||ft===gt||gt.indexOf(ft)===gt.length-xt}static __hashCode(gt){return gt.hashCode instanceof Function?gt.hashCode.apply(gt,W(arguments)):H(gt)}static __printStackTrace(gt){console.error('Exception: '+gt.toString())}}class ct{constructor(gt,ft,xt){this.declaredClasses=gt,this.sourceStrings=ft,this.astNodes=xt}getSourceStrings(){return this.sourceStrings}generateMetadata(){L(this.declaredClasses)}setWeight(){B(this.declaredClasses)}replaceContext(gt){return ft=>{let xt=ft.name;return gt.hasOwnProperty(xt)?xt:Fe.hasOwnProperty(xt)||He.hasOwnProperty(xt)||this.defaultScope.hasOwnProperty(xt)?'$p.'+xt:xt}}toString(gt){gt=gt||{},this.defaultScope=Q(gt);let At,ft=[],xt=[];for(let Ct=0,It=this.astNodes.length;Ct<It;++Ct)At=this.astNodes[Ct],At instanceof le||At instanceof Ie?ft.push(At):xt.push(At);T(ft);let Et=R(this.astNodes),St=this.replaceContext(Et);ft=P(ft,St,''),xt=P(xt,St,'');let yt=[`// this code was autogenerated by ProcessingJS-ES7 version ${'0.0.0'}`,`(function(PJS) {`,`  let $p = PJS.generateDefaultScope();`,`  $p.id = {{ SKETCH_ID_PLACEHOLDER }};`,`  ${ft}`,`  ${xt}`,`  PJS.onSketchLoad($p);`,`  window.sketch = $p;`,`}(Processing));`].join('\n');return yt}}let mt={preSetup:F,postSetup:F,preDraw:F,postDraw:F,onFrameStart:F,onFrameEnd:F,onLoop:F,onPause:F};class ut{constructor(gt){if(this.sketch=gt.sketch,this.target=gt.target,this.hooks=Object.assign({},mt,gt.hooks),this.cache={},!this.target){let ft=document.createElement('canvas');ft.width=100,ft.height=100,this.target=ft}se(this.sketch,this.hooks),this.startLooping=ie(this.sketch,this.hooks),this.sketch.$perform_initial_binding(this.target)}run(){this.sketch.setup&&(this.__pre_setup(),this.sketch.setup(),this.__post_setup()),this.sketch.draw&&(this.__pre_draw(),this.hooks.onFrameStart(),this.sketch.draw(),this.hooks.onFrameEnd(),this.__post_draw(),this.startLooping())}__pre_setup(){this.hooks.preSetup()}__post_setup(){this.hooks.postSetup()}__pre_draw(){this.hooks.preDraw(this.context),this.cache.context=this.context}__post_draw(){this.hooks.postDraw(this.context),this.context=this.cache.context}}var ht=[],pt={async load(gt){let ft={};return gt.forEach(xt=>ft[xt]=!1),new Promise(function(){})},aggregate(){},async parse(gt){let ft=re(gt);return te(ft)},async convert(gt,ft){let xt=gt.toString(ft),At=gt.getSourceStrings();return xt=xt.replace(/\s*\n(?:[\t ]*\n)+/g,'\n\n'),xt=xt.replace(/__x([0-9A-F]{4})/g,function(Et,St){return String.fromCharCode(parseInt(St,16))}),ae(xt,At)},injectSketch(gt,ft,xt,At){let Et=ht.length;ht[Et]={sketch:void 0,target:ft,hooks:At};let St=document.querySelector(`#processing-sketch-${Et}`);if(!St){let yt=document.createElement('script');yt.id=`processing-sketch-${Et}`,yt.textContent=gt.replace('{{ SKETCH_ID_PLACEHOLDER }}',Et),yt.async=!0;let Ct=document.querySelector('head');return Ct.appendChild(yt)}},generateDefaultScope(gt){return Q(gt)},onSketchLoad(gt){let ft=gt.id,xt=ht[ft];xt.sketch=gt;let At=new ut(xt);setTimeout(()=>At.run(),1)},run(gt,ft,xt,At){if(!gt)throw new Error('No source code supplied to build a sketch with.');if(!ft)throw new Error('No target element supplied for the sketch to run in.');pt.load(gt).then(Et=>pt.aggregate(Et)).then(Et=>pt.parse(Et)).then(Et=>pt.convert(Et,xt)).then(Et=>pt.injectSketch(Et,ft,xt,At)).catch(Et=>{if(At&&At.onerror)At.onerror(Et);else throw Et})}};return pt});

