(function(n,A){'object'==typeof exports&&'undefined'!=typeof module?module.exports=A():'function'==typeof define&&define.amd?define(A):n.Processing=A()})(this,function(){'use strict';function n(gt){let ft,xt=gt,At=function(Et,yt,Ct,It){return!yt&&!It?(ft=!0,''):Et},St=/([<]?)<\s*((?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\[\])*(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?(?:\s*,\s*(?:\?|[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\[\])*(?:\s+(?:extends|super)\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)?)*)\s*>([=]?)/g;do ft=!1,xt=xt.replace(St,At);while(ft);return xt}function A(gt){var ft=[],xt=gt.split(/([\{\[\(\)\]\}])/),At=xt[0],St=[];for(var Et=1;Et<xt.length;Et+=2){var yt=xt[Et];if('['===yt||'{'===yt||'('===yt)St.push(At),At=yt;else if(']'===yt||'}'===yt||')'===yt){var Ct='}'===yt?'A':')'===yt?'B':'C',It=ft.length;ft.push(At+yt),At=St.pop()+'"'+Ct+(It+1)+'"'}At+=xt[Et+1]}return ft.unshift(At),ft}function S(gt){var xt,ft=/^\s*/.exec(gt);if(ft[0].length===gt.length)xt={left:ft[0],middle:'',right:''};else{var At=/\s*$/.exec(gt);xt={left:ft[0],middle:gt.substring(ft[0].length,At.index),right:At[0]}}return xt.untrim=function(St){return this.left+St+this.right},xt}function E(gt){return gt.replace(/^\s+/,'').replace(/\s+$/,'')}function C(gt,ft){function xt(Ft,$t,Gt,Ht){let Xt=Et[Ht];Dt=!0;let Vt=S(Xt.substring(1,Xt.length-1));return'__'+Gt+(''===Vt.middle?gt.addAtom('('+$t.replace(/\.\s*$/,'')+')','B'):gt.addAtom('('+$t.replace(/\.\s*$/,'')+','+Vt.middle+')','B'))}function At(Ft,$t,Gt){return Dt=!0,'__instanceof'+gt.addAtom('('+$t+', '+Gt+')','B')}let St=ft,Et=gt.atoms,yt=/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"C\d+")+\s*("A\d+")/g;St=St.replace(yt,(Ft,$t,Gt)=>Gt);let Ct=/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)(?:\s*"B\d+")\s*("A\d+")/g;St=St.replace(Ct,Ft=>gt.addAtom(Ft,'F')),St=St.replace(gt.functionsRegex,Ft=>gt.addAtom(Ft,'H'));let It=/\bnew\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*("C\d+"(?:\s*"C\d+")*)/g;St=St.replace(It,(Ft,$t,Gt)=>{let Ht=Gt.replace(/"C(\d+)"/g,(Ut,Kt)=>Et[Kt]).replace(/\[\s*\]/g,'[null]').replace(/\s*\]\s*\[\s*/g,', '),Xt='{'+Ht.substring(1,Ht.length-1)+'}',Vt='(\''+$t+'\', '+gt.addAtom(Xt,'A')+')';return'$p.createJavaArray'+gt.addAtom(Vt,'B')});let bt=/(\.\s*length)\s*"B\d+"/g;St=St.replace(bt,'$1');let _t=/#([0-9A-Fa-f]{6})\b/g;St=St.replace(_t,(Ft,$t)=>'0xFF'+$t);let Tt=/"B(\d+)"(\s*(?:[\w$']|"B))/g;St=St.replace(Tt,(Ft,$t,Gt)=>{let Ht=Et[$t],Xt=/^\(\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\s*(?:"C\d+"\s*)*\)$/;if(!Xt.test(Ht))return Ft;let Vt=/^\(\s*int\s*\)$/;if(Vt.test(Ht))return'(int)'+Gt;let Ut=Ht.split(/"C(\d+)"/g);return 1<Ut.length&&!/^\[\s*\]$/.test(Et[Ut[1]])?Ft:''+Gt});let Ot=/\(int\)([^,\]\)\}\?\:\*\+\-\/\^\|\%\&\~<\>\=]+)/g;St=St.replace(Ot,(Ft,$t)=>{let Gt=S($t);return Gt.untrim('__int_cast('+Gt.middle+')')});let Pt=/\bsuper(\s*"B\d+")/g,Rt=/\bsuper(\s*\.)/g;St=St.replace(Pt,'$$superCstr$1').replace(Rt,'$$super$1');let Nt=/\b0+((\d*)(?:\.[\d*])?(?:[eE][\-\+]?\d+)?[fF]?)\b/;St=St.replace(Nt,(Ft,$t,Gt)=>{return $t===Gt?Ft:''===Gt?'0'+$t:$t});let Mt=/\b(\.?\d+\.?)[fF]\b/g;St=St.replace(Mt,'$1');let kt=/([^\s])%([^=\s])/g;St=St.replace(kt,'$1 % $2');let Lt=/\b(frameRate|keyPressed|mousePressed)\b(?!\s*"B)/g;St=St.replace(Lt,'__$1');let wt=/\b(boolean|byte|char|float|int)\s*"B/g;St=St.replace(wt,(Ft,$t)=>'parse'+$t.substring(0,1).toUpperCase()+$t.substring(1)+'"B');let vt=/\bpixels\b\s*(("C(\d+)")|\.length)?(\s*=(?!=)([^,\]\)\}]+))?/g;St=St.replace(vt,(Ft,$t,Gt,Ht,Xt,Vt)=>{if(Gt){let Ut=Et[Ht];return Xt?'pixels.setPixel'+gt.addAtom('('+Ut.substring(1,Ut.length-1)+','+Vt+')','B'):'pixels.getPixel'+gt.addAtom('('+Ut.substring(1,Ut.length-1)+')','B')}return $t?'pixels.getLength'+gt.addAtom('()','B'):Xt?'pixels.set'+gt.addAtom('('+Vt+')','B'):'pixels.toArray'+gt.addAtom('()','B')});let Dt;do{Dt=!1;let Ft=/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*\.\s*(?:[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*\.\s*)*)(replace|replaceAll|replaceFirst|contains|equals|equalsIgnoreCase|hashCode|toCharArray|printStackTrace|split|startsWith|endsWith|codePointAt|matches)\s*"B(\d+)"/g;St=St.replace(Ft,xt)}while(Dt);do{Dt=!1;let Ft=/((?:'\d+'|\b[A-Za-z_$][\w$]*\s*(?:"[BC]\d+")*)\s*(?:\.\s*[A-Za-z_$][\w$]*\s*(?:"[BC]\d+"\s*)*)*)instanceof\s+([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)/g;St=St.replace(Ft,At)}while(Dt);let Bt=/\bthis(\s*"B\d+")/g;return St=St.replace(Bt,'$$constr$1'),St}function I(gt){return gt.replace(/\b(catch\s*"B\d+"\s*"A\d+")(\s*catch\s*"B\d+"\s*"A\d+")+/g,'$1')}function _(gt){return gt.substring(2,gt.length-1)}function T(gt){gt.sort((ft,xt)=>xt.weight-ft.weight)}function O(gt,ft,xt){return gt.map(At=>At.toString(ft)).join(xt)}function P(gt,ft){for(var xt=0,At=ft.length;xt<At;++xt)gt[ft[xt]]=null;return gt}function R(gt,ft){let xt=/(\.\s*)?((?:\b[A-Za-z_]|\$)[\w$]*)(\s*\.\s*([A-Za-z_$][\w$]*)(\s*\()?)?/g;return gt.replace(xt,(At,St,Et,yt,Ct,It)=>{if(St)return At;try{return ft({name:Et,member:Ct,callSign:!!It})+(yt===void 0?'':yt)}catch(bt){return console.error(bt),'<<<CONTEXT REPLACEMENT FAILED>>>'}})}function N(gt){let ft=[];for(let xt=0,At=gt.length;xt<At;++xt){let St=gt[xt];St instanceof Me?ft=ft.concat(St.getNames()):St instanceof xe&&St.argument.initStatement instanceof Me?ft=ft.concat(St.argument.initStatement.getNames()):(St instanceof Ce||St instanceof ye||St instanceof Ie||St instanceof le||St instanceof Te||St instanceof Ae)&&ft.push(St.name)}return P({},ft)}function M(gt){for(var ft in gt)if(gt.hasOwnProperty(ft))return!1;return!0}function L(gt){function ft(Et,yt){let bt,Ct=yt.split('.'),It=Et.scope;for(;It;){if(It.hasOwnProperty(Ct[0])){bt=It[Ct[0]];break}It=It.scope}void 0===bt&&(bt=St[Ct[0]]);for(let _t=1,Tt=Ct.length;_t<Tt&&bt;++_t)bt=bt.inScope[Ct[_t]];return bt}let xt,At,St={};for(xt in Object.keys(gt).forEach(Et=>{At=gt[Et];let yt=At.scopeId,Ct=At.name;if(yt){let It=gt[yt];At.scope=It,void 0===It.inScope&&(It.inScope={}),It.inScope[Ct]=At}else St[Ct]=At}),gt)if(gt.hasOwnProperty(xt)){At=gt[xt];let Et=At.body.baseClassName;if(Et){let _t=ft(At,Et);_t&&(At.base=_t,!_t.derived&&(_t.derived=[]),_t.derived.push(At))}let It,bt,yt=At.body.interfacesNames,Ct=[];if(yt&&0<yt.length){for(It=0,bt=yt.length;It<bt;++It){let _t=ft(At,yt[It]);(Ct.push(_t),!!_t)&&(_t.derived||(_t.derived=[]),_t.derived.push(At))}0<Ct.length&&(At.interfaces=Ct)}}}function D(gt,ft,xt){let At=gt[ft];if(!At)return!1;let St=At.indexOf(xt);return!(0>St)&&(At.splice(St,1),!(0<At.length))&&(delete gt[ft],!0)}function B(gt){let ft=[],xt={},At,St,Et;for(At in gt)if(gt.hasOwnProperty(At))if(Et=gt[At],!Et.inScope&&!Et.derived)ft.push(At),Et.weight=0;else{let yt=[];if(Et.inScope)for(St in Et.inScope)Et.inScope.hasOwnProperty(St)&&yt.push(Et.inScope[St]);Et.derived&&(yt=yt.concat(Et.derived)),xt[At]=yt}for(;0<ft.length;)if(At=ft.shift(),Et=gt[At],Et.scopeId&&D(xt,Et.scopeId,Et)&&(ft.push(Et.scopeId),gt[Et.scopeId].weight=Et.weight+1),Et.base&&D(xt,Et.base.classId,Et)&&(ft.push(Et.base.classId),Et.base.weight=Et.weight+1),Et.interfaces){let yt,Ct;for(yt=0,Ct=Et.interfaces.length;yt<Ct;++yt)Et.interfaces[yt]&&D(xt,Et.interfaces[yt].classId,Et)&&(ft.push(Et.interfaces[yt].classId),Et.interfaces[yt].weight=Et.weight+1)}}function F(){}function $(gt){var ft=250,xt=gt.size/ft,At=document.createElement('canvas');At.width=2*ft,At.height=2*ft,At.style.opacity=0;var St=gt.getCSSDefinition(ft+'px','normal'),Et=At.getContext('2d');Et.font=St;var yt='dbflkhyjqpg';At.width=Et.measureText(yt).width,Et.font=St;var Ct=document.createElement('div');Ct.style.position='absolute',Ct.style.opacity=0,Ct.style.fontFamily='"'+gt.name+'"',Ct.style.fontSize=ft+'px',Ct.innerHTML=yt+'<br/>'+yt,document.body.appendChild(Ct);var It=At.width,bt=At.height,_t=bt/2;Et.fillStyle='white',Et.fillRect(0,0,It,bt),Et.fillStyle='black',Et.fillText(yt,0,_t);for(var Tt=Et.getImageData(0,0,It,bt).data,Ot=0,Pt=4*It,Rt=Tt.length;++Ot<Rt&&255===Tt[Ot];)F();var Nt=Math.round(Ot/Pt);for(Ot=Rt-1;0<--Ot&&255===Tt[Ot];)F();var Mt=Math.round(Ot/Pt);if(gt.ascent=xt*(_t-Nt),gt.descent=xt*(Mt-_t),document.defaultView.getComputedStyle){var kt=document.defaultView.getComputedStyle(Ct,null).getPropertyValue('height');kt=xt*kt.replace('px',''),kt>=2*gt.size&&(gt.leading=Math.round(kt/2))}return(document.body.removeChild(Ct),gt.caching)?Et:void 0}function G(gt,ft){return null===gt||null===ft?null==gt&&null==ft:'string'==typeof gt?gt===ft:'object'==typeof gt?gt.equals instanceof Function?gt.equals(ft):gt==ft:gt===ft}function H(gt,ft){if('string'==typeof gt){var xt=0;for(var At=0;At<gt.length;++At)xt=4294967295&31*xt+gt.charCodeAt(At);return xt}return'object'==typeof gt?gt.hashCode instanceof Function?gt.hashCode():(gt.$id===ft&&(gt.$id=Math.floor(65536*Math.random())-32768<<16|Math.floor(65536*Math.random())),gt.$id):4294967295&gt}function V(gt,ft){let xt=H(ft)%gt.length;return 0>xt?gt.length+xt:xt}function U(gt,ft,xt){if(!(xt<=ft*gt.length)){let At=[];gt.forEach(yt=>{yt&&(At=At.concat(yt))});let St=2*gt.length,Et=[];return Et.length=St,At.forEach(()=>{let yt=V(gt,At[j].key),Ct=Et[yt];void 0===Ct&&(Et[yt]=Ct=[]),Ct.push(At[j])}),gt}}function K(gt){function ft(_t,Tt,Ot,Pt){var Rt=15&_t,Nt=8>Rt?Tt:Ot,Mt=4>Rt?Ot:12==Rt||14==Rt?Tt:Pt;return(0==(1&Rt)?Nt:-Nt)+(0==(2&Rt)?Mt:-Mt)}function xt(_t,Tt,Ot){var Pt=0==(1&_t)?Tt:Ot;return 0==(2&_t)?-Pt:Pt}function At(_t,Tt){return 0==(1&_t)?-Tt:Tt}function St(_t,Tt,Ot){return Tt+_t*(Ot-Tt)}var Et=gt===undef?Marsaglia.createRandomized():new Marsaglia(gt,(gt<<16)+(gt>>16)),yt,Ct,It=new Uint8Array(512);for(yt=0;256>yt;++yt)It[yt]=yt;for(yt=0;256>yt;++yt){var bt=It[Ct=255&Et.intGenerator()];It[Ct]=It[yt],It[yt]=bt}for(yt=0;256>yt;++yt)It[yt+256]=It[yt];this.noise3d=function(_t,Tt,Ot){var Pt=255&Math.floor(_t),Rt=255&Math.floor(Tt),Nt=255&Math.floor(Ot);_t-=Math.floor(_t),Tt-=Math.floor(Tt),Ot-=Math.floor(Ot);var Mt=(3-2*_t)*_t*_t,kt=(3-2*Tt)*Tt*Tt,Lt=(3-2*Ot)*Ot*Ot,wt=It[Pt]+Rt,vt=It[wt]+Nt,Dt=It[wt+1]+Nt,Bt=It[Pt+1]+Rt,Ft=It[Bt]+Nt,$t=It[Bt+1]+Nt;return St(Lt,St(kt,St(Mt,ft(It[vt],_t,Tt,Ot),ft(It[Ft],_t-1,Tt,Ot)),St(Mt,ft(It[Dt],_t,Tt-1,Ot),ft(It[$t],_t-1,Tt-1,Ot))),St(kt,St(Mt,ft(It[vt+1],_t,Tt,Ot-1),ft(It[Ft+1],_t-1,Tt,Ot-1)),St(Mt,ft(It[Dt+1],_t,Tt-1,Ot-1),ft(It[$t+1],_t-1,Tt-1,Ot-1))))},this.noise2d=function(_t,Tt){var Ot=255&Math.floor(_t),Pt=255&Math.floor(Tt);_t-=Math.floor(_t),Tt-=Math.floor(Tt);var Rt=(3-2*_t)*_t*_t,Nt=(3-2*Tt)*Tt*Tt,Mt=It[Ot]+Pt,kt=It[Ot+1]+Pt;return St(Nt,St(Rt,xt(It[Mt],_t,Tt),xt(It[kt],_t-1,Tt)),St(Rt,xt(It[Mt+1],_t,Tt-1),xt(It[kt+1],_t-1,Tt-1)))},this.noise1d=function(_t){var Tt=255&Math.floor(_t);_t-=Math.floor(_t);var Ot=(3-2*_t)*_t*_t;return St(Ot,At(It[Tt],_t),At(It[Tt+1],_t-1))}}function W(gt){return Array.from(gt).slice(1)}function Q(gt){function ft(yt,Ct,It){if(!yt.hasOwnProperty(Ct)||'function'!=typeof yt[Ct])return void(yt[Ct]=It);var bt=yt[Ct];if('$overloads'in bt)return void(bt.$defaultOverload=It);if('$overloads'in It||bt.length!==It.length){var _t,Tt;'$overloads'in It?(_t=It.$overloads.slice(0),_t[bt.length]=bt,Tt=It.$defaultOverload):(_t=[],_t[It.length]=It,_t[bt.length]=bt,Tt=bt);var Ot=function(){var Pt=Ot.$overloads[arguments.length]||('$methodArgsIndex'in Ot&&arguments.length>Ot.$methodArgsIndex?Ot.$overloads[Ot.$methodArgsIndex]:null)||Ot.$defaultOverload;return Pt.apply(this,arguments)};Ot.$overloads=_t,'$methodArgsIndex'in It&&(Ot.$methodArgsIndex=It.$methodArgsIndex),Ot.$defaultOverload=Tt,Ot.name=Ct,yt[Ct]=Ot}}function xt(yt,Ct){function It(Tt){Et.defineProperty(yt,Tt,{get:function(){return Ct[Tt]},set:function(Ot){Ct[Tt]=Ot},enumerable:!0})}var bt=[];for(var _t in Ct)'function'==typeof Ct[_t]?ft(yt,_t,Ct[_t]):'$'===_t.charAt(0)||_t in yt||bt.push(_t);for(;0<bt.length;)It(bt.shift());yt.$super=Ct}function At(yt){return'string'==typeof yt&&-1!==['byte','int','char','color','float','long','double'].indexOf(yt)}let St=function(){};St.prototype=Object.assign({},He,We,Math,ot,dt,{ArrayList:qe,Char:Qe,Character:Qe,HashMap:nt,PFont:Ke});let Et=new St;return gt&&Object.keys(gt).forEach(yt=>{Et[yt]=scopes[yt]}),Et.__setup_drawing_context=function(yt,Ct){let It=new je(Et,yt,Ct);Et.context=It},Et.defineProperty=function(yt,Ct,It){'defineProperty'in Object?Object.defineProperty(yt,Ct,It):(It.hasOwnProperty('get')&&yt.__defineGetter__(Ct,It.get),It.hasOwnProperty('set')&&yt.__defineSetter__(Ct,It.set))},Et.extendClassChain=function(yt){var Ct=[yt];for(var It=yt.$upcast;It;It=It.$upcast)xt(It,yt),Ct.push(It),yt=It;for(;0<Ct.length;)Ct.pop().$self=yt},Et.extendStaticMembers=function(yt,Ct){xt(yt,Ct)},Et.extendInterfaceMembers=function(yt,Ct){xt(yt,Ct)},Et.addMethod=function(yt,Ct,It,bt){var _t=yt[Ct];if(_t||bt){var Tt=It.length;if('$overloads'in _t)_t.$overloads[Tt]=It;else{var Ot=function(){var Rt=Ot.$overloads[arguments.length]||('$methodArgsIndex'in Ot&&arguments.length>Ot.$methodArgsIndex?Ot.$overloads[Ot.$methodArgsIndex]:null)||Ot.$defaultOverload;return Rt.apply(this,arguments)},Pt=[];_t&&(Pt[_t.length]=_t),Pt[Tt]=It,Ot.$overloads=Pt,Ot.$defaultOverload=_t||It,bt&&(Ot.$methodArgsIndex=Tt),Ot.name=Ct,yt[Ct]=Ot}}else yt[Ct]=It},Et.createJavaArray=function(yt,Ct){var It=null,bt=null;if('string'==typeof yt&&('boolean'===yt?bt=!1:At(yt)&&(bt=0)),'number'==typeof Ct[0]){var _t=0|Ct[0];if(1>=Ct.length){It=[],It.length=_t;for(var Tt=0;Tt<_t;++Tt)It[Tt]=bt}else{It=[];var Ot=Ct.slice(1);for(var Pt=0;Pt<_t;++Pt)It.push(Et.createJavaArray(yt,Ot))}}return It},Et.defineProperty(Et,'screenWidth',{get:function(){return window.innerWidth}}),Et.defineProperty(Et,'screenHeight',{get:function(){return window.innerHeight}}),Et}function J(gt){return function(ft,xt,At,St,Et,yt,Ct,It){let bt;return xt||At?(bt=gt.length,gt.push(ft),'\''+bt+'\''):St?(bt=gt.length,gt.push(yt),Et+'\''+bt+'\''):''===It?'\n':' '}}function ee(gt,ft){return'__x005F_x'+ft}function te(gt){let ft=gt.replace(/\r\n?|\n\r/g,'\n'),xt=[],At=J(xt),St=ft.replace(/("(?:[^"\\\n]|\\.)*")|('(?:[^'\\\n]|\\.)*')|(([\[\(=|&!\^:?]\s*)(\/(?![*\/])(?:[^\/\\\n]|\\.)*\/[gim]*)\b)|(\/\/[^\n]*\n)|(\/\*(?:(?!\*\/)(?:.|\n))*\*\/)/g,At);St=St.replace(/__x([0-9A-F]{4})/g,ee),St=St.replace(/\$/g,'__x0024'),St=St.replace(/return\s*[\n\r]+/g,'return ');let Et=n(St),yt=A(Et),Ct=new ve(yt),It=Ct.extractClassesAndMethods(yt[0]);It=It.replace(/\bimport\s+[^;]+;/g,'');let bt=Ct.transformStatements(It),_t=Ct.declaredClasses,Tt=new ct(_t,xt,bt);return Tt.generateMetadata(),Tt.setWeight(),Tt}function ne(gt){return gt.replace(/^\s*["']?/,'').replace(/["']?\s*$/,'')}function re(gt,ft){let xt=new RegExp(/\/\*\s*@pjs\s+((?:[^\*]|\*+[^\*\/])*)\*\//g).exec(gt);if(!xt||2!==xt.length)return gt;let At=[],St=xt.splice(1,2)[0].replace(/\{([\s\S]*?)\}/g,function(){return function(Et,yt){return At.push(yt),'{'+(At.length-1)+'}'}}()).replace('\n','').replace('\r','').split(';');return St.forEach(Et=>{if(Et=Et.split('='),Et&&2===Et.length){let yt=ne(Et[0]),Ct=ne(Et[1]),It=[];if('preload'===yt){It=Ct.split(',');for(let bt=0,_t=It.length;bt<_t;bt++){let Tt=ne(It[bt]);ft.imageCache.add(Tt)}}else'font'===yt?(It=Ct.split(','),It.forEach(bt=>{let _t=ne(bt),Tt=/^\{(\d*?)\}$/.exec(_t);Ke.preloading.add(Tt?JSON.parse('{'+At[Tt[1]]+'}'):_t)})):'pauseOnBlur'===yt?ft.options.pauseOnBlur='true'===Ct:'globalKeyEvents'===yt?ft.options.globalKeyEvents='true'===Ct:'param-'===yt.substring(0,6)?ft.params[yt.substring(6)]=Ct:ft.options[yt]=Ct}}),gt}function ae(gt,ft){return gt.replace(/'(\d+)'/g,function(xt,At){var St=ft[At];return'/'===St.charAt(0)?St:/^'((?:[^'\\\n])|(?:\\.[0-9A-Fa-f]*))'$/.test(St)?'(new $p.Character('+St+'))':St})}function se(gt){function ft(Et,yt,Ct,It){let bt,_t,Tt,Ot,Pt=gt.context;if(Pt.curColorMode===He.HSB){var Rt=gt.color.toRGB(Et,yt,Ct);bt=Rt[0],_t=Rt[1],Tt=Rt[2]}else bt=Math.round(255*(Et/Pt.colorModeX)),_t=Math.round(255*(yt/Pt.colorModeY)),Tt=Math.round(255*(Ct/Pt.colorModeZ));return Ot=Math.round(255*(It/Pt.colorModeA)),bt=0>bt?0:bt,_t=0>_t?0:_t,Tt=0>Tt?0:Tt,Ot=0>Ot?0:Ot,bt=255<bt?255:bt,_t=255<_t?255:_t,Tt=255<Tt?255:Tt,Ot=255<Ot?255:Ot,Ot<<24&He.ALPHA_MASK|bt<<16&He.RED_MASK|_t<<8&He.GREEN_MASK|Tt&He.BLUE_MASK}function xt(Et,yt){let Ct,It=gt.context;return Et&He.ALPHA_MASK?(Ct=Math.round(255*(yt/It.colorModeA)),Ct=255<Ct?255:Ct,Ct=0>Ct?0:Ct,Et-(Et&He.ALPHA_MASK)+(Ct<<24&He.ALPHA_MASK)):It.curColorMode===He.RGB?ft(Et,Et,Et,yt):It.curColorMode===He.HSB?ft(0,0,Et/It.colorModeX*It.colorModeZ,yt):void 0}function At(Et){let yt=gt.context;if(Et<=yt.colorModeX&&0<=Et){if(yt.curColorMode===He.RGB)return ft(Et,Et,Et,yt.colorModeA);if(curColorMode===He.HSB)return ft(0,0,Et/yt.colorModeX*yt.colorModeZ,yt.colorModeA)}return Et?(2147483647<Et&&(Et-=4294967296),Et):void 0}let St=function(Et,yt,Ct,It){let bt=gt.context;return void 0!==Et&&void 0!==yt&&void 0!==Ct&&void 0!==It?ft(Et,yt,Ct,It):void 0!==Et&&void 0!==yt&&void 0!==Ct?ft(Et,yt,Ct,bt.colorModeA):void 0!==Et&&void 0!==yt?xt(Et,yt):'number'==typeof Et?At(Et):ft(bt.colorModeX,bt.colorModeY,bt.colorModeZ,bt.colorModeA)};St.toString=function(Et){let yt=(Et&He.RED_MASK)>>>16,Ct=(Et&He.GREEN_MASK)>>>8,It=Et&He.BLUE_MASK,bt=((Et&He.ALPHA_MASK)>>>24)/255;return`rgba(${yt},${Ct},${It},${bt})`},St.toInt=function(Et,yt,Ct,It){return It=It<<24&He.ALPHA_MASK,Et=Et<<16&He.RED_MASK,yt=yt<<8&He.GREEN_MASK,Ct=Ct&He.BLUE_MASK,It|Et|yt|Ct},St.toArray=function(Et){let yt=(Et&He.RED_MASK)>>>16,Ct=(Et&He.GREEN_MASK)>>>8,It=Et&He.BLUE_MASK,bt=(Et&He.ALPHA_MASK)>>>24;return[yt,Ct,It,bt]},St.toGLArray=function(Et){let yt=((Et&He.RED_MASK)>>>16)/255,Ct=((Et&He.GREEN_MASK)>>>8)/255,It=(Et&He.BLUE_MASK)/255,bt=((Et&He.ALPHA_MASK)>>>24)/255;return[yt,Ct,It,bt]},St.toRGB=function(Et,yt,Ct){Et=Et>colorModeX?colorModeX:Et,yt=yt>colorModeY?colorModeY:yt,Ct=Ct>colorModeZ?colorModeZ:Ct,Et=360*(Et/colorModeX),yt=100*(yt/colorModeY),Ct=100*(Ct/colorModeZ);var It=Math.round(255*(Ct/100));if(0===yt)return[It,It,It];var bt=Et%360,_t=bt%60,Tt=Math.round(255*(Ct*(100-yt)/1e4)),Ot=Math.round(255*(Ct*(6e3-yt*_t)/6e5)),Pt=Math.round(255*(Ct*(6e3-yt*(60-_t))/6e5));switch(Math.floor(bt/60)){case 0:return[It,Pt,Tt];case 1:return[Ot,It,Tt];case 2:return[Tt,It,Pt];case 3:return[Tt,Ot,It];case 4:return[Pt,Tt,It];case 5:return[It,Tt,Ot];}},gt.color=St}function ie(gt,ft){let xt=0,At=0,St=!0,Et=!1,yt=!1,Ct=60,It=1e3/Ct;return gt.$redrawHelper=function(){let bt=(Date.now()-xt)/1e3;At++;let _t=At/bt;0.5<bt&&(xt=Date.now(),At=0,gt.__frameRate=_t),gt.frameCount++},gt.noLoop=function(){St=!1,Et=!1,clearInterval(yt),ft.onPause()},gt.loop=function(){Et||(xt=Date.now(),At=0,yt=window.setInterval(function(){try{ft.onFrameStart(),gt.redraw(),ft.onFrameEnd()}catch(bt){throw window.clearInterval(yt),bt}},It),St=!0,Et=!0,ft.onLoop())},gt.frameRate=function(bt){Ct=bt,It=1e3/Ct,St&&(gt.noLoop(),gt.loop())},function(){St&&(console.log('kicking off animation'),gt.loop())}}class oe{constructor(gt,ft){this.argument=gt,this.misc=ft}toString(gt){return this.misc.prefix+this.argument.toString(gt)}}class le{constructor(gt,ft){this.name=gt,this.body=ft,ft.owner=this}toString(gt){return'var '+this.name+' = '+this.body.toString(gt)+';\n$p.'+this.name+' = '+this.name+';\n'}}class de{constructor(gt,ft,xt,At,St,Et,yt,Ct,It){var bt,_t;for(this.name=gt,this.baseClassName=ft,this.interfacesNames=xt,this.functions=At,this.methods=St,this.fields=Et,this.cstrs=yt,this.innerClasses=Ct,this.misc=It,(bt=0,_t=Et.length);bt<_t;++bt)Et[bt].owner=this}getMembers(gt,ft,xt){this.owner.base&&this.owner.base.body.getMembers(gt,ft,xt);var At,St,Et,yt;for(At=0,Et=this.fields.length;At<Et;++At){var Ct=this.fields[At].getNames();for(St=0,yt=Ct.length;St<yt;++St)gt[Ct[St]]=this.fields[At]}for(At=0,Et=this.methods.length;At<Et;++At){var It=this.methods[At];ft[It.name]=It}for(At=0,Et=this.innerClasses.length;At<Et;++At){var bt=this.innerClasses[At];xt[bt.name]=bt}}toString(gt){var ft=function(zt){for(var jt=0;zt;)++jt,zt=zt.scope;return jt}(this.owner),xt='$this_'+ft,At=this.name,St='var '+xt+' = this;\n',Et='',yt='',Ct={},It={},bt={};this.getMembers(Ct,It,bt);var _t=gt;_t||(console.error('NO CONTEXT IN AstClassBody.toString'),console.trace()),gt=function(Kt){var zt=Kt.name;return'this'===zt?Kt.callSign||!Kt.member?xt+'.$self':xt:Ct.hasOwnProperty(zt)?Ct[zt].isStatic?At+'.'+zt:xt+'.'+zt:bt.hasOwnProperty(zt)?xt+'.'+zt:It.hasOwnProperty(zt)?It[zt].isStatic?At+'.'+zt:xt+'.$self.'+zt:_t(Kt)};var Tt;this.baseClassName?(Tt=_t({name:this.baseClassName}),St+='var $super = { $upcast: '+xt+' };\n',St+='function $superCstr(){'+Tt+'.apply($super,arguments);if(!(\'$self\' in $super)) $p.extendClassChain($super)}\n',yt+=At+'.$base = '+Tt+';\n'):St+='function $superCstr(){$p.extendClassChain('+xt+')}\n',this.owner.base&&(Et+='$p.extendStaticMembers('+At+', '+Tt+');\n');var Ot,Pt,Rt,Nt;if(this.owner.interfaces){var kt,Mt=[];for(Ot=0,Pt=this.interfacesNames.length;Ot<Pt;++Ot)this.owner.interfaces[Ot]&&(kt=_t({name:this.interfacesNames[Ot]}),Mt.push(kt),Et+='$p.extendInterfaceMembers('+At+', '+kt+');\n');yt+=At+'.$interfaces = ['+O(Mt,gt,', ')+'];\n'}for(0<this.functions.length&&(St+=O(this.functions,gt,'\n')+'\n'),T(this.innerClasses),(Ot=0,Pt=this.innerClasses.length);Ot<Pt;++Ot){var Lt=this.innerClasses[Ot];Lt.isStatic?(Et+=At+'.'+Lt.name+' = '+Lt+';\n',St+=xt+'.'+Lt.name+' = '+At+'.'+Lt.name+';\n'):St+=xt+'.'+Lt.name+' = '+Lt+';\n'}for(Ot=0,Pt=this.fields.length;Ot<Pt;++Ot){var wt=this.fields[Ot];if(wt.isStatic)for(Et+=At+'.'+O(wt.definitions,gt,';\n'+At+'.')+';\n',Rt=0,Nt=wt.definitions.length;Rt<Nt;++Rt){var vt=wt.definitions[Rt].name,Dt=At+'.'+vt;St+='$p.defineProperty('+xt+', \''+vt+'\', {get: function(){return '+Dt+'}, set: function(val){'+Dt+' = val}});\n'}else St+=xt+'.'+O(wt.definitions,gt,';\n'+xt+'.')+';\n'}var Bt={};for(Ot=0,Pt=this.methods.length;Ot<Pt;++Ot){var Ft=this.methods[Ot],$t=Bt[Ft.name],Gt=Ft.name+'$'+Ft.params.params.length,Ht=!!Ft.params.methodArgsParam;$t?(++$t,Gt+='_'+$t):$t=1,Ft.methodId=Gt,Bt[Ft.name]=$t,Ft.isStatic?(Et+=Ft.toString(gt),Et+='$p.addMethod('+At+', \''+Ft.name+'\', '+Gt+', '+Ht+');\n',St+='$p.addMethod('+xt+', \''+Ft.name+'\', '+Gt+', '+Ht+');\n'):(St+=Ft.toString(gt),St+='$p.addMethod('+xt+', \''+Ft.name+'\', '+Gt+', '+Ht+');\n')}St+=E(this.misc.tail),0<this.cstrs.length&&(St+=O(this.cstrs,gt,'\n')+'\n'),St+='function $constr() {\n';var Xt=[];for(Ot=0,Pt=this.cstrs.length;Ot<Pt;++Ot){var Vt=this.cstrs[Ot].params.params.length,Ut=!!this.cstrs[Ot].params.methodArgsParam;Xt.push('if(arguments.length '+(Ut?'>=':'===')+' '+Vt+') { $constr_'+Vt+'.apply('+xt+', arguments); }')}return 0<Xt.length&&(St+=O(Xt,gt,' else ')+' else '),St+='$superCstr();\n}\n',St+='$constr.apply(null, arguments);\n','(function() {\nfunction '+At+'() {\n'+St+'}\n'+Et+yt+'return '+At+';\n})()'}}class ce{constructor(gt,ft,xt){this.definitions=gt,this.fieldType=ft,this.isStatic=xt}getNames(){var gt=[];for(var ft=0,xt=this.definitions.length;ft<xt;++ft)gt.push(this.definitions[ft].name);return gt}toString(gt){var ft=gt({name:'[this]'});if(this.isStatic){var xt=this.owner.name,At=[];for(var St=0,Et=this.definitions.length;St<Et;++St){var yt=this.definitions[St],Ct=yt.name,It=xt+'.'+Ct,bt='if('+It+' === void(0)) {\n '+It+' = '+yt.value+'; }\n$p.defineProperty('+ft+', \''+Ct+'\', { get: function(){return '+It+';}, set: function(val){'+It+' = val;} });\n';At.push(bt)}return O(At,gt,'')}return ft+'.'+O(this.definitions,gt,'; '+ft+'.')}}class ue{constructor(gt,ft,xt,At){this.name=gt,this.params=ft,this.body=xt,this.isStatic=At}toString(gt){var ft=P({},this.params.getNames()),xt=gt;xt||(console.error('NO CONTEXT IN AstClassMethod.toString'),console.trace()),gt=function(Et){return ft.hasOwnProperty(Et.name)?Et.name:xt(Et)};var At=this.params.prependMethodArgs(this.body.toString(gt)),St='function '+this.methodId+this.params.toString(gt)+' '+At+'\n';return St}}class me{constructor(gt,ft){this.params=gt,this.body=ft}toString(gt){var ft=appendToLookupTable({},this.params.getNames()),xt=gt;xt||(console.error('NO CONTEXT IN AstConstructor.toString'),console.trace()),gt=function(Et){return ft.hasOwnProperty(Et.name)?Et.name:xt(Et)};var At='function $constr_'+this.params.params.length+this.params.toString(),St=this.params.prependMethodArgs(this.body.toString());return /\$(superCstr|constr)\b/.test(St)||(St='{\n$superCstr();\n'+St.substring(1)),At+St+'\n'}}class he{constructor(gt,ft){this.expr=gt,this.transforms=ft}toString(gt){var ft=this.transforms,xt=R(this.expr,gt);return xt.replace(/"!(\d+)"/g,(At,St)=>ft[St].toString(gt))}}class pe{constructor(gt,ft){this.initStatement=gt,this.container=ft}toString(){var gt=this.initStatement.toString(),ft='$it'+pe.iteratorId++,xt=gt.replace(/^\s*var\s*/,'').split('=')[0],At='var '+ft+' = new $p.ObjectIterator('+this.container+'), '+xt+' = void(0)';return'('+At+'; '+(ft+'.hasNext() && (('+xt+' = '+ft+'.next()) || true);)')}}pe.iteratorId=0;class ge{constructor(gt,ft,xt){this.initStatement=gt,this.condition=ft,this.step=xt}toString(){return'('+this.initStatement+'; '+this.condition+'; '+this.step+')'}}class fe{constructor(gt,ft){this.initStatement=gt,this.container=ft}toString(){var gt=this.initStatement.toString();return 0<=gt.indexOf('=')&&(gt=gt.substring(0,gt.indexOf('='))),'('+gt+' in '+this.container+')'}}class xe{constructor(gt,ft){this.argument=gt,this.misc=ft}toString(){return this.misc.prefix+this.argument.toString()}}class Ae{constructor(gt,ft,xt){this.name=gt,this.params=ft,this.body=xt}toString(gt){var ft=gt;ft||(console.error('NO CONTEXT IN AstFunction.toString'),console.trace());var xt=appendToLookupTable({'this':null},this.params.getNames());gt=function(Et){return xt.hasOwnProperty(Et.name)?Et.name:ft(Et)};var At='function';this.name&&(At+=' '+this.name);var St=this.params.prependMethodArgs(this.body.toString());return At+=this.params+' '+St,At}}class Se{constructor(gt,ft){this.baseInterfaceName=gt,this.body=ft,ft.owner=this}toString(){return'new ('+this.body+')'}}class Ee{constructor(gt){this.members=gt}toString(gt){var ft=gt;ft||(console.error('NO CONTEXT IN AstInlineObject.toString'),console.trace()),gt=function(Et){return'this'===Et.name?'this':ft(Et)};var xt='';for(var At=0,St=this.members.length;At<St;++At)this.members[At].label&&(xt+=this.members[At].label+': '),xt+=this.members[At].value.toString(gt)+', ';return xt.substring(0,xt.length-2)}}class ye{constructor(gt,ft,xt){this.name=gt,this.body=ft,this.isStatic=xt,ft.owner=this}toString(){return''+this.body}}class Ce{constructor(gt,ft,xt){this.name=gt,this.body=ft,this.isStatic=xt,ft.owner=this}toString(){return''+this.body}}class Ie{constructor(gt,ft){this.name=gt,this.body=ft,ft.owner=this}toString(){return'var '+this.name+' = '+this.body+';\n$p.'+this.name+' = '+this.name+';\n'}}class be{constructor(gt,ft,xt,At,St,Et){var yt,Ct;for(this.name=gt,this.interfacesNames=ft,this.methodsNames=xt,this.fields=At,this.innerClasses=St,this.misc=Et,(yt=0,Ct=At.length);yt<Ct;++yt)At[yt].owner=this}getMembers(gt,ft,xt){this.owner.base&&this.owner.base.body.getMembers(gt,ft,xt);var At,St,Et,yt;for(At=0,Et=this.fields.length;At<Et;++At){var Ct=this.fields[At].getNames();for(St=0,yt=Ct.length;St<yt;++St)gt[Ct[St]]=this.fields[At]}for(At=0,Et=this.methodsNames.length;At<Et;++At){var It=this.methodsNames[At];ft[It]=!0}for(At=0,Et=this.innerClasses.length;At<Et;++At){var bt=this.innerClasses[At];xt[bt.name]=bt}}toString(gt){(function(Tt){for(var Ot=0;Tt;)++Ot,Tt=Tt.scope;return Ot})(this.owner);var ft=this.name,xt='',At='';this.getMembers({},{},{});var St,Et;if(this.owner.interfaces){var Ct,yt=[];for(St=0,Et=this.interfacesNames.length;St<Et;++St)this.owner.interfaces[St]&&(Ct=gt({name:this.interfacesNames[St]}),yt.push(Ct),xt+='$p.extendInterfaceMembers('+ft+', '+Ct+');\n');At+=ft+'.$interfaces = ['+O(yt,gt,', ')+'];\n'}for(At+=ft+'.$isInterface = true;\n',At+=ft+'.$methods = [\''+O(this.methodsNames,gt,'\', \'')+'\'];\n',sortByWeight(this.innerClasses),(St=0,Et=this.innerClasses.length);St<Et;++St){var It=this.innerClasses[St];It.isStatic&&(xt+=ft+'.'+It.name+' = '+It+';\n')}for(St=0,Et=this.fields.length;St<Et;++St){var bt=this.fields[St];bt.isStatic&&(xt+=ft+'.'+O(bt.definitions,gt,';\n'+ft+'.')+';\n')}return'(function() {\nfunction '+ft+'() { throw \'Unable to create the interface\'; }\n'+xt+At+'return '+ft+';\n})()'}}class _e{constructor(gt){this.label=gt}toString(){return this.label}}class Te{constructor(gt,ft,xt){this.name=gt,this.params=ft,this.body=xt}toString(gt){var ft=P({},this.params.getNames()),xt=gt;xt||(console.error('NO CONTEXT IN AstMethod.toString'),console.trace()),gt=function(St){return ft.hasOwnProperty(St.name)?St.name:xt(St)};var At=this.body.toString(gt);return At=this.params.prependMethodArgs(At),'function '+this.name+this.params+' '+At+'\n$p.'+this.name+' = '+this.name+';\n'+this.name+' = '+this.name+'.bind($p);'}}class Oe{constructor(gt){this.name=gt}toString(){return this.name}}class Pe{constructor(gt,ft){this.params=gt,this.methodArgsParam=ft}getNames(){var gt=[];for(var ft=0,xt=this.params.length;ft<xt;++ft)gt.push(this.params[ft].name);return gt}prependMethodArgs(gt){return this.methodArgsParam?'{\nvar '+this.methodArgsParam.name+' = Array.prototype.slice.call(arguments, '+this.params.length+');\n'+gt.substring(1):gt}toString(){if(0===this.params.length)return'()';var gt='(';for(var ft=0,xt=this.params.length;ft<xt;++ft)gt+=this.params[ft]+', ';return gt.substring(0,gt.length-2)+')'}}class Re{constructor(gt,ft,xt){this.name=gt,this.argument=ft,this.misc=xt}toString(gt){var ft=this.misc.prefix;return void 0!==this.argument&&(ft+=this.argument.toString(gt)),ft}}class Ne{constructor(gt){this.expression=gt}toString(gt){return this.expression.toString(gt)}}class Me{constructor(gt,ft){this.definitions=gt,this.varType=ft}getNames(){var gt=[];for(var ft=0,xt=this.definitions.length;ft<xt;++ft)gt.push(this.definitions[ft].name);return gt}toString(gt){return'var '+O(this.definitions,gt,',')}}class ke{constructor(gt){this.statements=gt}toString(gt){var ft=N(this.statements),xt=gt;return xt||(console.error('NO CONTEXT IN AstStatementsBlock.toString'),console.trace()),M(ft)||(gt=function(At){return ft.hasOwnProperty(At.name)?At.name:xt(At)}),'{\n'+O(this.statements,gt,'')+'\n}'}}class Le{constructor(gt){this.expr=gt}toString(gt){return'case '+this.expr.toString(gt)+':'}}class we{constructor(gt,ft,xt){this.name=gt,this.value=ft,this.isDefault=xt}toString(gt){return this.name+' = '+this.value.toString(gt)}}class ve{constructor(gt){this.atoms=gt,this.replaceContext,this.declaredClasses={},this.currentClassId,this.classIdSeed=0,this.classesRegex=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)(class|interface)\s+([A-Za-z_$][\w$]*\b)(\s+extends\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?(\s+implements\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*\b)*)?\s*("A\d+")/g,this.methodsRegex=/\b((?:(?:public|private|final|protected|static|abstract|synchronized)\s+)*)((?!(?:else|new|return|throw|function|public|private|protected)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+"|;)/g,this.fieldTest=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:else|new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*([A-Za-z_$][\w$]*\b)\s*(?:"C\d+"\s*)*([=,]|$)/,this.cstrsRegex=/\b((?:(?:public|private|final|protected|static|abstract)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b)\s*("B\d+")(\s*throws\s+[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*,\s*[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)*)?\s*("A\d+")/g,this.attrAndTypeRegex=/^((?:(?:public|private|final|protected|static)\s+)*)((?!(?:new|return|throw)\b)[A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*(?:\s*"C\d+")*)\s*/,this.functionsRegex=/\bfunction(?:\s+([A-Za-z_$][\w$]*))?\s*("B\d+")\s*("A\d+")/g}generateClassId(){return'class'+ ++this.classIdSeed}appendClass(gt,ft,xt){gt.classId=ft,gt.scopeId=xt,this.declaredClasses[ft]=gt}getDefaultValueForType(gt){return'int'===gt||'float'===gt?'0':'boolean'===gt?'false':'color'===gt?'0x00000000':'null'}addAtom(gt,ft){let xt=this.atoms,At=xt.length;return xt.push(gt),'"'+ft+At+'"'}transformParams(gt){let ft=E(gt.substring(1,gt.length-1)),xt=[],At=null;if(''!==ft){let St=ft.split(',');for(let Et=0;Et<St.length;++Et){let yt=/\b([A-Za-z_$][\w$]*\b)(\s*"[ABC][\d]*")*\s*$/.exec(St[Et]);if(Et===St.length-1&&0<=St[Et].indexOf('...')){At=new Oe(yt[1]);break}xt.push(new Oe(yt[1]))}}return new Pe(xt,At)}transformInlineClass(gt){let ft=/\bnew\s*([A-Za-z_$][\w$]*\s*(?:\.\s*[A-Za-z_$][\w$]*)*)\s*"B\d+"\s*"A(\d+)"/,xt=new RegExp(ft).exec(gt),At=this.currentClassId,St=this.generateClassId();this.currentClassId=St;let Et=xt[1]+'$'+St,yt=new Se(Et,this.transformClassBody(atoms[xt[2]],Et,'','implements '+xt[1]));return this.appendClass(yt,St,At),this.currentClassId=At,yt}transformFunction(gt){let ft=/\b([A-Za-z_$][\w$]*)\s*"B(\d+)"\s*"A(\d+)"/,xt=new RegExp(ft).exec(gt),At=this.atoms;return new Ae('function'===xt[1]?null:xt[1],this.transformParams(At[xt[2]]),this.transformStatementsBlock(At[xt[3]]))}transformInlineObject(gt){let ft=gt.split(',');for(let xt=0;xt<ft.length;++xt){let At=ft[xt].indexOf(':');ft[xt]=0>At?{value:this.transformExpression(ft[xt])}:{label:E(ft[xt].substring(0,At)),value:this.transformExpression(E(ft[xt].substring(At+1)))}}return new Ee(ft)}expandExpression(gt){if('('===gt.charAt(0)||'['===gt.charAt(0))return gt.charAt(0)+this.expandExpression(gt.substring(1,gt.length-1))+gt.charAt(gt.length-1);if('{'===gt.charAt(0))return /^\{\s*(?:[A-Za-z_$][\w$]*|'\d+')\s*:/.test(gt)?'{'+this.addAtom(gt.substring(1,gt.length-1),'I')+'}':'['+this.expandExpression(gt.substring(1,gt.length-1))+']';let ft=S(gt),xt=C(this,ft.middle),At=this.atoms;return xt=xt.replace(/"[ABC](\d+)"/g,(St,Et)=>this.expandExpression(At[Et])),ft.untrim(xt)}transformExpression(gt){let ft=[],xt=this.atoms,At=this.expandExpression(gt);return At=At.replace(/"H(\d+)"/g,(St,Et)=>{return ft.push(this.transformFunction(xt[Et])),'"!'+(ft.length-1)+'"'}),At=At.replace(/"F(\d+)"/g,(St,Et)=>{return ft.push(this.transformInlineClass(xt[Et])),'"!'+(ft.length-1)+'"'}),At=At.replace(/"I(\d+)"/g,(St,Et)=>{return ft.push(this.transformInlineObject(xt[Et])),'"!'+(ft.length-1)+'"'}),new he(At,ft)}transformVarDefinition(gt,ft){let At,St,Et,xt=gt.indexOf('=');return 0>xt?(At=gt,St=ft,Et=!0):(At=gt.substring(0,xt),St=this.transformExpression(gt.substring(xt+1)),Et=!1),new we(E(At.replace(/(\s*"C\d+")+/g,'')),St,Et)}transformStatement(gt){if(this.fieldTest.test(gt)){let ft=this.attrAndTypeRegex.exec(gt),xt=gt.substring(ft[0].length).split(','),At=this.getDefaultValueForType(ft[2]);for(let St=0;St<xt.length;++St)xt[St]=this.transformVarDefinition(xt[St],At);return new Me(xt,ft[2])}return new Ne(this.transformExpression(gt))}transformForExpression(gt){let ft;return /\bin\b/.test(gt)?(ft=gt.substring(1,gt.length-1).split(/\bin\b/g),new fe(this.transformStatement(E(ft[0])),this.transformExpression(ft[1]))):0<=gt.indexOf(':')&&0>gt.indexOf(';')?(ft=gt.substring(1,gt.length-1).split(':'),new pe(this.transformStatement(E(ft[0])),this.transformExpression(ft[1]))):(ft=gt.substring(1,gt.length-1).split(';'),new ge(this.transformStatement(E(ft[0])),this.transformExpression(ft[1]),this.transformExpression(ft[2])))}transformInnerClass(gt){let ft=this.atoms,xt=this.classesRegex.exec(gt);this.classesRegex.lastIndex=0;let Et,At=0<=xt[1].indexOf('static'),St=ft[_(xt[6])],yt=this.currentClassId,Ct=this.generateClassId();return this.currentClassId=Ct,Et='interface'===xt[2]?new Ce(xt[3],this.transformInterfaceBody(St,xt[3],xt[4]),At):new ye(xt[3],this.transformClassBody(St,xt[3],xt[4],xt[5]),At),this.appendClass(Et,Ct,yt),this.currentClassId=yt,Et}transformClassMethod(gt){let ft=this.atoms,xt=this.methodsRegex.exec(gt);this.methodsRegex.lastIndex=0;let At=0<=xt[1].indexOf('static'),St=';'===xt[6]?'{}':ft[_(xt[6])];return new ue(xt[3],this.transformParams(ft[_(xt[4])]),this.transformStatementsBlock(St),At)}transformClassField(gt){let ft=this.attrAndTypeRegex.exec(gt),xt=0<=ft[1].indexOf('static'),At=gt.substring(ft[0].length).split(/,\s*/g),St=this.getDefaultValueForType(ft[2]);for(let Et=0;Et<At.length;++Et)At[Et]=this.transformVarDefinition(At[Et],St);return new ce(At,ft[2],xt)}extractConstructors(gt,ft){let xt=gt.replace(this.cstrsRegex,(At,St,Et)=>{return Et===ft?this.addAtom(At,'G'):At});return xt}transformConstructor(gt){let ft=this.atoms,xt=new RegExp(/"B(\d+)"\s*"A(\d+)"/).exec(gt),At=this.transformParams(ft[xt[1]]);return new me(At,this.transformStatementsBlock(ft[xt[2]]))}extractClassesAndMethods(gt){let ft=gt;return ft=ft.replace(this.classesRegex,xt=>this.addAtom(xt,'E')),ft=ft.replace(this.methodsRegex,xt=>this.addAtom(xt,'D')),ft=ft.replace(this.functionsRegex,xt=>this.addAtom(xt,'H')),ft}transformInterfaceBody(gt,ft,xt){let At=this.atoms,St=gt.substring(1,gt.length-1);St=this.extractClassesAndMethods(St),St=this.extractConstructors(St,ft);let Et=[],yt=[];St=St.replace(/"([DE])(\d+)"/g,(Ot,Pt,Rt)=>{return'D'===Pt?Et.push(Rt):'E'==Pt&&yt.push(Rt),''});let Ct=St.split(/;(?:\s*;)*/g),It,bt,_t;if(xt!==void 0){let Ot=/^\s*extends\s+(.+?)\s*$/g;It=xt.replace(Ot,'$1').split(/\s*,\s*/g)}for(bt=0,_t=Et.length;bt<_t;++bt){let Ot=this.transformClassMethod(At[Et[bt]]);Et[bt]=Ot.name}for(bt=0,_t=Ct.length-1;bt<_t;++bt){let Ot=S(Ct[bt]);Ct[bt]=this.transformClassField(Ot.middle)}let Tt=Ct.pop();for(bt=0,_t=yt.length;bt<_t;++bt)yt[bt]=this.transformInnerClass(At[yt[bt]]);return new be(ft,It,Et,Ct,yt,{tail:Tt})}transformClassBody(gt,ft,xt,At){let St=this.atoms,Et=gt.substring(1,gt.length-1);Et=this.extractClassesAndMethods(Et),Et=this.extractConstructors(Et,ft);let yt=[],Ct=[],It=[],bt=[],_t=/"([DEGH])(\d+)"/g;Et=Et.replace(_t,(Mt,kt,Lt)=>{return'D'===kt?yt.push(Lt):'E'===kt?Ct.push(Lt):'H'===kt?bt.push(Lt):It.push(Lt),''});let Tt=Et.replace(/^(?:\s*;)+/,'').split(/;(?:\s*;)*/g),Ot,Pt,Rt;for(void 0!==xt&&(Ot=xt.replace(/^\s*extends\s+([A-Za-z_$][\w$]*\b(?:\s*\.\s*[A-Za-z_$][\w$]*\b)*)\s*$/g,'$1')),void 0!==At&&(Pt=At.replace(/^\s*implements\s+(.+?)\s*$/g,'$1').split(/\s*,\s*/g)),Rt=0;Rt<bt.length;++Rt)bt[Rt]=this.transformFunction(St[bt[Rt]]);for(Rt=0;Rt<yt.length;++Rt)yt[Rt]=this.transformClassMethod(St[yt[Rt]]);for(Rt=0;Rt<Tt.length-1;++Rt){let Mt=S(Tt[Rt]);Tt[Rt]=this.transformClassField(Mt.middle)}let Nt=Tt.pop();for(Rt=0;Rt<It.length;++Rt)It[Rt]=this.transformConstructor(St[It[Rt]]);for(Rt=0;Rt<Ct.length;++Rt)Ct[Rt]=this.transformInnerClass(St[Ct[Rt]]);return new de(ft,Ot,Pt,bt,yt,Tt,It,Ct,{tail:Nt})}transformGlobalClass(gt){let ft=this.classesRegex.exec(gt);this.classesRegex.lastIndex=0,this.atoms;let xt=this.atoms[_(ft[6])],At=this.currentClassId,St=this.generateClassId();this.currentClassId=St;let Et;return Et='interface'===ft[2]?new Ie(ft[3],this.transformInterfaceBody(xt,ft[3],ft[4])):new le(ft[3],this.transformClassBody(xt,ft[3],ft[4],ft[5])),this.appendClass(Et,St,At),this.currentClassId=At,Et}transformGlobalMethod(gt){let ft=this.atoms,xt=this.methodsRegex.exec(gt);return this.methodsRegex.lastIndex=0,new Te(xt[3],this.transformParams(ft[_(xt[4])]),this.transformStatementsBlock(ft[_(xt[6])]))}transformStatements(gt){let ft=new RegExp(/\b(catch|for|if|switch|while|with)\s*"B(\d+)"|\b(do|else|finally|return|throw|try|break|continue)\b|("[ADEH](\d+)")|\b(case)\s+([^:]+):|\b([A-Za-z_$][\w$]*\s*:)|(;)/g),xt=this.atoms,At=[];gt=I(gt);let Et,yt,St=0;for(;null!==(Et=ft.exec(gt));){if(void 0!==Et[1]){let It=gt.lastIndexOf('"B',ft.lastIndex),bt=gt.substring(St,It);'for'===Et[1]?At.push(new xe(this.transformForExpression(xt[Et[2]]),{prefix:bt})):'catch'===Et[1]?At.push(new oe(this.transformParams(xt[Et[2]]),{prefix:bt})):At.push(new Re(Et[1],this.transformExpression(xt[Et[2]]),{prefix:bt}))}else if(void 0!==Et[3])At.push(new Re(Et[3],void 0,{prefix:gt.substring(St,ft.lastIndex)}));else if(void 0!==Et[4]){if(yt=gt.substring(St,ft.lastIndex-Et[4].length),0!==E(yt).length)continue;At.push(yt);let It=Et[4].charAt(1),bt=Et[5];'D'===It?At.push(this.transformGlobalMethod(xt[bt])):'E'===It?At.push(this.transformGlobalClass(xt[bt])):'H'===It?At.push(this.transformFunction(xt[bt])):At.push(this.transformStatementsBlock(xt[bt]))}else if(void 0!==Et[6])At.push(new Le(this.transformExpression(E(Et[7]))));else if(void 0!==Et[8]){if(yt=gt.substring(St,ft.lastIndex-Et[8].length),0!==E(yt).length)continue;At.push(new _e(gt.substring(St,ft.lastIndex)))}else{let It=S(gt.substring(St,ft.lastIndex-1));At.push(It.left),At.push(this.transformStatement(It.middle)),At.push(It.right+';')}St=ft.lastIndex}let Ct=S(gt.substring(St));return At.push(Ct.left),''!==Ct.middle&&(At.push(this.transformStatement(Ct.middle)),At.push(';'+Ct.right)),At}transformStatementsBlock(gt){let ft=S(gt.substring(1,gt.length-1));return new ke(this.transformStatements(ft.middle))}}const De=['size','redraw','background','alpha','fill','stroke','line','textFont','rotate','translate'];var Be=De.concat(['abs','acos','ambient','ambientLight','append','applyMatrix','arc','arrayCopy','asin','atan','atan2','beginCamera','beginDraw','beginShape','bezier','bezierDetail','bezierPoint','bezierTangent','bezierVertex','binary','blend','blendColor','blit_resize','blue','box','breakShape','brightness','camera','ceil','Character','color','colorMode','concat','constrain','copy','cos','createFont','createGraphics','createImage','cursor','curve','curveDetail','curvePoint','curveTangent','curveTightness','curveVertex','day','degrees','directionalLight','disableContextMenu','dist','draw','ellipse','ellipseMode','emissive','enableContextMenu','endCamera','endDraw','endShape','exit','exp','expand','externals','filter','floor','focused','frameCount','frameRate','frustum','get','glyphLook','glyphTable','green','height','hex','hint','hour','hue','image','imageMode','intersect','join','key','keyCode','keyPressed','keyReleased','keyTyped','lerp','lerpColor','lightFalloff','lights','lightSpecular','link','loadBytes','loadFont','loadGlyphs','loadImage','loadPixels','loadShape','loadXML','loadStrings','log','loop','mag','map','match','matchAll','max','millis','min','minute','mix','modelX','modelY','modelZ','modes','month','mouseButton','mouseClicked','mouseDragged','mouseMoved','mouseOut','mouseOver','mousePressed','mouseReleased','mouseScroll','mouseScrolled','mouseX','mouseY','name','nf','nfc','nfp','nfs','noCursor','noFill','noise','noiseDetail','noiseSeed','noLights','noLoop','norm','normal','noSmooth','noStroke','noTint','ortho','param','parseBoolean','parseByte','parseChar','parseFloat','parseInt','parseXML','peg','perspective','PImage','pixels','PMatrix2D','PMatrix3D','PMatrixStack','pmouseX','pmouseY','point','pointLight','popMatrix','popStyle','pow','print','printCamera','println','printMatrix','printProjection','PShape','PShapeSVG','pushMatrix','pushStyle','quad','radians','random','randomGaussian','randomSeed','rect','rectMode','red','redraw','requestImage','resetMatrix','reverse','rotateX','rotateY','rotateZ','round','saturation','save','saveFrame','saveStrings','scale','screenX','screenY','screenZ','second','set','setup','shape','shapeMode','shared','shearX','shearY','shininess','shorten','sin','smooth','sort','specular','sphere','sphereDetail','splice','split','splitTokens','spotLight','sq','sqrt','status','str','strokeCap','strokeJoin','strokeWeight','subset','tan','text','textAlign','textAscent','textDescent','textLeading','textMode','textSize','texture','textureMode','textWidth','tint','toImageData','touchCancel','touchEnd','touchMove','touchStart','translate','transform','triangle','trim','unbinary','unhex','updatePixels','use3DContext','vertex','width','XMLElement','XML','year','__contains','__equals','__equalsIgnoreCase','__frameRate','__hashCode','__int_cast','__instanceof','__keyPressed','__mousePressed','__printStackTrace','__replace','__replaceAll','__replaceFirst','__toCharArray','__split','__codePointAt','__startsWith','__endsWith','__matches']),Fe={},$e,Ge;for($e=0,Ge=Be.length;$e<Ge;++$e)Fe[Be[$e]]=null;const He={X:0,Y:1,Z:2,R:3,G:4,B:5,A:6,U:7,V:8,NX:9,NY:10,NZ:11,EDGE:12,SR:13,SG:14,SB:15,SA:16,SW:17,TX:18,TY:19,TZ:20,VX:21,VY:22,VZ:23,VW:24,AR:25,AG:26,AB:27,DR:3,DG:4,DB:5,DA:6,SPR:28,SPG:29,SPB:30,SHINE:31,ER:32,EG:33,EB:34,BEEN_LIT:35,VERTEX_FIELD_COUNT:36,P2D:1,JAVA2D:1,WEBGL:2,P3D:2,OPENGL:2,PDF:0,DXF:0,OTHER:0,WINDOWS:1,MAXOSX:2,LINUX:3,EPSILON:1e-4,MAX_FLOAT:3.4028235e38,MIN_FLOAT:-3.4028235e38,MAX_INT:2147483647,MIN_INT:-2147483648,PI:Math.PI,TWO_PI:2*Math.PI,TAU:2*Math.PI,HALF_PI:Math.PI/2,THIRD_PI:Math.PI/3,QUARTER_PI:Math.PI/4,DEG_TO_RAD:Math.PI/180,RAD_TO_DEG:180/Math.PI,WHITESPACE:' \t\n\r\f\xA0',RGB:1,ARGB:2,HSB:3,ALPHA:4,CMYK:5,TIFF:0,TARGA:1,JPEG:2,GIF:3,BLUR:11,GRAY:12,INVERT:13,OPAQUE:14,POSTERIZE:15,THRESHOLD:16,ERODE:17,DILATE:18,REPLACE:0,BLEND:1,ADD:2,SUBTRACT:4,LIGHTEST:8,DARKEST:16,DIFFERENCE:32,EXCLUSION:64,MULTIPLY:128,SCREEN:256,OVERLAY:512,HARD_LIGHT:1024,SOFT_LIGHT:2048,DODGE:4096,BURN:8192,ALPHA_MASK:4278190080,RED_MASK:16711680,GREEN_MASK:65280,BLUE_MASK:255,CUSTOM:0,ORTHOGRAPHIC:2,PERSPECTIVE:3,POINT:2,POINTS:2,LINE:4,LINES:4,TRIANGLE:8,TRIANGLES:9,TRIANGLE_STRIP:10,TRIANGLE_FAN:11,QUAD:16,QUADS:16,QUAD_STRIP:17,POLYGON:20,PATH:21,RECT:30,ELLIPSE:31,ARC:32,SPHERE:40,BOX:41,CHORD:2,PIE:3,GROUP:0,PRIMITIVE:1,GEOMETRY:3,VERTEX:0,BEZIER_VERTEX:1,CURVE_VERTEX:2,BREAK:3,CLOSESHAPE:4,OPEN:1,CLOSE:2,CORNER:0,CORNERS:1,RADIUS:2,CENTER_RADIUS:2,CENTER:3,DIAMETER:3,CENTER_DIAMETER:3,BASELINE:0,TOP:101,BOTTOM:102,NORMAL:1,NORMALIZED:1,IMAGE:2,MODEL:4,SHAPE:5,SQUARE:'butt',ROUND:'round',PROJECT:'square',MITER:'miter',BEVEL:'bevel',AMBIENT:0,DIRECTIONAL:1,SPOT:3,BACKSPACE:8,TAB:9,ENTER:10,RETURN:13,ESC:27,DELETE:127,CODED:65535,SHIFT:16,CONTROL:17,ALT:18,CAPSLK:20,PGUP:33,PGDN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLK:144,META:157,INSERT:155,ARROW:'default',CROSS:'crosshair',HAND:'pointer',MOVE:'move',TEXT:'text',WAIT:'wait',NOCURSOR:'url(\'data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw==\'), auto',DISABLE_OPENGL_2X_SMOOTH:1,ENABLE_OPENGL_2X_SMOOTH:-1,ENABLE_OPENGL_4X_SMOOTH:2,ENABLE_NATIVE_FONTS:3,DISABLE_DEPTH_TEST:4,ENABLE_DEPTH_TEST:-4,ENABLE_DEPTH_SORT:5,DISABLE_DEPTH_SORT:-5,DISABLE_OPENGL_ERROR_REPORT:6,ENABLE_OPENGL_ERROR_REPORT:-6,ENABLE_ACCURATE_TEXTURES:7,DISABLE_ACCURATE_TEXTURES:-7,HINT_COUNT:10,SINCOS_LENGTH:720,PRECISIONB:15,PRECISIONF:32768,PREC_MAXVAL:32767,PREC_ALPHA_SHIFT:9,PREC_RED_SHIFT:1,NORMAL_MODE_AUTO:0,NORMAL_MODE_SHAPE:1,NORMAL_MODE_VERTEX:2,MAX_LIGHTS:8};class Xe{constructor(){0===arguments.length?this.reset():1===arguments.length&&arguments[0]instanceof Xe?this.set(arguments[0].array()):6===arguments.length&&this.set(arguments[0],arguments[1],arguments[2],arguments[3],arguments[4],arguments[5])}reset(){this.set([1,0,0,0,1,0])}set(){if(6===arguments.length){var gt=arguments;this.set([gt[0],gt[1],gt[2],gt[3],gt[4],gt[5]])}else 1===arguments.length&&arguments[0]instanceof Xe?this.elements=arguments[0].array():1===arguments.length&&arguments[0]instanceof Array&&(this.elements=arguments[0].slice())}get(){var gt=new Xe;return gt.set(this.elements),gt}array(){return this.elements.slice()}translate(gt,ft){this.elements[2]=gt*this.elements[0]+ft*this.elements[1]+this.elements[2],this.elements[5]=gt*this.elements[3]+ft*this.elements[4]+this.elements[5]}invTranslate(gt,ft){this.translate(-gt,-ft)}transpose(){}mult(gt,ft){var xt,At;return gt instanceof PVector?(xt=gt.x,At=gt.y,!ft&&(ft=new PVector)):gt instanceof Array&&(xt=gt[0],At=gt[1],!ft&&(ft=[])),ft instanceof Array?(ft[0]=this.elements[0]*xt+this.elements[1]*At+this.elements[2],ft[1]=this.elements[3]*xt+this.elements[4]*At+this.elements[5]):ft instanceof PVector&&(ft.x=this.elements[0]*xt+this.elements[1]*At+this.elements[2],ft.y=this.elements[3]*xt+this.elements[4]*At+this.elements[5],ft.z=0),ft}multX(gt,ft){return gt*this.elements[0]+ft*this.elements[1]+this.elements[2]}multY(gt,ft){return gt*this.elements[3]+ft*this.elements[4]+this.elements[5]}skewX(gt){this.apply(1,0,1,gt,0,0)}skewY(gt){this.apply(1,0,1,0,gt,0)}shearX(gt){this.apply(1,0,1,Math.tan(gt),0,0)}shearY(gt){this.apply(1,0,1,0,Math.tan(gt),0)}determinant(){return this.elements[0]*this.elements[4]-this.elements[1]*this.elements[3]}invert(){var gt=this.determinant();if(Math.abs(gt)>PConstants.MIN_INT){var ft=this.elements[0],xt=this.elements[1],At=this.elements[2],St=this.elements[3],Et=this.elements[4],yt=this.elements[5];return this.elements[0]=Et/gt,this.elements[3]=-St/gt,this.elements[1]=-xt/gt,this.elements[4]=ft/gt,this.elements[2]=(xt*yt-Et*At)/gt,this.elements[5]=(St*At-ft*yt)/gt,!0}return!1}scale(gt,ft){gt&&!ft&&(ft=gt),gt&&ft&&(this.elements[0]*=gt,this.elements[1]*=ft,this.elements[3]*=gt,this.elements[4]*=ft)}invScale(gt,ft){gt&&!ft&&(ft=gt),this.scale(1/gt,1/ft)}apply(){var gt;1===arguments.length&&arguments[0]instanceof Xe?gt=arguments[0].array():6===arguments.length?gt=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(gt=arguments[0]);var ft=[0,0,this.elements[2],0,0,this.elements[5]],xt=0;for(var At=0;2>At;At++)for(var St=0;3>St;St++,xt++)ft[xt]+=this.elements[3*At+0]*gt[St+0]+this.elements[3*At+1]*gt[St+3];this.elements=ft.slice()}preApply(){var gt;1===arguments.length&&arguments[0]instanceof Xe?gt=arguments[0].array():6===arguments.length?gt=Array.prototype.slice.call(arguments):1===arguments.length&&arguments[0]instanceof Array&&(gt=arguments[0]);var ft=[0,0,gt[2],0,0,gt[5]];ft[2]=gt[2]+this.elements[2]*gt[0]+this.elements[5]*gt[1],ft[5]=gt[5]+this.elements[2]*gt[3]+this.elements[5]*gt[4],ft[0]=this.elements[0]*gt[0]+this.elements[3]*gt[1],ft[3]=this.elements[0]*gt[3]+this.elements[3]*gt[4],ft[1]=this.elements[1]*gt[0]+this.elements[4]*gt[1],ft[4]=this.elements[1]*gt[3]+this.elements[4]*gt[4],this.elements=ft.slice()}rotate(gt){var ft=Math.cos(gt),xt=Math.sin(gt),At=this.elements[0],St=this.elements[1];this.elements[0]=ft*At+xt*St,this.elements[1]=-xt*At+ft*St,At=this.elements[3],St=this.elements[4],this.elements[3]=ft*At+xt*St,this.elements[4]=-xt*At+ft*St}rotateZ(gt){this.rotate(gt)}invRotateZ(gt){this.rotateZ(gt-Math.PI)}print(){var gt=printMatrixHelper(this.elements),ft=''+p.nfs(this.elements[0],gt,4)+' '+p.nfs(this.elements[1],gt,4)+' '+p.nfs(this.elements[2],gt,4)+'\n'+p.nfs(this.elements[3],gt,4)+' '+p.nfs(this.elements[4],gt,4)+' '+p.nfs(this.elements[5],gt,4)+'\n\n';p.println(ft)}}class Ve{constructor(gt){this.stackType=gt,this.matrixStack=[]}load(){let gt=this.stackType.$newPMatrix();1===arguments.length?gt.set(arguments[0]):gt.set(arguments),this.matrixStack.push(gt)}}class Ue{constructor(gt,ft,xt,At){if(this.p=gt,this.__isDirty=!1,ft instanceof HTMLImageElement)this.fromHTMLImageData(ft);else if(xt||At){this.width=ft||1,this.height=xt||1;var St=this.sourceImg=document.createElement('canvas');if(St.width=this.width,St.height=this.height,this.imageData=St.getContext('2d').createImageData(this.width,this.height),this.format=At===PConstants.ARGB||At===PConstants.ALPHA?At:PConstants.RGB,this.format===PConstants.RGB)for(var Et=3,yt=this.imageData.data,Ct=yt.length;Et<Ct;Et+=4)yt[Et]=255;this.__isDirty=!0,this.updatePixels()}else this.width=0,this.height=0,this.imageData=utilityContext2d.createImageData(1,1),this.format=PConstants.ARGB;this.pixels=buildPixelsObject(this),this.__isPImage=!0}updatePixels(){var gt=this.sourceImg;gt&&gt instanceof HTMLCanvasElement&&this.__isDirty&&gt.getContext('2d').putImageData(this.imageData,0,0),this.__isDirty=!1}fromHTMLImageData(gt){var ft=getCanvasData(gt);try{var xt=ft.context.getImageData(0,0,gt.width,gt.height);this.fromImageData(xt)}catch(At){gt.width&&gt.height&&(this.isRemote=!0,this.width=gt.width,this.height=gt.height)}this.sourceImg=gt}get(gt,ft,xt,At){return arguments.length?2===arguments.length?this.p.get(gt,ft,this):4===arguments.length?this.p.get(gt,ft,xt,At,this):void 0:this.p.get(this)}set(gt,ft,xt){this.p.set(gt,ft,xt,this),this.__isDirty=!0}blend(gt,ft,xt,At,St,Et,yt,Ct,It,bt){9===arguments.length?this.p.blend(this,gt,ft,xt,At,St,Et,yt,Ct,It,this):10===arguments.length&&this.p.blend(gt,ft,xt,At,St,Et,yt,Ct,It,bt,this),delete this.sourceImg}copy(gt,ft,xt,At,St,Et,yt,Ct,It){8===arguments.length?this.p.blend(this,gt,ft,xt,At,St,Et,yt,Ct,PConstants.REPLACE,this):9===arguments.length&&this.p.blend(gt,ft,xt,At,St,Et,yt,Ct,It,PConstants.REPLACE,this),delete this.sourceImg}filter(gt,ft){2===arguments.length?this.p.filter(gt,ft,this):1===arguments.length&&this.p.filter(gt,null,this),delete this.sourceImg}save(gt){this.p.save(gt,this)}resize(gt,ft){if(this.isRemote)throw'Image is loaded remotely. Cannot resize.';if(0!==this.width||0!==this.height){0===gt&&0!==ft?gt=Math.floor(this.width/this.height*ft):0===ft&&0!=gt&&(ft=Math.floor(this.height/this.width*gt));var xt=getCanvasData(this.imageData).canvas,At=getCanvasData(xt,gt,ft).context.getImageData(0,0,gt,ft);this.fromImageData(At)}}mask(gt){var xt,At,ft=this.toImageData();if(gt instanceof Ue||gt.__isPImage){if(gt.width===this.width&&gt.height===this.height)for(gt=gt.toImageData(),xt=2,At=4*(this.width*this.height);xt<At;xt+=4)ft.data[xt+1]=gt.data[xt];else throw'mask must have the same dimensions as PImage.';}else if(gt instanceof Array)if(this.width*this.height===gt.length)for(xt=0,At=gt.length;xt<At;++xt)ft.data[4*xt+3]=gt[xt];else throw'mask array must be the same length as PImage pixels array.';this.fromImageData(ft)}loadPixels(){}toImageData(){if(this.isRemote)return this.sourceImg;if(!this.__isDirty)return this.imageData;var gt=getCanvasData(this.sourceImg);return gt.context.getImageData(0,0,this.width,this.height)}toDataURL(){if(this.isRemote)throw'Image is loaded remotely. Cannot create dataURI.';var gt=getCanvasData(this.imageData);return gt.canvas.toDataURL()}fromImageData(gt){var ft=gt.width,xt=gt.height,At=document.createElement('canvas'),St=At.getContext('2d');this.width=At.width=ft,this.height=At.height=xt,St.putImageData(gt,0,0),this.format=PConstants.ARGB,this.imageData=gt,this.sourceImg=At}}class Ke{constructor(gt,ft){gt===void 0&&(gt=''),this.name=gt,ft===void 0&&(ft=0),this.size=ft,this.glyph=!1,this.ascent=0,this.descent=0,this.leading=1.2*ft;let xt=gt.indexOf(' Italic Bold');-1!==xt&&(gt=gt.substring(0,xt)),this.style='normal';let At=gt.indexOf(' Italic');-1!==At&&(gt=gt.substring(0,At),this.style='italic'),this.weight='normal';let St=gt.indexOf(' Bold');-1!==St&&(gt=gt.substring(0,St),this.weight='bold'),this.family='sans-serif';void 0!==gt&&(this.family='sans-serif'===gt||'serif'===gt||'monospace'===gt||'fantasy'===gt||'cursive'===gt?gt:'"'+gt+'", sans-serif');this.context2d=$(this),this.css=this.getCSSDefinition(),this.context2d&&(this.context2d.font=this.css)}getCSSDefinition(gt,ft){gt===void 0&&(gt=this.size+'px'),ft===void 0&&(ft=this.leading+'px');let xt=[this.style,'normal',this.weight,gt+'/'+ft,this.family];return xt.join(' ')}measureTextWidth(gt){return this.context2d.measureText(gt).width}measureTextWidthFallback(gt){let ft=document.createElement('canvas'),xt=ft.getContext('2d');return xt.font=this.css,xt.measureText(gt).width}}Ke.PFontCache={length:0},Ke.get=function(gt,ft){ft=(0|10*ft+0.5)/10;let xt=Ke.PFontCache,At=gt+'/'+ft;if(!xt[At]){if(xt[At]=new Ke(gt,ft),xt.length++,50===xt.length){for(var St in Ke.prototype.measureTextWidth=Ke.prototype.measureTextWidthFallback,Ke.prototype.caching=!1,xt)'length'!==St&&(xt[St].context2d=null);return new Ke(gt,ft)}if(400===xt.length)return Ke.PFontCache={},Ke.get=Ke.getFallback,new Ke(gt,ft)}return xt[At]},Ke.caching=!0,Ke.getFallback=function(gt,ft){return new Ke(gt,ft)},Ke.list=function(){return['sans-serif','serif','monospace','fantasy','cursive']},Ke.preloading={template:{},initialized:!1,initialize:function(){let gt=document.createElement('style');gt.setAttribute('type','text/css'),gt.innerHTML='@font-face {\n  font-family: "PjsEmptyFont";\n  src: url(\'data:application/x-font-ttf;base64,'+function(){return'#E3KAI2wAgT1MvMg7Eo3VmNtYX7ABi3CxnbHlm7Abw3kaGVhZ7ACs3OGhoZWE7A53CRobXR47AY3AGbG9jYQ7G03Bm1heH7ABC3CBuYW1l7Ae3AgcG9zd7AI3AE#B3AQ2kgTY18PPPUACwAg3ALSRoo3#yld0xg32QAB77#E777773B#E3C#I#Q77773E#Q7777777772CMAIw7AB77732B#M#Q3wAB#g3B#E#E2BB//82BB////w#B7#gAEg3E77x2B32B#E#Q#MTcBAQ32gAe#M#QQJ#E32M#QQJ#I#g32Q77#'.replace(/[#237]/g,function(xt){return'AAAAAAAA'.substr(~~xt?7-xt:6)})}()+'\')\n       format(\'truetype\');\n}',document.head.appendChild(gt);let ft=document.createElement('span');ft.style.cssText='position: absolute; top: -1000; left: 0; opacity: 0; font-family: "PjsEmptyFont", fantasy;',ft.innerHTML='AAAAAAAA',document.body.appendChild(ft),this.template=ft,this.initialized=!0},getElementWidth:function(gt){return document.defaultView.getComputedStyle(gt,'').getPropertyValue('width')},timeAttempted:0,pending:function(gt){this.initialized||this.initialize();let ft,xt,At=this.getElementWidth(this.template);for(let St=0;St<this.fontList.length;St++){if(ft=this.fontList[St],xt=this.getElementWidth(ft),4e3>this.timeAttempted&&xt===At)return this.timeAttempted+=gt,!0;document.body.removeChild(ft),this.fontList.splice(St--,1),this.timeAttempted=0}return 0!==this.fontList.length},fontList:[],addedList:{},add:function(gt){this.initialized||this.initialize();let ft='object'==typeof gt?gt.fontFace:gt,xt='object'==typeof gt?gt.url:gt;if(!this.addedList[ft]){let At=document.createElement('style');At.setAttribute('type','text/css'),At.innerHTML='@font-face{\n  font-family: \''+ft+'\';\n  src:  url(\''+xt+'\');\n}\n',document.head.appendChild(At),this.addedList[ft]=!0;let St=document.createElement('span');St.style.cssText='position: absolute; top: 0; left: 0; opacity: 0;',St.style.fontFamily='"'+ft+'", "PjsEmptyFont", fantasy',St.innerHTML='AAAAAAAA',document.body.appendChild(St),this.fontList.push(St)}}};class ze{constructor(gt,ft,xt){this.curSketch=gt,this.curElement=ft,this.curContext=xt,this.drawing,this.doFill=!0,this.fillStyle=[1,1,1,1],this.currentFillColor=4294967295,this.isFillDirty=!0,this.doStroke=!0,this.strokeStyle=[0,0,0,1],this.currentStrokeColor=4278190080,this.isStrokeDirty=!0,this.lineWidth=1,this.loopStarted=!1,this.renderSmooth=!1,this.doLoop=!0,this.looping=0,this.curRectMode=He.CORNER,this.curEllipseMode=He.CENTER,this.normalX=0,this.normalY=0,this.normalZ=0,this.normalMode=He.NORMAL_MODE_AUTO,this.curFrameRate=60,this.curMsPerFrame=1e3/this.curFrameRate,this.curCursor=He.ARROW,this.oldCursor=this.curElement.style.cursor,this.curShape=He.POLYGON,this.curShapeCount=0,this.curvePoints=[],this.curTightness=0,this.curveDet=20,this.curveInited=!1,this.backgroundObj=-3355444,this.bezDetail=20,this.colorModeA=255,this.colorModeX=255,this.colorModeY=255,this.colorModeZ=255,this.pathOpen=!1,this.mouseDragging=!1,this.pmouseXLastFrame=0,this.pmouseYLastFrame=0,this.curColorMode=He.RGB,this.curTint=null,this.curTint3d=null,this.getLoaded=!1,this.start=Date.now(),this.timeSinceLastFPS=this.start,this.framesSinceLastFPS=0,this.textcanvas=void 0,this.curveBasisMatrix=void 0,this.curveToBezierMatrix=void 0,this.curveDrawMatrix=void 0,this.bezierDrawMatrix=void 0,this.bezierBasisInverse=void 0,this.bezierBasisMatrix=void 0,this.curContextCache={attributes:{},locations:{}},this.programObject3D=void 0,this.programObject2D=void 0,this.programObjectUnlitShape=void 0,this.boxBuffer=void 0,this.boxNormBuffer=void 0,this.boxOutlineBuffer=void 0,this.rectBuffer=void 0,this.rectNormBuffer=void 0,this.sphereBuffer=void 0,this.lineBuffer=void 0,this.fillBuffer=void 0,this.fillColorBuffer=void 0,this.strokeColorBuffer=void 0,this.pointBuffer=void 0,this.shapeTexVBO=void 0,this.canTex,this.textTex,this.curTexture={width:0,height:0},this.curTextureMode=He.IMAGE,this.usingTexture=!1,this.textBuffer=void 0,this.textureBuffer=void 0,this.indexBuffer=void 0,this.horizontalTextAlignment=He.LEFT,this.verticalTextAlignment=He.BASELINE,this.textMode=He.MODEL,this.curFontName='Arial',this.curTextSize=12,this.curTextAscent=9,this.curTextDescent=2,this.curTextLeading=14,this.curTextFont=Ke.get(this.curFontName,this.curTextSize),this.originalContext=void 0,this.proxyContext=null,this.isContextReplaced=!1,this.setPixelsCached=void 0,this.maxPixelsCached=1e3,this.pressedKeysMap=[],this.lastPressedKeyCode=null,this.codedKeys=[He.SHIFT,He.CONTROL,He.ALT,He.CAPSLK,He.PGUP,He.PGDN,He.END,He.HOME,He.LEFT,He.UP,He.RIGHT,He.DOWN,He.NUMLK,He.INSERT,He.F1,He.F2,He.F3,He.F4,He.F5,He.F6,He.F7,He.F8,He.F9,He.F10,He.F11,He.F12,He.META],this.lightCount=0,this.sphereDetailV=0,this.sphereDetailU=0,this.sphereX=[],this.sphereY=[],this.sphereZ=[],this.sinLUT=new Float32Array(He.SINCOS_LENGTH),this.cosLUT=new Float32Array(He.SINCOS_LENGTH),this.sphereVerts=void 0,this.sphereNorms,this.cam=void 0,this.cameraInv=void 0,this.modelView=void 0,this.modelViewInv=void 0,this.userMatrixStack=void 0,this.userReverseMatrixStack=void 0,this.inverseCopy=void 0,this.projection=void 0,this.manipulatingCamera=!1,this.frustumMode=!1,this.cameraFOV=60*(Math.PI/180),this.cameraX=gt.width/2,this.cameraY=gt.height/2,this.cameraZ=this.cameraY/Math.tan(this.cameraFOV/2),this.cameraNear=this.cameraZ/10,this.cameraFar=10*this.cameraZ,this.cameraAspect=gt.width/gt.height,this.vertArray=[],this.curveVertArray=[],this.curveVertCount=0,this.isCurve=!1,this.isBezier=!1,this.firstVert=!0,this.curShapeMode=He.CORNER,this.styleArray=[],this.boxVerts=new Float32Array([0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5]),this.boxOutlineVerts=new Float32Array([0.5,0.5,0.5,0.5,-0.5,0.5,0.5,0.5,-0.5,0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5,0.5,0.5,0.5,0.5,0.5,-0.5,0.5,0.5,-0.5,-0.5,0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,-0.5,0.5,-0.5,-0.5,0.5,0.5,-0.5,0.5]),this.boxNorms=new Float32Array([0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,-1,0,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0,0,1,0]),this.rectVerts=new Float32Array([0,0,0,0,1,0,1,1,0,1,0,0]),this.rectNorms=new Float32Array([0,0,1,0,0,1,0,0,1,0,0,1]),this.bindSketchFNames(gt)}bindSketchFNames(gt){De.forEach(ft=>{gt[ft]=this[ft].bind(this)})}a3DOnlyFunction(){}$ensureContext(){return this.curContext}saveContext(){this.curContext.save()}restoreContext(){this.curContext.restore(),this.isStrokeDirty=!0,this.isFillDirty=!0}applyMatrix(){var gt=arguments;this.modelView.apply(gt[0],gt[1],gt[2],gt[3],gt[4],gt[5],gt[6],gt[7],gt[8],gt[9],gt[10],gt[11],gt[12],gt[13],gt[14],gt[15]),this.modelViewInv.invApply(gt[0],gt[1],gt[2],gt[3],gt[4],gt[5],gt[6],gt[7],gt[8],gt[9],gt[10],gt[11],gt[12],gt[13],gt[14],gt[15])}size(gt,ft){this.doStroke&&this.curSketch.stroke(0),this.doFill&&this.curSketch.fill(255);let xt=this.curContext,At=this.curElement,St=this.curTextFont,Et={fillStyle:xt.fillStyle,strokeStyle:xt.strokeStyle,lineCap:xt.lineCap,lineJoin:xt.lineJoin};for(var yt in 0<At.style.length&&(At.style.removeProperty('width'),At.style.removeProperty('height')),this.curElement.width=this.curSketch.width=gt||100,this.curElement.height=this.curSketch.height=ft||100,Et)Et.hasOwnProperty(yt)&&(this.curContext[yt]=Et[yt]);this.curSketch.textFont(St),this.curSketch.background(),this.maxPixelsCached=Math.max(1e3,0.05*(gt*ft));for(let Ct=0;Ct<He.SINCOS_LENGTH;Ct++)this.sinLUT[Ct]=Math.sin(0.5*(Ct*(Math.PI/180))),this.cosLUT[Ct]=Math.cos(0.5*(Ct*(Math.PI/180)))}redraw(){let gt=this.curSketch;gt.$redrawHelper(),this.curContext.lineWidth=this.lineWidth,this.saveContext(),gt.draw(),this.restoreContext()}fill(...gt){let ft=this.curSketch.color(...gt);ft===this.currentFillColor&&this.doFill||(this.doFill=!0,this.currentFillColor=ft)}stroke(...gt){let ft=this.curSketch.color(...gt);ft===this.currentStrokeColor&&this.doStroke||(this.doStroke=!0,this.currentStrokeColor=ft)}strokeWeight(gt){this.lineWidth=gt}backgroundHelper(gt,ft,xt,At){let St=void 0,Et=this.curSketch;if(gt instanceof Ue||gt.__isPImage){if(St=gt,!St.loaded)throw'Error using image in background(): PImage not loaded.';if(St.width!==Et.width||St.height!==Et.height)throw'Background image must be the same dimensions as the canvas.'}else St=Et.color(gt,ft,xt,At);this.backgroundObj=St}alpha(gt){return((gt&He.ALPHA_MASK)>>>24)/255*this.colorModeA}executeContextStroke(){this.doStroke&&(this.isStrokeDirty&&(this.curContext.strokeStyle=this.curSketch.color.toString(this.currentStrokeColor),this.isStrokeDirty=!1),this.curContext.stroke())}textFont(gt,ft){ft!==void 0&&(!gt.glyph&&(gt=Ke.get(gt.name,ft)),this.curTextSize=ft);let xt=this.curTextFont=gt;this.curFontName=xt.name,this.curTextAscent=xt.ascent,this.curTextDescent=xt.descent,this.curTextLeading=xt.leading,this.curContext.font=xt.css}}class je extends ze{constructor(gt,ft,xt){super(gt,ft,xt)}$newPMatrix(){return new Xe}size(gt,ft,xt){this.curContext=this.curElement.getContext('2d'),this.userMatrixStack=new Ve,this.userReverseMatrixStack=new Ve,this.modelView=new Xe,this.modelViewInv=new Xe,super.size(gt,ft,xt)}background(gt,ft,xt,At){gt!==void 0&&super.backgroundHelper(gt,ft,xt,At);let St=this.curSketch,Et=this.backgroundObj;this.saveContext(),Et instanceof Ue||Et.__isPImage?(this.curContext.setTransform(1,0,0,1,0,0),St.image(Et,0,0)):(this.curContext.setTransform(1,0,0,1,0,0),St.alpha(Et)!==this.colorModeA&&this.curContext.clearRect(0,0,St.width,St.height),this.curContext.fillStyle=St.color.toString(Et),this.curContext.fillRect(0,0,St.width,St.height),this.isFillDirty=!0),this.restoreContext()}stroke(...gt){super.stroke(...gt),this.isStrokeDirty=!0}fill(...gt){super.fill(...gt),this.isFillDirty=!0}line(gt,ft,xt,At){if(this.doStroke){if(this.renderSmooth||(gt=Math.round(gt),xt=Math.round(xt),ft=Math.round(ft),At=Math.round(At)),gt===xt&&ft===At)return this.curSketch.point(gt,ft);let St=this.curContext,Et=void 0,yt=this.lineWidth,Ct=!0,It=this.modelView.array(),bt=[1,0,0,0,1,0];for(let _t=0;6>_t&&Ct;_t++)Ct=It[_t]===bt[_t];if(Ct){let _t;gt===xt?(ft>At&&(_t=ft,ft=At,At=_t),At++,1==yt%2&&St.translate(0.5,0)):ft===At&&(gt>xt&&(_t=gt,gt=xt,xt=_t),xt++,1==yt%2&&St.translate(0,0.5)),1===yt&&(Et=St.lineCap,St.lineCap='butt')}St.beginPath(),St.moveTo(gt||0,ft||0),St.lineTo(xt||0,At||0),this.executeContextStroke(),Ct&&(gt===xt&&1==yt%2?St.translate(-0.5,0):ft===At&&1==yt%2&&St.translate(0,-0.5),1===yt&&(St.lineCap=Et))}}rotate(gt){this.modelView.rotateZ(gt),this.modelViewInv.invRotateZ(gt),this.curContext.rotate(gt)}translate(gt,ft){this.modelView.translate(gt,ft),this.modelViewInv.invTranslate(gt,ft),this.curContext.translate(gt,ft)}}const We={name:'Processing.js Instance',use3DContext:!1,focused:!1,breakShape:!1,glyphTable:{},pmouseX:0,pmouseY:0,mouseX:0,mouseY:0,mouseButton:0,mouseScroll:0,mouseClicked:void 0,mouseDragged:void 0,mouseMoved:void 0,mousePressed:void 0,mouseReleased:void 0,mouseScrolled:void 0,mouseOver:void 0,mouseOut:void 0,touchStart:void 0,touchEnd:void 0,touchMove:void 0,touchCancel:void 0,key:void 0,keyCode:void 0,keyPressed:F,keyReleased:F,keyTyped:F,draw:void 0,setup:void 0,__mousePressed:!1,__keyPressed:!1,__frameRate:60,frameCount:0,width:100,height:100};class Ye{constructor(gt){this.index=-1,this.array=gt}hasNext(){return this.index+1<this.array.length}next(){return this.array[++this.index]}remove(){this.array.splice(this.index--,1)}}class Ze{toString(){return'JavaBaseClass'}hashCode(){return 0}}class qe extends Ze{constructor(gt){super(),this.array=[],gt&&gt.toArray&&(this.array=gt.toArray())}get(gt){return this.array[gt]}contains(gt){return-1<this.indexOf(gt)}indexOf(gt){let ft=this.array;for(let xt=0,At=ft.length;xt<At;++xt)if(G(gt,ft[xt]))return xt;return-1}lastIndexOf(gt){let ft=this.array;for(let xt=ft.length-1;0<=xt;--xt)if(G(gt,ft[xt]))return xt;return-1}add(gt,ft){let xt=this.array;if(!ft)return ft=gt,xt.push(ft);if('number'==typeof gt){if(0>gt)throw new Error(`ArrayList.add(index,Object): index cannot be less than zero (found ${number}).`);if(gt>=xt.length)throw new Error('ArrayList.add(index,Object): index cannot be higher than there are list elements (found ${number} for list size ${array.length}).');return xt.splice(gt,0,arguments[1])}throw`ArrayList.add(index,Object): index is not a number (found type ${typeof gt} instead).`}addAll(gt,ft){let xt,At=this.array;if(!ft){for(ft=gt,xt=new ObjectIterator(ft);xt.hasNext();)At.push(xt.next());return}if('number'==typeof gt){if(0>gt)throw new Error(`ArrayList.addAll(index,Object): index cannot be less than zero (found ${number}).`);if(gt>=At.length)throw new Error('ArrayList.addAll(index,Object): index cannot be higher than there are list elements (found ${number} for list size ${array.length}).');for(xt=new ObjectIterator(ft);xt.hasNext();)At.splice(gt++,0,xt.next());return}throw`ArrayList.addAll(index,collection): index is not a number (found type ${typeof gt} instead).`}set(gt,ft){let xt=this.array;if(!ft)throw new Error(`ArrayList.set(index,Object): missing object argument.`);if('number'==typeof gt){if(0>gt)throw new Error(`ArrayList.set(index,Object): index cannot be less than zero (found ${number}).`);if(gt>=xt.length)throw new Error('ArrayList.set(index,Object): index cannot be higher than there are list elements (found ${number} for list size ${array.length}).');return xt.splice(gt,1,ft)}throw`ArrayList.set(index,Object): index is not a number (found type ${typeof gt} instead).`}size(){return this.array.length}clear(){this.array=[]}remove(gt){return'number'==typeof gt?array.splice(gt,1)[0]:(gt=this.indexOf(gt),!!(-1<gt)&&(array.splice(gt,1),!0))}removeAll(gt){let ft=this.array;return this.clear(),ft.forEach(xt=>{gt.contains(xt)||this.add(x++,xt)}),this.size()<newList.size()}isEmpty(){return 0===this.array.length}clone(){return new qe(this)}toArray(){return this.array.slice()}iterator(){return new Ye(this.array)}toString(){return`[${this.array.map(gt=>gt.toString()).join(',')}]`}}class Qe{constructor(gt){let ft=typeof gt;this.code='string'==ft&&1===gt.length?gt.charCodeAt(0):'number'==ft?gt:gt instanceof Qe?gt.code:NaN}toString(){return String.fromCharCode(this.code)}valueOf(){return this.code}}class Je{constructor(gt){this.buckets=gt,this.bucketIndex=0,this.itemIndex=-1,this.endOfBuckets=!1,this.currentItem=void 0,this.findNext()}findNext(){for(;!this.endOfBuckets;)if(++this.itemIndex,this.bucketIndex>=buckets.length)this.endOfBuckets=!0;else if(void 0===this.buckets[this.bucketIndex]||this.itemIndex>=this.buckets[this.bucketIndex].length)this.itemIndex=-1,++this.bucketIndex;else return}hasNext(){return!this.endOfBuckets}next(){return this.currentItem=this.conversion(this.buckets[this.bucketIndex][this.itemIndex]),this.findNext(),currentItem}remove(){this.currentItem!==void 0&&(this.removeItem(currentItem),--this.itemIndex,this.findNext())}}class et{constructor(gt,ft,xt,At){this.hashMap=gt,this.conversion=ft,this.isIn=isInt,this.removeItem=At}clear(){this.hashMap.clear()}contains(gt){return this.isIn(gt)}containsAll(gt){for(var ft=gt.iterator();ft.hasNext();)if(!this.contains(ft.next()))return!1;return!0}isEmpty(){return this.hashMap.isEmpty()}iterator(){return new Je(this.hashMap.buckets,conversion,removeItem)}remove(gt){return!!this.contains(gt)&&(this.removeItem(gt),!0)}removeAll(gt){for(var ft=gt.iterator();ft.hasNext();){var xt=ft.next();this.contains(xt)&&this.removeItem(xt)}return!0}retainAll(gt){for(var ft=this.iterator(),xt=[];ft.hasNext();){var At=ft.next();gt.contains(At)||xt.push(At)}return xt.forEach(St=>this.removeItem(St)),0<xt.length}size(){return this.hashMap.size()}toArray(){for(var gt=[],ft=this.iterator();ft.hasNext();)gt.push(ft.next());return gt}}class tt{constructor(gt,ft){this.hashMap=gt,this.pair=ft}_isIn(gt){return gt===this.hashMap&&this.pair.removed===void 0}equals(gt){return virtEquals(this.pair.key,gt.getKey())}getKey(){return this.pair.key}getValue(){return this.pair.value}hashCode(){return virtHashCode(this.pair.key)}setValue(gt){let ft=this.pair,xt=ft.value;return ft.value=gt,xt}}class nt extends Ze{constructor(gt){return super(),gt instanceof nt?arguments[0].clone():void(this.initialCapacity=0<arguments.length?arguments[0]:16,this.loadFactor=1<arguments.length?arguments[1]:0.75,this.clear())}clear(){this.count=0,this.buckets=[],this.buckets.length=this.initialCapacity}clone(){let gt=new nt;return gt.putAll(this),gt}containsKey(gt){let ft=this.buckets,xt=V(ft,gt),At=ft[xt];if(At===void 0)return!1;for(let St=0;St<At.length;++St)if(G(At[St].key,gt))return!0;return!1}containsValue(gt){let ft=this.buckets;for(let xt=0;xt<ft.length;++xt){let At=ft[xt];if(void 0!==At)for(let St=0;St<At.length;++St)if(G(At[St].value,gt))return!0}return!1}entrySet(){return new et(this,gt=>new tt(gt),gt=>gt instanceof tt&&gt._isIn(this),gt=>this.remove(gt.getKey()))}get(gt){let ft=this.buckets,xt=V(ft,gt),At=ft[xt];if(At===void 0)return null;for(let St=0;St<At.length;++St)if(G(At[St].key,gt))return At[St].value;return null}isEmpty(){return 0===this.count}keySet(){return new et(this,gt=>gt.key,gt=>this.containsKey(gt),gt=>this.remove(gt))}values(){return new et(this,gt=>gt.value,gt=>this.containsValue(gt),gt=>this.removeByValue(gt))}put(gt,ft){let xt=this.buckets,At=V(xt,gt),St=xt[At];if(void 0===St)return++this.count,xt[At]=[{key:gt,value:ft}],U(xt,this.loadFactor,this.count),null;for(let Et=0;Et<St.length;++Et)if(G(St[Et].key,gt)){let yt=St[Et].value;return St[Et].value=ft,yt}return++this.count,St.push({key:gt,value:ft}),U(xt,this.loadFactor,this.count),null}putAll(gt){for(let ft=gt.entrySet().iterator();ft.hasNext();){let xt=ft.next();this.put(xt.getKey(),xt.getValue())}}remove(gt){let ft=this.buckets,xt=V(ft,gt),At=ft[xt];if(At===void 0)return null;for(let St=0;St<At.length;++St)if(G(At[St].key,gt)){--this.count;let Et=At[St].value;return At[St].removed=!0,1<At.length?At.splice(St,1):ft[xt]=void 0,Et}return null}removeByValue(gt){let xt,At,St,Et,ft=this.buckets;for(xt in ft)if(ft.hasOwnProperty(xt))for(At=0,St=ft[xt].length;At<St;At++)if(Et=ft[xt][At],Et.value===gt)return ft[xt].splice(At,1),!0;return!1}size(){return this.count}toString(){let gt=this.buckets,ft=[];return gt.forEach(xt=>{xt.forEach(At=>{ft.push(At.key+'='+At.value.toString())})}),`{${ft.join(',')}}`}}class rt{constructor(gt,ft){this.z=gt||362436069,this.w=ft||521288629}intGenerator(){return this.z=4294967295&36969*(65535&this.z)+(this.z>>>16),this.w=4294967295&18000*(65535&this.w)+(this.w>>>16),4294967295&((65535&this.z)<<16|65535&this.w)}doubleGenerator(){var gt=this.intGenerator()/4294967296;return 0>gt?1+gt:gt}static createRandomized(){var gt=new Date;return new rt(4294967295&gt/6e4,4294967295&gt)}}let at={generator:void 0,octaves:4,fallout:0.5,seed:void 0},st=Math.random;class ot{constrain(gt,ft,xt){return gt>xt?xt:gt<ft?ft:gt}dist(){var gt,ft,xt;return 4===arguments.length?(gt=arguments[0]-arguments[2],ft=arguments[1]-arguments[3],Math.sqrt(gt*gt+ft*ft)):6===arguments.length?(gt=arguments[0]-arguments[3],ft=arguments[1]-arguments[4],xt=arguments[2]-arguments[5],Math.sqrt(gt*gt+ft*ft+xt*xt)):void 0}lerp(gt,ft,xt){return(ft-gt)*xt+gt}mag(gt,ft,xt){return xt?Math.sqrt(gt*gt+ft*ft+xt*xt):Math.sqrt(gt*gt+ft*ft)}map(gt,ft,xt,At,St){return At+(St-At)*((gt-ft)/(xt-ft))}max(){if(2===arguments.length)return arguments[0]<arguments[1]?arguments[1]:arguments[0];var gt=1===arguments.length?arguments[0]:arguments;if(!('length'in gt&&0<gt.length))throw'Non-empty array is expected';var ft=gt[0],xt=gt.length;for(var At=1;At<xt;++At)ft<gt[At]&&(ft=gt[At]);return ft}min(){if(2===arguments.length)return arguments[0]<arguments[1]?arguments[0]:arguments[1];var gt=1===arguments.length?arguments[0]:arguments;if(!('length'in gt&&0<gt.length))throw'Non-empty array is expected';var ft=gt[0],xt=gt.length;for(var At=1;At<xt;++At)ft>gt[At]&&(ft=gt[At]);return ft}norm(gt,ft,xt){return(gt-ft)/(xt-ft)}sq(gt){return gt*gt}degrees(gt){return 180*gt/Math.PI}random(gt,ft){if(0===arguments.length?(ft=1,gt=0):1===arguments.length&&(ft=gt,gt=0),gt===ft)return gt;for(var xt=0;100>xt;xt++){var At=st(),St=At*(ft-gt)+gt;if(St!==ft)return St}return gt}randomSeed(gt){st=new rt(gt,(gt<<16)+(gt>>16)).doubleGenerator,this.haveNextNextGaussian=!1}randomGaussian(){if(this.haveNextNextGaussian)return this.haveNextNextGaussian=!1,this.nextNextGaussian;var gt,ft,xt;do gt=2*st()-1,ft=2*st()-1,xt=gt*gt+ft*ft;while(1<=xt||0===xt);var At=Math.sqrt(-2*Math.log(xt)/xt);return this.nextNextGaussian=ft*At,this.haveNextNextGaussian=!0,gt*At}noise(gt,ft,xt){at.generator===undef&&(at.generator=new K(at.seed));var At=at.generator,St=1,Et=1,yt=0;for(var Ct=0;Ct<at.octaves;++Ct){switch(St*=at.fallout,arguments.length){case 1:yt+=St*(1+At.noise1d(Et*gt))/2;break;case 2:yt+=St*(1+At.noise2d(Et*gt,Et*ft))/2;break;case 3:yt+=St*(1+At.noise3d(Et*gt,Et*ft,Et*xt))/2;}Et*=2}return yt}noiseDetail(gt,ft){at.octaves=gt,ft!==undef&&(at.fallout=ft)}noiseSeed(gt){at.seed=gt,at.generator=undef}}let lt=void 0;class dt{static __contains(gt,ft){return'string'==typeof gt?null!==gt&&null!==ft&&'string'==typeof ft&&-1<gt.indexOf(ft):gt.contains.apply(gt,W(arguments))}static __replaceAll(gt,ft,xt){return'string'==typeof gt?gt.replace(new RegExp(ft,'g'),xt):gt.replaceAll.apply(gt,W(arguments))}static __replaceFirst(gt,ft,xt){return'string'==typeof gt?gt.replace(new RegExp(ft,''),xt):gt.replaceFirst.apply(gt,W(arguments))}static __replace(gt,ft,xt){if('string'!=typeof gt)return gt.replace.apply(gt,W(arguments));if(ft instanceof RegExp)return gt.replace(ft,xt);if('string'!=typeof ft&&(ft=ft.toString()),''===ft)return gt;var At=gt.indexOf(ft);if(0>At)return gt;var St=0,Et='';do Et+=gt.substring(St,At)+xt,St=At+ft.length;while(0<=(At=gt.indexOf(ft,St)));return Et+gt.substring(St)}static __equals(gt,ft){return gt.equals instanceof Function?gt.equals.apply(gt,W(arguments)):G(gt,ft)}static __equalsIgnoreCase(gt,ft){return'string'==typeof gt?gt.toLowerCase()===ft.toLowerCase():gt.equalsIgnoreCase.apply(gt,W(arguments))}static __toCharArray(gt){if('string'!=typeof gt)return gt.toCharArray.apply(gt,W(arguments));var ft=[];for(var xt=0,At=gt.length;xt<At;++xt)ft[xt]=new Char(gt.charAt(xt));return ft}static __split(gt,ft,xt){if('string'!=typeof gt)return gt.split.apply(gt,W(arguments));var At=new RegExp(ft);if(xt===lt||1>xt)return gt.split(At);for(var yt,St=[],Et=gt;-1!==(yt=Et.search(At))&&St.length<xt-1;){var Ct=At.exec(Et).toString();St.push(Et.substring(0,yt)),Et=Et.substring(yt+Ct.length)}return(-1!==yt||''!==Et)&&St.push(Et),St}static __codePointAt(gt,ft){var At,St,xt=gt.charCodeAt(ft);return 55296<=xt&&56319>=xt?(At=xt,St=gt.charCodeAt(ft+1),1024*(At-55296)+(St-56320)+65536):xt}static __matches(gt,ft){return new RegExp(ft).test(gt)}static __startsWith(gt,ft,xt){return'string'==typeof gt?(xt=xt||0,0>xt||xt>gt.length?!1:''===ft||ft===gt||gt.indexOf(ft)===xt):gt.startsWith.apply(gt,W(arguments))}static __endsWith(gt,ft){if('string'!=typeof gt)return gt.endsWith.apply(gt,W(arguments));var xt=ft?ft.length:0;return''===ft||ft===gt||gt.indexOf(ft)===gt.length-xt}static __hashCode(gt){return gt.hashCode instanceof Function?gt.hashCode.apply(gt,W(arguments)):H(gt)}static __printStackTrace(gt){console.error('Exception: '+gt.toString())}}class ct{constructor(gt,ft,xt){this.declaredClasses=gt,this.sourceStrings=ft,this.astNodes=xt}getSourceStrings(){return this.sourceStrings}generateMetadata(){L(this.declaredClasses)}setWeight(){B(this.declaredClasses)}replaceContext(gt){return ft=>{let xt=ft.name;return gt.hasOwnProperty(xt)?xt:Fe.hasOwnProperty(xt)||He.hasOwnProperty(xt)||this.defaultScope.hasOwnProperty(xt)?'$p.'+xt:xt}}toString(gt){gt=gt||{},this.defaultScope=Q(gt);let At,ft=[],xt=[];for(let Ct=0,It=this.astNodes.length;Ct<It;++Ct)At=this.astNodes[Ct],At instanceof le||At instanceof Ie?ft.push(At):xt.push(At);T(ft);let St=N(this.astNodes),Et=this.replaceContext(St);ft=O(ft,Et,''),xt=O(xt,Et,'');let yt=[`// this code was autogenerated by ProcessingJS-ES7 version ${'0.0.0'}`,`(function(PJS) {`,`  let $p = PJS.generateDefaultScope();`,`  $p.id = {{ SKETCH_ID_PLACEHOLDER }};`,`  ${ft}`,`  ${xt}`,`  PJS.onSketchLoad($p);`,`  window.sketch = $p;`,`}(Processing));`].join('\n');return yt}}let ut={preSetup:F,postSetup:F,preDraw:F,postDraw:F,onFrameStart:F,onFrameEnd:F,onLoop:F,onPause:F};class mt{constructor(gt){if(this.sketch=gt.sketch,this.target=gt.target,this.hooks=Object.assign({},ut,gt.hooks),this.cache={},!this.target){let ft=document.createElement('canvas');ft.width=100,ft.height=100,this.target=ft}se(this.sketch,this.hooks),this.startLooping=ie(this.sketch,this.hooks),this.sketch.__setup_drawing_context(this.target,this.target.getContext('2d'))}run(){this.sketch.setup&&(this.__pre_setup(),this.sketch.setup(),this.__post_setup()),this.sketch.draw&&(this.__pre_draw(),this.hooks.onFrameStart(),this.sketch.draw(),this.hooks.onFrameEnd(),this.__post_draw(),this.startLooping())}__pre_setup(){this.hooks.preSetup()}__post_setup(){this.hooks.postSetup()}__pre_draw(){this.hooks.preDraw(this.context),this.cache.context=this.context}__post_draw(){this.hooks.postDraw(this.context),this.context=this.cache.context}}var ht=[],pt={async load(gt){let ft={};return gt.forEach(xt=>ft[xt]=!1),new Promise(function(){})},aggregate(){},async parse(gt){let ft=re(gt);return te(ft)},async convert(gt,ft){let xt=gt.toString(ft),At=gt.getSourceStrings();return xt=xt.replace(/\s*\n(?:[\t ]*\n)+/g,'\n\n'),xt=xt.replace(/__x([0-9A-F]{4})/g,function(St,Et){return String.fromCharCode(parseInt(Et,16))}),ae(xt,At)},injectSketch(gt,ft,xt,At){let St=ht.length;ht[St]={sketch:void 0,target:ft,hooks:At};let Et=document.querySelector(`#processing-sketch-${St}`);if(!Et){let yt=document.createElement('script');yt.id=`processing-sketch-${St}`,yt.textContent=gt.replace('{{ SKETCH_ID_PLACEHOLDER }}',St),yt.async=!0;let Ct=document.querySelector('head');return Ct.appendChild(yt)}},generateDefaultScope(gt){return Q(gt)},onSketchLoad(gt){let ft=gt.id,xt=ht[ft];xt.sketch=gt;let At=new mt(xt);setTimeout(()=>At.run(),1)},run(gt,ft,xt,At){if(!gt)throw new Error('No source code supplied to build a sketch with.');if(!ft)throw new Error('No target element supplied for the sketch to run in.');pt.load(gt).then(St=>pt.aggregate(St)).then(St=>pt.parse(St)).then(St=>pt.convert(St,xt)).then(St=>pt.injectSketch(St,ft,xt,At)).catch(St=>{if(At&&At.onerror)At.onerror(St);else throw St})}};return pt});

